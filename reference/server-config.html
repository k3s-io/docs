<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-reference/server-config">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<title data-rh="true">K3s Server Configuration | K3s</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://k3s-io.github.io/reference/server-config"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="K3s Server Configuration | K3s"><meta data-rh="true" name="description" content="In this section, you&#x27;ll learn how to configure the K3s server."><meta data-rh="true" property="og:description" content="In this section, you&#x27;ll learn how to configure the K3s server."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://k3s-io.github.io/reference/server-config"><link data-rh="true" rel="alternate" href="https://k3s-io.github.io/reference/server-config" hreflang="en"><link data-rh="true" rel="alternate" href="https://k3s-io.github.io/reference/server-config" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.b4f2bf39.css">
<link rel="preload" href="/assets/js/runtime~main.5ceaa649.js" as="script">
<link rel="preload" href="/assets/js/main.4d27e624.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/k3s-logo-light.svg" alt="logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/k3s-logo-dark.svg" alt="logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__docs navbar__link--active" href="/">Docs</a><a href="https://github.com/k3s-io/k3s/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__github btn btn-secondary icon-github">GitHub</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">K3s - Lightweight Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-start">Quick-Start Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/installation">Installation</a><button aria-label="Toggle the collapsible sidebar category &#x27;Installation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cluster-access">Cluster Access</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/upgrades">Upgrades</a><button aria-label="Toggle the collapsible sidebar category &#x27;Upgrades&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/backup-restore">Backup and Restore</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/storage">Volumes and Storage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/networking">Networking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/helm">Helm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/advanced">Advanced Options and Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/faq">FAQ</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/reference/server-config">Reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/reference/server-config">K3s Server Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/agent-config">K3s Agent Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/env-variables">Environment Variables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/binary-tools">K3s Binary Tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/resource-profiling">K3s Resource Profiling</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/known-issues">Known Issues</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/security">Security</a><button aria-label="Toggle the collapsible sidebar category &#x27;Security&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Reference</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">K3s Server Configuration</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>K3s Server Configuration</h1></header><p>In this section, you&#x27;ll learn how to configure the K3s server.</p><ul><li><a href="#commonly-used-options">Commonly Used Options</a><ul><li><a href="#database">Database</a></li><li><a href="#cluster-options">Cluster Options</a></li><li><a href="#client-options">Client Options</a></li></ul></li><li><a href="#agent-options">Agent Options</a><ul><li><a href="#agent-nodes">Agent Nodes</a></li><li><a href="#agent-runtime">Agent Runtime</a></li><li><a href="#agent-networking">Agent Networking</a></li></ul></li><li><a href="#advanced-options">Advanced Options</a><ul><li><a href="#logging">Logging</a></li><li><a href="#listeners">Listeners</a></li><li><a href="#data">Data</a></li><li><a href="#networking">Networking</a></li><li><a href="#storage-class">Storage Class</a></li><li><a href="#kubernetes-components">Kubernetes Components</a></li><li><a href="#customized-flags-for-kubernetes-processes">Customized Flags for Kubernetes Processes</a></li><li><a href="#experimental-options">Experimental Options</a></li><li><a href="#deprecated-options">Deprecated Options</a></li></ul></li><li><a href="#k3s-server-cli-help">K3s Server CLI Help</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="commonly-used-options">Commonly Used Options<a class="hash-link" href="#commonly-used-options" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="database">Database<a class="hash-link" href="#database" title="Direct link to heading">​</a></h3><table><thead><tr><th>Flag</th><th>Environment Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>--datastore-endpoint</code> value</td><td><code>K3S_DATASTORE_ENDPOINT</code></td><td>Specify etcd, Mysql, Postgres, or Sqlite (default) data source name</td></tr><tr><td><code>--datastore-cafile</code> value</td><td><code>K3S_DATASTORE_CAFILE</code></td><td>TLS Certificate Authority file used to secure datastore backend communication</td></tr><tr><td><code>--datastore-certfile</code> value</td><td><code>K3S_DATASTORE_CERTFILE</code></td><td>TLS certification file used to secure datastore backend communication</td></tr><tr><td><code>--datastore-keyfile</code> value</td><td><code>K3S_DATASTORE_KEYFILE</code></td><td>TLS key file used to secure datastore backend communication</td></tr><tr><td><code>--etcd-expose-metrics</code></td><td>N/A</td><td>Expose etcd metrics to client interface (default: false)</td></tr><tr><td><code>--etcd-disable-snapshots</code></td><td>N/A</td><td>Disable automatic etcd snapshots</td></tr><tr><td><code>--etcd-snapshot-name</code> value</td><td>N/A</td><td>Set the base name of etcd snapshots. Default: etcd-snapshot-<code>&lt;unix-timestamp&gt;</code> (default:&quot;etcd-snapshot&quot;)</td></tr><tr><td><code>--etcd-snapshot-schedule-cron</code> value</td><td>N/A</td><td>Snapshot interval time in cron spec. eg. every 5 hours &#x27;<!-- -->*<!-- --> <em>/5 </em> <!-- -->*<!-- --> <em>&#x27; (default: &quot;0 </em>/12 <!-- -->*<!-- --> <!-- -->*<!-- --> <!-- -->*<!-- -->&quot;)</td></tr><tr><td><code>--etcd-snapshot-retention</code> value</td><td>N/A</td><td>Number of snapshots to retain (default: 5)</td></tr><tr><td><code>--etcd-snapshot-dir</code> value</td><td>N/A</td><td>Directory to save db snapshots (default: ${data-dir}/db/snapshots)</td></tr><tr><td><code>--etcd-s3</code></td><td>N/A</td><td>Enable backup to S3</td></tr><tr><td><code>--etcd-s3-endpoint</code> value</td><td>N/A</td><td>S3 endpoint url (default: &quot;s3.amazonaws.com&quot;)</td></tr><tr><td><code>--etcd-s3-endpoint-ca</code> value</td><td>N/A</td><td>S3 custom CA cert to connect to S3 endpoint</td></tr><tr><td><code>--etcd-s3-skip-ssl-verify</code></td><td>N/A</td><td>Disables S3 SSL certificate validation</td></tr><tr><td><code>--etcd-s3-access-key</code> value</td><td><code>AWS_ACCESS_KEY_ID</code></td><td>S3 access key</td></tr><tr><td><code>--etcd-s3-secret-key</code> value</td><td><code>AWS_SECRET_ACCESS_KEY</code></td><td>S3 secret key</td></tr><tr><td><code>--etcd-s3-bucket</code> value</td><td>N/A</td><td>S3 bucket name</td></tr><tr><td><code>--etcd-s3-region</code> value</td><td>N/A</td><td>S3 region / bucket location (optional) (default: &quot;us-east-1&quot;)</td></tr><tr><td><code>--etcd-s3-folder</code> value</td><td>N/A</td><td>S3 folder</td></tr><tr><td><code>--etcd-s3-insecure</code></td><td>Disables S3 over HTTPS</td><td></td></tr><tr><td><code>--etcd-s3-timeout</code> value</td><td>S3 timeout (default: 30s)</td><td></td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cluster-options">Cluster Options<a class="hash-link" href="#cluster-options" title="Direct link to heading">​</a></h3><table><thead><tr><th>Flag</th><th>Environment Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>--token value, -t</code> value</td><td><code>K3S_TOKEN</code></td><td>Shared secret used to join a server or agent to a cluster</td></tr><tr><td><code>--token-file</code> value</td><td><code>K3S_TOKEN_FILE</code></td><td>File containing the cluster-secret/token</td></tr><tr><td><code>--agent-token</code> value</td><td><code>K3S_AGENT_TOKEN</code></td><td>Shared secret used to join agents to the cluster, but not servers</td></tr><tr><td><code>--agent-token-file</code> value</td><td><code>K3S_AGENT_TOKEN_FILE</code></td><td>File containing the agent secret</td></tr><tr><td><code>--server</code> value</td><td><code>K3S_URL</code></td><td>Server to connect to, used to join a cluster</td></tr><tr><td><code>--cluster-init</code></td><td><code>K3S_CLUSTER_INIT</code></td><td>Initialize a new cluster using embedded Etcd</td></tr><tr><td><code>--cluster-reset</code></td><td><code>K3S_CLUSTER_RESET</code></td><td>Forget all peers and become sole member of a new cluster</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-options">Client Options<a class="hash-link" href="#client-options" title="Direct link to heading">​</a></h3><table><thead><tr><th>Flag</th><th>Environment Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>--write-kubeconfig value, -o</code> value</td><td><code>K3S_KUBECONFIG_OUTPUT</code></td><td>Write kubeconfig for admin client to this file</td></tr><tr><td><code>--write-kubeconfig-mode</code> value</td><td><code>K3S_KUBECONFIG_MODE</code></td><td>Write kubeconfig with this <a href="https://en.wikipedia.org/wiki/Chmod" target="_blank" rel="noopener noreferrer">mode.</a> The option to allow writing to the kubeconfig file is useful for allowing a K3s cluster to be imported into Rancher. An example value is 644.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="agent-options">Agent Options<a class="hash-link" href="#agent-options" title="Direct link to heading">​</a></h2><p>K3s agent options are available as server options because the server has the agent process embedded within.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="agent-nodes">Agent Nodes<a class="hash-link" href="#agent-nodes" title="Direct link to heading">​</a></h3><table><thead><tr><th>Flag</th><th>Environment Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>--node-name</code> value</td><td><code>K3S_NODE_NAME</code></td><td>Node name</td></tr><tr><td><code>--with-node-id</code></td><td>N/A</td><td>Append id to node name</td></tr><tr><td><code>--node-label</code> value</td><td>N/A</td><td>Registering and starting kubelet with set of labels</td></tr><tr><td><code>--node-taint</code> value</td><td>N/A</td><td>Registering kubelet with set of taints</td></tr><tr><td><code>--image-credential-provider-bin-dir</code> value</td><td>N/A</td><td>The path to the directory where credential provider plugin binaries are located (default: &quot;/var/lib/rancher/credentialprovider/bin&quot;)</td></tr><tr><td><code>--image-credential-provider-config</code> value</td><td>N/A</td><td>The path to the credential provider plugin config file (default: &quot;/var/lib/rancher/credentialprovider/config.yaml&quot;)</td></tr><tr><td><code>--selinux</code></td><td><code>K3S_SELINUX</code></td><td>Enable SELinux in containerd</td></tr><tr><td><code>--lb-server-port</code> value</td><td><code>K3S_LB_SERVER_PORT</code></td><td>Local port for supervisor client load-balancer. If the supervisor and apiserver are not colocated an additional port 1 less than this port will also be used for the apiserver client load-balancer. (default: 6444)</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="agent-runtime">Agent Runtime<a class="hash-link" href="#agent-runtime" title="Direct link to heading">​</a></h3><table><thead><tr><th>Flag</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>--docker</code></td><td>N/A</td><td>Use docker instead of containerd</td></tr><tr><td><code>--container-runtime-endpoint</code> value</td><td>N/A</td><td>Disable embedded containerd and use alternative CRI implementation</td></tr><tr><td><code>--pause-image</code> value</td><td>&quot;docker.io/rancher/pause:3.1&quot;</td><td>Customized pause image for containerd or Docker sandbox</td></tr><tr><td><code>--snapshotter</code> value</td><td>N/A</td><td>Override default containerd snapshotter (default: &quot;overlayfs&quot;)</td></tr><tr><td><code>--private-registry</code> value</td><td>&quot;/etc/rancher/k3s/registries.yaml&quot;</td><td>Private registry configuration file</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="agent-networking">Agent Networking<a class="hash-link" href="#agent-networking" title="Direct link to heading">​</a></h3><p>the agent options are there because the server has the agent process embedded within</p><table><thead><tr><th>Flag</th><th>Environment Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>--node-ip value, -i</code> value</td><td>N/A</td><td>IP address to advertise for node</td></tr><tr><td><code>--node-external-ip</code> value</td><td>N/A</td><td>External IP address to advertise for node</td></tr><tr><td><code>--resolv-conf</code> value</td><td><code>K3S_RESOLV_CONF</code></td><td>Kubelet resolv.conf file</td></tr><tr><td><code>--flannel-iface</code> value</td><td>N/A</td><td>Override default flannel interface</td></tr><tr><td><code>--flannel-conf</code> value</td><td>N/A</td><td>Override default flannel config file</td></tr><tr><td><code>--flannel-cni-conf</code> value</td><td>N/A</td><td>Override default flannel cni config file</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-options">Advanced Options<a class="hash-link" href="#advanced-options" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="logging">Logging<a class="hash-link" href="#logging" title="Direct link to heading">​</a></h3><table><thead><tr><th>Flag</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>--debug</code></td><td>N/A</td><td>Turn on debug logs</td></tr><tr><td><code>-v</code> value</td><td>0</td><td>Number for the log level verbosity</td></tr><tr><td><code>--vmodule</code> value</td><td>N/A</td><td>Comma-separated list of pattern=N settings for file-filtered logging</td></tr><tr><td><code>--log value, -l</code> value</td><td>N/A</td><td>Log to file</td></tr><tr><td><code>--alsologtostderr</code></td><td>N/A</td><td>Log to standard error as well as file (if set)</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="listeners">Listeners<a class="hash-link" href="#listeners" title="Direct link to heading">​</a></h3><table><thead><tr><th>Flag</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>--bind-address</code> value</td><td>0.0.0.0</td><td>k3s bind address</td></tr><tr><td><code>--https-listen-port</code> value</td><td>6443</td><td>HTTPS listen port</td></tr><tr><td><code>--advertise-address</code> value</td><td>node-external-ip/node-ip</td><td>IPv4 address that apiserver uses to advertise to members of the cluster</td></tr><tr><td><code>--advertise-port</code> value</td><td>listen-port/0</td><td>Port that apiserver uses to advertise to members of the cluster</td></tr><tr><td><code>--tls-san</code> value</td><td>N/A</td><td>Add additional hostnames or IPv4/IPv6 addresses as Subject Alternative Names on the TLS cert</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="data">Data<a class="hash-link" href="#data" title="Direct link to heading">​</a></h3><table><thead><tr><th>Flag</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>--data-dir value, -d</code> value</td><td><code>/var/lib/rancher/k3s</code> or <code>${HOME}/.rancher/k3s</code> if not root</td><td>Folder to hold state</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="networking">Networking<a class="hash-link" href="#networking" title="Direct link to heading">​</a></h3><table><thead><tr><th>Flag</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>--cluster-cidr</code> value</td><td>&quot;10.42.0.0/16&quot;</td><td>IPv4/IPv6 network CIDRs to use for pod IPs</td></tr><tr><td><code>--service-cidr</code> value</td><td>&quot;10.43.0.0/16&quot;</td><td>IPv4/IPv6 network CIDRs to use for service IPs</td></tr><tr><td><code>--service-node-port-range</code> value</td><td>&quot;30000-32767&quot;</td><td>Port range to reserve for services with NodePort visibility</td></tr><tr><td><code>--cluster-dns</code> value</td><td>&quot;10.43.0.10&quot;</td><td>IPv4 Cluster IP for coredns service. Should be in your service-cidr range</td></tr><tr><td><code>--cluster-domain</code> value</td><td>&quot;cluster.local&quot;</td><td>Cluster Domain</td></tr><tr><td><code>--flannel-backend</code> value</td><td>&quot;vxlan&quot;</td><td>One of &#x27;none&#x27;, &#x27;vxlan&#x27;, &#x27;ipsec&#x27;, &#x27;host-gw&#x27;, &#x27;wireguard-native&#x27;, or &#x27;wireguard&#x27;(deprecated)</td></tr><tr><td><code>--flannel-ipv6-masq</code></td><td>&quot;N/A&quot;</td><td>Enable IPv6 masquerading for pod</td></tr><tr><td><code>--servicelb-namespace</code> value</td><td>&quot;kube-system&quot;</td><td>Namespace of the pods for the servicelb component</td></tr><tr><td><code>--egress-selector-mode</code> value</td><td>&quot;agent&quot;</td><td>Must be one of the following: <ul><li>disabled: The apiserver does not use agent tunnels to communicate with nodes. Requires that servers run agents, and have direct connectivity to the kubelet on agents, or the apiserver will not be able to function access service endpoints or perform kubectl exec and kubectl logs.</li><li>agent: The apiserver uses agent tunnels to communicate with nodes. Nodes allow the tunnel connection from loopback addresses. Requires that servers also run agents, or the apiserver will not be able to access service endpoints. The historical default for k3s.</li><li> pod: The apiserver uses agent tunnels to communicate with nodes and service endpoints, routing endpoint connections to the correct agent by watching Nodes. Nodes allow the tunnel connection from loopback addresses, or a CIDR assigned to their node.</li><li>  cluster: The apiserver uses agent tunnels to communicate with nodes and service endpoints, routing endpoint connections to the correct agent by watching Endpoints. Nodes allow the tunnel connection from loopback addresses, or the configured cluster CIDR range.</li></ul></td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-class">Storage Class<a class="hash-link" href="#storage-class" title="Direct link to heading">​</a></h3><table><thead><tr><th>Flag</th><th>Description</th></tr></thead><tbody><tr><td><code>--default-local-storage-path</code> value</td><td>Default local storage path for local provisioner storage class</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-components">Kubernetes Components<a class="hash-link" href="#kubernetes-components" title="Direct link to heading">​</a></h3><table><thead><tr><th>Flag</th><th>Description</th></tr></thead><tbody><tr><td><code>--disable</code> value</td><td>Do not deploy packaged components and delete any deployed components (valid items: coredns, servicelb, traefik,local-storage, metrics-server)</td></tr><tr><td><code>--disable-scheduler</code></td><td>Disable Kubernetes default scheduler</td></tr><tr><td><code>--disable-cloud-controller</code></td><td>Disable k3s default cloud controller manager</td></tr><tr><td><code>--disable-kube-proxy</code></td><td>Disable running kube-proxy</td></tr><tr><td><code>--disable-network-policy</code></td><td>Disable k3s default network policy controller</td></tr><tr><td><code>--disable-helm-controller</code></td><td>Disable Helm controller</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="customized-flags-for-kubernetes-processes">Customized Flags for Kubernetes Processes<a class="hash-link" href="#customized-flags-for-kubernetes-processes" title="Direct link to heading">​</a></h3><table><thead><tr><th>Flag</th><th>Description</th></tr></thead><tbody><tr><td><code>--etcd-arg</code> value</td><td>Customized flag for etcd process</td></tr><tr><td><code>--kube-apiserver-arg</code> value</td><td>Customized flag for kube-apiserver process</td></tr><tr><td><code>--kube-scheduler-arg</code> value</td><td>Customized flag for kube-scheduler process</td></tr><tr><td><code>--kube-controller-manager-arg</code> value</td><td>Customized flag for kube-controller-manager process</td></tr><tr><td><code>--kube-cloud-controller-manager-arg</code> value</td><td>Customized flag for kube-cloud-controller-manager process</td></tr><tr><td><code>--kubelet-arg</code> value</td><td>Customized flag for kubelet process</td></tr><tr><td><code>--kube-proxy-arg</code> value</td><td>Customized flag for kube-proxy process</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="experimental-options">Experimental Options<a class="hash-link" href="#experimental-options" title="Direct link to heading">​</a></h3><table><thead><tr><th>Flag</th><th>Description</th></tr></thead><tbody><tr><td><code>--rootless</code></td><td>Run rootless</td></tr><tr><td><code>--secrets-encryption</code></td><td>Enable Secret encryption at rest</td></tr><tr><td><code>--enable-pprof</code></td><td>Enable pprof endpoint on supervisor port</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deprecated-options">Deprecated Options<a class="hash-link" href="#deprecated-options" title="Direct link to heading">​</a></h3><table><thead><tr><th>Flag</th><th>Environment Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>--no-flannel</code></td><td>N/A</td><td>Use --flannel-backend=none</td></tr><tr><td><code>--no-deploy</code> value</td><td>N/A</td><td>Do not deploy packaged components (valid items: coredns, servicelb, traefik, local-storage, metrics-server)</td></tr><tr><td><code>--cluster-secret</code> value</td><td><code>K3S_CLUSTER_SECRET</code></td><td>Use --token</td></tr></tbody></table><h1>K3s Server CLI Help</h1><blockquote><p>If an option appears in brackets below, for example <code>[$K3S_TOKEN]</code>, it means that the option can be passed in as an environment variable of that name.</p></blockquote><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAME:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   k3s server - Run management server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">USAGE:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   k3s server </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">OPTIONS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">OPTIONS:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --config FILE, -c FILE                     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Load configuration from FILE </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/etc/rancher/k3s/config.yaml&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_CONFIG_FILE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --debug                                    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">logging</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Turn on debug logs </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_DEBUG</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   -v value                                   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">logging</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Number </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> the log level verbosity </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --vmodule value                            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">logging</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Comma-separated list of </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">pattern</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">N settings </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> file-filtered logging</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --log value, -l value                      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">logging</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Log to </span><span class="token function" style="color:rgb(130, 170, 255)">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --alsologtostderr                          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">logging</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Log to standard error as well as </span><span class="token function" style="color:rgb(130, 170, 255)">file</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">if </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">set</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --bind-address value                       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">listener</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> k3s </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">bind</span><span class="token plain"> address </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain">.0.0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --https-listen-port value                  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">listener</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> HTTPS listen port </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token number" style="color:rgb(247, 140, 108)">6443</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --advertise-address value                  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">listener</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> IPv4 address that apiserver uses to advertise to members of the cluster </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: node-external-ip/node-ip</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --advertise-port value                     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">listener</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Port that apiserver uses to advertise to members of the cluster </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: listen-port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --tls-san value                            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">listener</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Add additional hostnames or IPv4/IPv6 addresses as Subject Alternative Names on the server TLS cert</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --data-dir value, -d value                 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Folder to hold state </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: /var/lib/rancher/k3s or </span><span class="token variable" style="color:rgb(191, 199, 213)">${</span><span class="token variable environment constant" style="color:rgb(130, 170, 255)">HOME</span><span class="token variable" style="color:rgb(191, 199, 213)">}</span><span class="token plain">/.rancher/k3s </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> not root</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --cluster-cidr value                       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">networking</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> IPv4/IPv6 network CIDRs to use </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> pod IPs </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token number" style="color:rgb(247, 140, 108)">10.42</span><span class="token plain">.0.0/16</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --service-cidr value                       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">networking</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> IPv4/IPv6 network CIDRs to use </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">service</span><span class="token plain"> IPs </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token number" style="color:rgb(247, 140, 108)">10.43</span><span class="token plain">.0.0/16</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --service-node-port-range value            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">networking</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Port range to reserve </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> services with NodePort visibility </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;30000-32767&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --cluster-dns value                        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">networking</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> IPv4 Cluster IP </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> coredns service. Should be </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> your service-cidr range </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token number" style="color:rgb(247, 140, 108)">10.43</span><span class="token plain">.0.10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --cluster-domain value                     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">networking</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Cluster Domain </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;cluster.local&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --flannel-backend value                    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">networking</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> backend</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;=</span><span class="token plain">option1</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">val1,option2</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">val</span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">2</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> where backend is one of </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;none&#x27;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;vxlan&#x27;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;ipsec&#x27;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;host-gw&#x27;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;wireguard-native&#x27;</span><span class="token plain">, or </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;wireguard&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">deprecated</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;vxlan&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --flannel-ipv6-masq                        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">networking</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Enable IPv6 masquerading </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> pod</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --egress-selector-mode value               </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">networking</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> One of </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;agent&#x27;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cluster&#x27;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;pod&#x27;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;disabled&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;agent&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --servicelb-namespace value                </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">networking</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Namespace of the pods </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> the servicelb component </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;kube-system&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --token value, -t value                    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">cluster</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Shared secret used to </span><span class="token function" style="color:rgb(130, 170, 255)">join</span><span class="token plain"> a server or agent to a cluster </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_TOKEN</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --token-file value                         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">cluster</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> File containing the cluster-secret/token </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_TOKEN_FILE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --write-kubeconfig value, -o value         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Write kubeconfig </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> admin client to this </span><span class="token function" style="color:rgb(130, 170, 255)">file</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_KUBECONFIG_OUTPUT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --write-kubeconfig-mode value              </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Write kubeconfig with this mode </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_KUBECONFIG_MODE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --enable-pprof                             </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">experimental</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Enable pprof endpoint on supervisor port</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --kube-apiserver-arg value                 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">flags</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Customized flag </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> kube-apiserver process</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --etcd-arg value                           </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">flags</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Customized flag </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> etcd process</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --kube-controller-manager-arg value        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">flags</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Customized flag </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> kube-controller-manager process</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --kube-scheduler-arg value                 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">flags</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Customized flag </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> kube-scheduler process</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --kube-cloud-controller-manager-arg value  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">flags</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Customized flag </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> kube-cloud-controller-manager process</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --datastore-endpoint value                 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Specify etcd, Mysql, Postgres, or Sqlite </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> data </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">source</span><span class="token plain"> name </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_DATASTORE_ENDPOINT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --datastore-cafile value                   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> TLS Certificate Authority </span><span class="token function" style="color:rgb(130, 170, 255)">file</span><span class="token plain"> used to secure datastore backend communication </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_DATASTORE_CAFILE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --datastore-certfile value                 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> TLS certification </span><span class="token function" style="color:rgb(130, 170, 255)">file</span><span class="token plain"> used to secure datastore backend communication </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_DATASTORE_CERTFILE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --datastore-keyfile value                  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> TLS key </span><span class="token function" style="color:rgb(130, 170, 255)">file</span><span class="token plain"> used to secure datastore backend communication </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_DATASTORE_KEYFILE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --etcd-expose-metrics                      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Expose etcd metrics to client interface. </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --etcd-disable-snapshots                   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Disable automatic etcd snapshots</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --etcd-snapshot-name value                 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Set the base name of etcd snapshots. Default: etcd-snapshot-</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">unix-timestamp</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;etcd-snapshot&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --etcd-snapshot-schedule-cron value        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Snapshot interval </span><span class="token function" style="color:rgb(130, 170, 255)">time</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">cron</span><span class="token plain"> spec. eg. every </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"> hours </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;* */5 * * *&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0 */12 * * *&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --etcd-snapshot-retention value            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Number of snapshots to retain </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --etcd-snapshot-dir value                  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Directory to save db snapshots. </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Default location: </span><span class="token variable" style="color:rgb(191, 199, 213)">${data-dir}</span><span class="token plain">/db/snapshots</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --etcd-snapshot-compress                   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Compress etcd snapshot</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --etcd-s3                                  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Enable backup to S3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --etcd-s3-endpoint value                   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> S3 endpoint url </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;s3.amazonaws.com&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --etcd-s3-endpoint-ca value                </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> S3 custom CA cert to connect to S3 endpoint</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --etcd-s3-skip-ssl-verify                  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Disables S3 SSL certificate validation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --etcd-s3-access-key value                 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> S3 access key </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$AWS_ACCESS_KEY_ID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --etcd-s3-secret-key value                 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> S3 secret key </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$AWS_SECRET_ACCESS_KEY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --etcd-s3-bucket value                     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> S3 bucket name</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --etcd-s3-region value                     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> S3 region / bucket location </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">optional</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;us-east-1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --etcd-s3-folder value                     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> S3 folder</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --etcd-s3-insecure                         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Disables S3 over HTTPS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --etcd-s3-timeout value                    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> S3 </span><span class="token function" style="color:rgb(130, 170, 255)">timeout</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: 30s</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --default-local-storage-path value         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">storage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Default </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">local</span><span class="token plain"> storage path </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">local</span><span class="token plain"> provisioner storage class</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --disable value                            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">components</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Do not deploy packaged components and delete any deployed components </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">valid items: coredns, servicelb, traefik, local-storage, metrics-server</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --disable-scheduler                        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">components</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Disable Kubernetes default scheduler</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --disable-cloud-controller                 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">components</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Disable k3s default cloud controller manager</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --disable-kube-proxy                       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">components</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Disable running kube-proxy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --disable-network-policy                   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">components</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Disable k3s default network policy controller</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --disable-helm-controller                  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">components</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Disable Helm controller</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --node-name value                          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/node</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Node name </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_NODE_NAME</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --with-node-id                             </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/node</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Append </span><span class="token function" style="color:rgb(130, 170, 255)">id</span><span class="token plain"> to </span><span class="token function" style="color:rgb(130, 170, 255)">node</span><span class="token plain"> name</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --node-label value                         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/node</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Registering and starting kubelet with </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">set</span><span class="token plain"> of labels</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --node-taint value                         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/node</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Registering kubelet with </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">set</span><span class="token plain"> of taints</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --image-credential-provider-bin-dir value  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/node</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> The path to the directory where credential provider plugin binaries are located </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/var/lib/rancher/credentialprovider/bin&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --image-credential-provider-config value   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/node</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> The path to the credential provider plugin config </span><span class="token function" style="color:rgb(130, 170, 255)">file</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/var/lib/rancher/credentialprovider/config.yaml&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --docker                                   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/runtime</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Use </span><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> instead of containerd</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --container-runtime-endpoint value         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/runtime</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Disable embedded containerd and use alternative CRI implementation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --pause-image value                        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/runtime</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Customized pause image </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> containerd or </span><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> sandbox </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;rancher/mirrored-pause:3.6&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --snapshotter value                        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/runtime</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Override default containerd snapshotter </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;overlayfs&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --private-registry value                   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/runtime</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Private registry configuration </span><span class="token function" style="color:rgb(130, 170, 255)">file</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/etc/rancher/k3s/registries.yaml&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --node-ip value, -i value                  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/networking</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> IPv4/IPv6 addresses to advertise </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --node-external-ip value                   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/networking</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> IPv4/IPv6 external IP addresses to advertise </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --resolv-conf value                        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/networking</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Kubelet resolv.conf </span><span class="token function" style="color:rgb(130, 170, 255)">file</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_RESOLV_CONF</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --flannel-iface value                      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/networking</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Override default flannel interface</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --flannel-conf value                       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/networking</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Override default flannel config </span><span class="token function" style="color:rgb(130, 170, 255)">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --flannel-cni-conf value                   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/networking</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Override default flannel cni config </span><span class="token function" style="color:rgb(130, 170, 255)">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --kubelet-arg value                        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/flags</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Customized flag </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> kubelet process</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --kube-proxy-arg value                     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/flags</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Customized flag </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> kube-proxy process</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --protect-kernel-defaults                  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/node</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Kernel tuning behavior. If set, error </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> kernel tunables are different than kubelet defaults.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --rootless                                 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">experimental</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Run rootless</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --agent-token value                        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">cluster</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Shared secret used to </span><span class="token function" style="color:rgb(130, 170, 255)">join</span><span class="token plain"> agents to the cluster, but not servers </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_AGENT_TOKEN</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --agent-token-file value                   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">cluster</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> File containing the agent secret </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_AGENT_TOKEN_FILE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --server value, -s value                   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">cluster</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Server to connect to, used to </span><span class="token function" style="color:rgb(130, 170, 255)">join</span><span class="token plain"> a cluster </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_URL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --cluster-init                             </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">cluster</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Initialize a new cluster using embedded Etcd </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_CLUSTER_INIT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --cluster-reset                            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">cluster</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Forget all peers and become sole member of a new cluster </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_CLUSTER_RESET</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --cluster-reset-restore-path value         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Path to snapshot </span><span class="token function" style="color:rgb(130, 170, 255)">file</span><span class="token plain"> to be restored</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --secrets-encryption                       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">experimental</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Enable Secret encryption at rest</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --system-default-registry value            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Private registry to be used </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> all system images </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_SYSTEM_DEFAULT_REGISTRY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --selinux                                  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/node</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Enable SELinux </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> containerd </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_SELINUX</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --lb-server-port value                     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">agent/node</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Local port </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> supervisor client load-balancer. If the supervisor and apiserver are not colocated an additional port </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">less</span><span class="token plain"> than this port will also be used </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> the apiserver client load-balancer. </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">default: </span><span class="token number" style="color:rgb(247, 140, 108)">6444</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_LB_SERVER_PORT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --no-flannel                               </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">deprecated</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> use --flannel-backend</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">none</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --no-deploy value                          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">deprecated</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Do not deploy packaged components </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">valid items: coredns, servicelb, traefik, local-storage, metrics-server</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   --cluster-secret value                     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">deprecated</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> use --token </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token variable" style="color:rgb(191, 199, 213)">$K3S_CLUSTER_SECRET</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/k3s-io/docs/edit/main/docs/reference/server-config.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-09-07T22:03:04.000Z">Sep 7, 2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/faq"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">FAQ</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/reference/agent-config"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">K3s Agent Configuration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#commonly-used-options" class="table-of-contents__link toc-highlight">Commonly Used Options</a><ul><li><a href="#database" class="table-of-contents__link toc-highlight">Database</a></li><li><a href="#cluster-options" class="table-of-contents__link toc-highlight">Cluster Options</a></li><li><a href="#client-options" class="table-of-contents__link toc-highlight">Client Options</a></li></ul></li><li><a href="#agent-options" class="table-of-contents__link toc-highlight">Agent Options</a><ul><li><a href="#agent-nodes" class="table-of-contents__link toc-highlight">Agent Nodes</a></li><li><a href="#agent-runtime" class="table-of-contents__link toc-highlight">Agent Runtime</a></li><li><a href="#agent-networking" class="table-of-contents__link toc-highlight">Agent Networking</a></li></ul></li><li><a href="#advanced-options" class="table-of-contents__link toc-highlight">Advanced Options</a><ul><li><a href="#logging" class="table-of-contents__link toc-highlight">Logging</a></li><li><a href="#listeners" class="table-of-contents__link toc-highlight">Listeners</a></li><li><a href="#data" class="table-of-contents__link toc-highlight">Data</a></li><li><a href="#networking" class="table-of-contents__link toc-highlight">Networking</a></li><li><a href="#storage-class" class="table-of-contents__link toc-highlight">Storage Class</a></li><li><a href="#kubernetes-components" class="table-of-contents__link toc-highlight">Kubernetes Components</a></li><li><a href="#customized-flags-for-kubernetes-processes" class="table-of-contents__link toc-highlight">Customized Flags for Kubernetes Processes</a></li><li><a href="#experimental-options" class="table-of-contents__link toc-highlight">Experimental Options</a></li><li><a href="#deprecated-options" class="table-of-contents__link toc-highlight">Deprecated Options</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 K3s Project Authors. All rights reserved. <br>The Linux Foundation has registered trademarks
      and uses trademarks. For a list of trademarks of The Linux Foundation, 
      please see our <a href="https://www.linuxfoundation.org/trademark-usage"> Trademark Usage</a> page.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5ceaa649.js"></script>
<script src="/assets/js/main.4d27e624.js"></script>
</body>
</html>