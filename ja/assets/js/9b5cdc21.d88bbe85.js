"use strict";(self.webpackChunkk_3_s_docs=self.webpackChunkk_3_s_docs||[]).push([[6418],{5404:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>t,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"security/self-assessment-1.24","title":"CIS 1.24 \u81ea\u5df1\u8a55\u4fa1\u30ac\u30a4\u30c9","description":"\u6982\u8981","source":"@site/i18n/ja/docusaurus-plugin-content-docs/current/security/self-assessment-1.24.md","sourceDirName":"security","slug":"/security/self-assessment-1.24","permalink":"/ja/security/self-assessment-1.24","draft":false,"unlisted":false,"editUrl":"https://github.com/k3s-io/docs/edit/main/docs/security/self-assessment-1.24.md","tags":[],"version":"current","lastUpdatedAt":1753903985000,"frontMatter":{"title":"CIS 1.24 \u81ea\u5df1\u8a55\u4fa1\u30ac\u30a4\u30c9"}}');var i=s(4848),l=s(8453);const t={title:"CIS 1.24 \u81ea\u5df1\u8a55\u4fa1\u30ac\u30a4\u30c9"},c=void 0,a={},o=[{value:"\u6982\u8981",id:"\u6982\u8981",level:2},{value:"\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30c6\u30b9\u30c8\u306e\u65b9\u6cd5\u8ad6",id:"\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30c6\u30b9\u30c8\u306e\u65b9\u6cd5\u8ad6",level:3},{value:"1.1 \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb",id:"11-\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb",level:2},{value:"1.1.1 API\u30b5\u30fc\u30d0\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c644\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"111-api\u30b5\u30fc\u30d0\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c644\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.1.2 API\u30b5\u30fc\u30d0\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"112-api\u30b5\u30fc\u30d0\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.1.3 \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"113-\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.1.4 \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"114-\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.1.5 \u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"115-\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.1.6 \u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"116-\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.1.7 etcd\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"117-etcd\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.1.8 etcd\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"118-etcd\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.1.9 \u30b3\u30f3\u30c6\u30ca\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"119-\u30b3\u30f3\u30c6\u30ca\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.1.10 \u30b3\u30f3\u30c6\u30ca\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1110-\u30b3\u30f3\u30c6\u30ca\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.1.11 etcd\u30c7\u30fc\u30bf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6a29\u9650\u304c700\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1111-etcd\u30c7\u30fc\u30bf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6a29\u9650\u304c700\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.1.12 etcd\u30c7\u30fc\u30bf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6240\u6709\u8005\u304cetcd\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1112-etcd\u30c7\u30fc\u30bf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6240\u6709\u8005\u304cetcd\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.1.13 admin.conf\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1113-adminconf\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.1.14 admin.conf\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1114-adminconf\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.1.15 scheduler.conf\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1115-schedulerconf\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.1.16 scheduler.conf\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1116-schedulerconf\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.1.17 controller-manager.conf\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1117-controller-managerconf\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.1.18 controller-manager.conf\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1118-controller-managerconf\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.1.19 Kubernetes PKI\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304a\u3088\u3073\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1119-kubernetes-pki\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304a\u3088\u3073\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.1.20 Kubernetes PKI\u8a3c\u660e\u66f8\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1120-kubernetes-pki\u8a3c\u660e\u66f8\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.1.21 Kubernetes PKI\u30ad\u30fc\u306e\u6a29\u9650\u304c600\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1121-kubernetes-pki\u30ad\u30fc\u306e\u6a29\u9650\u304c600\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2 API\u30b5\u30fc\u30d0\u30fc",id:"12-api\u30b5\u30fc\u30d0\u30fc",level:2},{value:"1.2.1 --anonymous-auth\u5f15\u6570\u304cfalse\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"121---anonymous-auth\u5f15\u6570\u304cfalse\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.2 --token-auth-file\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"122---token-auth-file\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.3 --DenyServiceExternalIPs\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"123---denyserviceexternalips\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.4 --kubelet-https\u5f15\u6570\u304ctrue\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"124---kubelet-https\u5f15\u6570\u304ctrue\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.5 --kubelet-client-certificate\u3068--kubelet-client-key\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"125---kubelet-client-certificate\u3068--kubelet-client-key\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.6 --kubelet-certificate-authority \u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"126---kubelet-certificate-authority-\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.7 --authorization-mode\u5f15\u6570\u304cAlwaysAllow\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"127---authorization-mode\u5f15\u6570\u304calwaysallow\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.8 --authorization-mode\u5f15\u6570\u306bNode\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"128---authorization-mode\u5f15\u6570\u306bnode\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.9 --authorization-mode\u5f15\u6570\u306bRBAC\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"129---authorization-mode\u5f15\u6570\u306brbac\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.10 \u30a4\u30d9\u30f3\u30c8\u30ec\u30fc\u30c8\u5236\u9650\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"1210-\u30a4\u30d9\u30f3\u30c8\u30ec\u30fc\u30c8\u5236\u9650\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"1.2.11 AlwaysAdmit\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"1211-alwaysadmit\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"1.2.12 AlwaysPullImages\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"1212-alwayspullimages\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"1.2.13 PodSecurityPolicy\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u3001SecurityContextDeny\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"1213-podsecuritypolicy\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408securitycontextdeny\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"1.2.15 NamespaceLifecycle\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1215-namespacelifecycle\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.16 NodeRestriction\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1216-noderestriction\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.17 --secure-port \u5f15\u6570\u304c 0 \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1217---secure-port-\u5f15\u6570\u304c-0-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.18 --profiling\u5f15\u6570\u304cfalse\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1218---profiling\u5f15\u6570\u304cfalse\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.19 --audit-log-path\u5f15\u6570\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1219---audit-log-path\u5f15\u6570\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.20 --audit-log-maxage\u5f15\u6570\u304c30\u307e\u305f\u306f\u9069\u5207\u306a\u5024\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1220---audit-log-maxage\u5f15\u6570\u304c30\u307e\u305f\u306f\u9069\u5207\u306a\u5024\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.21 --audit-log-maxbackup\u5f15\u6570\u304c10\u307e\u305f\u306f\u9069\u5207\u306a\u5024\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1221---audit-log-maxbackup\u5f15\u6570\u304c10\u307e\u305f\u306f\u9069\u5207\u306a\u5024\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.22 --audit-log-maxsize\u5f15\u6570\u304c100\u307e\u305f\u306f\u9069\u5207\u306a\u5024\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1222---audit-log-maxsize\u5f15\u6570\u304c100\u307e\u305f\u306f\u9069\u5207\u306a\u5024\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.23 --request-timeout\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1223---request-timeout\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.24 --service-account-lookup\u5f15\u6570\u304ctrue\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1224---service-account-lookup\u5f15\u6570\u304ctrue\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.25 --service-account-key-file\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1225---service-account-key-file\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.26 --etcd-certfile\u304a\u3088\u3073--etcd-keyfile\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1226---etcd-certfile\u304a\u3088\u3073--etcd-keyfile\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.27 --tls-cert-file\u304a\u3088\u3073--tls-private-key-file\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1227---tls-cert-file\u304a\u3088\u3073--tls-private-key-file\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.28 --client-ca-file\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09",id:"1228---client-ca-file\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",level:3},{value:"1.2.29 --etcd-cafile \u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"1229---etcd-cafile-\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"1.2.30 --encryption-provider-config \u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"1230---encryption-provider-config-\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"1.2.31 \u6697\u53f7\u5316\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u304c\u9069\u5207\u306b\u69cb\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"1231-\u6697\u53f7\u5316\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u304c\u9069\u5207\u306b\u69cb\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"1.2.32 API\u30b5\u30fc\u30d0\u30fc\u304c\u5f37\u529b\u306a\u6697\u53f7\u5316\u30b9\u30a4\u30fc\u30c8\u306e\u307f\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"1232-api\u30b5\u30fc\u30d0\u30fc\u304c\u5f37\u529b\u306a\u6697\u53f7\u5316\u30b9\u30a4\u30fc\u30c8\u306e\u307f\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"1.3 \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30de\u30cd\u30fc\u30b8\u30e3\u30fc",id:"13-\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30de\u30cd\u30fc\u30b8\u30e3\u30fc",level:2},{value:"1.3.1 --terminated-pod-gc-threshold \u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"131---terminated-pod-gc-threshold-\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"1.3.2 --profiling \u5f15\u6570\u304c false \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"132---profiling-\u5f15\u6570\u304c-false-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"1.3.3 --use-service-account-credentials \u5f15\u6570\u304c true \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"133---use-service-account-credentials-\u5f15\u6570\u304c-true-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"1.3.4 --service-account-private-key-file \u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"134---service-account-private-key-file-\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"1.3.5 --root-ca-file \u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"135---root-ca-file-\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"1.3.6 RotateKubeletServerCertificate \u5f15\u6570\u304c true \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"136-rotatekubeletservercertificate-\u5f15\u6570\u304c-true-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"1.3.7 --bind-address \u5f15\u6570\u304c 127.0.0.1 \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"137---bind-address-\u5f15\u6570\u304c-127001-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"1.4 \u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u30fc",id:"14-\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u30fc",level:2},{value:"1.4.1 --profiling \u5f15\u6570\u304c false \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"141---profiling-\u5f15\u6570\u304c-false-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"1.4.2 --bind-address \u5f15\u6570\u304c 127.0.0.1 \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"142---bind-address-\u5f15\u6570\u304c-127001-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"2 Etcd \u30ce\u30fc\u30c9\u69cb\u6210",id:"2-etcd-\u30ce\u30fc\u30c9\u69cb\u6210",level:2},{value:"2.1 --cert-file \u304a\u3088\u3073 --key-file \u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"21---cert-file-\u304a\u3088\u3073---key-file-\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"2.2 --client-cert-auth \u5f15\u6570\u304c true \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"22---client-cert-auth-\u5f15\u6570\u304c-true-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"2.3 --auto-tls \u5f15\u6570\u304c true \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"23---auto-tls-\u5f15\u6570\u304c-true-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"2.4 --peer-cert-file \u304a\u3088\u3073 --peer-key-file \u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"24---peer-cert-file-\u304a\u3088\u3073---peer-key-file-\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"2.5 --peer-client-cert-auth \u5f15\u6570\u304c true \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"25---peer-client-cert-auth-\u5f15\u6570\u304c-true-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"2.6 --peer-auto-tls \u5f15\u6570\u304c true \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"26---peer-auto-tls-\u5f15\u6570\u304c-true-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"2.7 Etcd \u306b\u5bfe\u3057\u3066\u4e00\u610f\u306e\u8a3c\u660e\u66f8\u8a8d\u8a3c\u5c40\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"27-etcd-\u306b\u5bfe\u3057\u3066\u4e00\u610f\u306e\u8a3c\u660e\u66f8\u8a8d\u8a3c\u5c40\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"4.1 \u30ef\u30fc\u30ab\u30fc\u30ce\u30fc\u30c9\u69cb\u6210\u30d5\u30a1\u30a4\u30eb",id:"41-\u30ef\u30fc\u30ab\u30fc\u30ce\u30fc\u30c9\u69cb\u6210\u30d5\u30a1\u30a4\u30eb",level:2},{value:"4.1.1 kubelet \u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c 600 \u307e\u305f\u306f\u305d\u308c\u4ee5\u4e0a\u306b\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"411-kubelet-\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c-600-\u307e\u305f\u306f\u305d\u308c\u4ee5\u4e0a\u306b\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"4.1.2 kubelet \u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304c root \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"412-kubelet-\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304c-root-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"4.1.3 \u30d7\u30ed\u30ad\u30b7 kubeconfig \u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u3001\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c 600 \u307e\u305f\u306f\u305d\u308c\u3088\u308a\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)",id:"413-\u30d7\u30ed\u30ad\u30b7-kubeconfig-\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c-600-\u307e\u305f\u306f\u305d\u308c\u3088\u308a\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",level:3},{value:"4.1.4 \u30d7\u30ed\u30ad\u30b7 kubeconfig \u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u3001\u6240\u6709\u8005\u304c root \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)",id:"414-\u30d7\u30ed\u30ad\u30b7-kubeconfig-\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u6240\u6709\u8005\u304c-root-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",level:3},{value:"4.1.5 --kubeconfig kubelet.conf \u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c 600 \u307e\u305f\u306f\u305d\u308c\u3088\u308a\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5)",id:"415---kubeconfig-kubeletconf-\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c-600-\u307e\u305f\u306f\u305d\u308c\u3088\u308a\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5",level:3},{value:"4.1.6 --kubeconfig kubelet.conf \u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304c root \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5)",id:"416---kubeconfig-kubeletconf-\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304c-root-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5",level:3},{value:"4.1.7 \u8a3c\u660e\u66f8\u8a8d\u8a3c\u5c40\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c 600 \u307e\u305f\u306f\u305d\u308c\u3088\u308a\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)",id:"417-\u8a3c\u660e\u66f8\u8a8d\u8a3c\u5c40\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c-600-\u307e\u305f\u306f\u305d\u308c\u3088\u308a\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",level:3},{value:"4.1.8 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u8a8d\u8a3c\u5c40\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304c root \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)",id:"418-\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u8a8d\u8a3c\u5c40\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304c-root-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",level:3},{value:"4.1.9 kubelet config.yaml \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c 600 \u307e\u305f\u306f\u305d\u308c\u3088\u308a\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)",id:"419-kubelet-configyaml-\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c-600-\u307e\u305f\u306f\u305d\u308c\u3088\u308a\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",level:3},{value:"4.1.10 kubelet config.yaml \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304c root \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)",id:"4110-kubelet-configyaml-\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304c-root-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",level:3},{value:"4.2 Kubelet",id:"42-kubelet",level:2},{value:"4.2.1 --anonymous-auth \u5f15\u6570\u304c false \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5)",id:"421---anonymous-auth-\u5f15\u6570\u304c-false-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5",level:3},{value:"4.2.2 --authorization-mode \u5f15\u6570\u304c AlwaysAllow \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5)",id:"422---authorization-mode-\u5f15\u6570\u304c-alwaysallow-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5",level:3},{value:"4.2.3 --client-ca-file \u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5)",id:"423---client-ca-file-\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5",level:3},{value:"4.2.4 --read-only-port \u5f15\u6570\u304c 0 \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)",id:"424---read-only-port-\u5f15\u6570\u304c-0-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",level:3},{value:"4.2.5 --streaming-connection-idle-timeout \u5f15\u6570\u304c 0 \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)",id:"425---streaming-connection-idle-timeout-\u5f15\u6570\u304c-0-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",level:3},{value:"4.2.6 --protect-kernel-defaults \u5f15\u6570\u304c true \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"426---protect-kernel-defaults-\u5f15\u6570\u304c-true-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"4.2.7 --make-iptables-util-chains \u5f15\u6570\u304c true \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)",id:"427---make-iptables-util-chains-\u5f15\u6570\u304c-true-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",level:3},{value:"4.2.8 --hostname-override \u5f15\u6570\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)",id:"428---hostname-override-\u5f15\u6570\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",level:3},{value:"4.2.9 eventRecordQPS \u5f15\u6570\u304c\u9069\u5207\u306a\u30a4\u30d9\u30f3\u30c8\u30ad\u30e3\u30d7\u30c1\u30e3\u3092\u78ba\u4fdd\u3059\u308b\u30ec\u30d9\u30eb\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)",id:"429-eventrecordqps-\u5f15\u6570\u304c\u9069\u5207\u306a\u30a4\u30d9\u30f3\u30c8\u30ad\u30e3\u30d7\u30c1\u30e3\u3092\u78ba\u4fdd\u3059\u308b\u30ec\u30d9\u30eb\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",level:3},{value:"4.2.10 --tls-cert-file \u304a\u3088\u3073 --tls-private-key-file \u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)",id:"4210---tls-cert-file-\u304a\u3088\u3073---tls-private-key-file-\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",level:3},{value:"4.2.12 RotateKubeletServerCertificate \u5f15\u6570\u304c true \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)",id:"4212-rotatekubeletservercertificate-\u5f15\u6570\u304c-true-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",level:3},{value:"4.2.13 Kubelet \u304c\u5f37\u529b\u306a\u6697\u53f7\u5316\u30b9\u30a4\u30fc\u30c8\u306e\u307f\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)",id:"4213-kubelet-\u304c\u5f37\u529b\u306a\u6697\u53f7\u5316\u30b9\u30a4\u30fc\u30c8\u306e\u307f\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",level:3},{value:"5.1 RBAC \u3068\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8",id:"51-rbac-\u3068\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8",level:2},{value:"5.1.1 cluster-admin \u30ed\u30fc\u30eb\u304c\u5fc5\u8981\u306a\u5834\u5408\u306b\u306e\u307f\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)",id:"511-cluster-admin-\u30ed\u30fc\u30eb\u304c\u5fc5\u8981\u306a\u5834\u5408\u306b\u306e\u307f\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",level:3},{value:"5.1.2 \u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u624b\u52d5)",id:"512-\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u624b\u52d5",level:3},{value:"5.1.3 \u30ed\u30fc\u30eb\u304a\u3088\u3073\u30af\u30e9\u30b9\u30bf\u30fc\u30ed\u30fc\u30eb\u3067\u306e\u30ef\u30a4\u30eb\u30c9\u30ab\u30fc\u30c9\u306e\u4f7f\u7528\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u624b\u52d5)",id:"513-\u30ed\u30fc\u30eb\u304a\u3088\u3073\u30af\u30e9\u30b9\u30bf\u30fc\u30ed\u30fc\u30eb\u3067\u306e\u30ef\u30a4\u30eb\u30c9\u30ab\u30fc\u30c9\u306e\u4f7f\u7528\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u624b\u52d5",level:3},{value:"5.1.4 \u30dd\u30c3\u30c9\u306e\u4f5c\u6210\u30a2\u30af\u30bb\u30b9\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u624b\u52d5)",id:"514-\u30dd\u30c3\u30c9\u306e\u4f5c\u6210\u30a2\u30af\u30bb\u30b9\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u624b\u52d5",level:3},{value:"5.1.5 \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u7a4d\u6975\u7684\u306b\u4f7f\u7528\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)",id:"515-\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u7a4d\u6975\u7684\u306b\u4f7f\u7528\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",level:3},{value:"5.1.6 \u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u30c8\u30fc\u30af\u30f3\u304c\u5fc5\u8981\u306a\u5834\u5408\u306b\u306e\u307f\u30de\u30a6\u30f3\u30c8\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)",id:"516-\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u30c8\u30fc\u30af\u30f3\u304c\u5fc5\u8981\u306a\u5834\u5408\u306b\u306e\u307f\u30de\u30a6\u30f3\u30c8\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",level:3},{value:"5.1.7 system \u30b0\u30eb\u30fc\u30d7\u306e\u4f7f\u7528\u3092\u907f\u3051\u308b (\u624b\u52d5)",id:"517-system-\u30b0\u30eb\u30fc\u30d7\u306e\u4f7f\u7528\u3092\u907f\u3051\u308b-\u624b\u52d5",level:3},{value:"5.1.8 Kubernetes \u30af\u30e9\u30b9\u30bf\u30fc\u3067\u306e Bind\u3001Impersonate\u3001\u304a\u3088\u3073 Escalate \u6a29\u9650\u306e\u4f7f\u7528\u3092\u5236\u9650\u3059\u308b (\u624b\u52d5)",id:"518-kubernetes-\u30af\u30e9\u30b9\u30bf\u30fc\u3067\u306e-bindimpersonate\u304a\u3088\u3073-escalate-\u6a29\u9650\u306e\u4f7f\u7528\u3092\u5236\u9650\u3059\u308b-\u624b\u52d5",level:3},{value:"5.2 \u30dd\u30c3\u30c9\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u57fa\u6e96",id:"52-\u30dd\u30c3\u30c9\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u57fa\u6e96",level:2},{value:"5.2.1 \u30af\u30e9\u30b9\u30bf\u30fc\u306b\u5c11\u306a\u304f\u3068\u30821\u3064\u306e\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30dd\u30ea\u30b7\u30fc\u5236\u5fa1\u30e1\u30ab\u30cb\u30ba\u30e0\u304c\u5b58\u5728\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)",id:"521-\u30af\u30e9\u30b9\u30bf\u30fc\u306b\u5c11\u306a\u304f\u3068\u30821\u3064\u306e\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30dd\u30ea\u30b7\u30fc\u5236\u5fa1\u30e1\u30ab\u30cb\u30ba\u30e0\u304c\u5b58\u5728\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",level:3},{value:"5.2.2 \u7279\u6a29\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u624b\u52d5)",id:"522-\u7279\u6a29\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u624b\u52d5",level:3},{value:"5.2.3 \u30db\u30b9\u30c8\u30d7\u30ed\u30bb\u30b9ID\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u3092\u5171\u6709\u3057\u3088\u3046\u3068\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u81ea\u52d5\u5316)",id:"523-\u30db\u30b9\u30c8\u30d7\u30ed\u30bb\u30b9id\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u3092\u5171\u6709\u3057\u3088\u3046\u3068\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u81ea\u52d5\u5316",level:3},{value:"5.2.4 \u30db\u30b9\u30c8IPC\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u3092\u5171\u6709\u3057\u3088\u3046\u3068\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u81ea\u52d5\u5316)",id:"524-\u30db\u30b9\u30c8ipc\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u3092\u5171\u6709\u3057\u3088\u3046\u3068\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u81ea\u52d5\u5316",level:3},{value:"5.2.5 \u30db\u30b9\u30c8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u3092\u5171\u6709\u3057\u3088\u3046\u3068\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u81ea\u52d5\u5316)",id:"525-\u30db\u30b9\u30c8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u3092\u5171\u6709\u3057\u3088\u3046\u3068\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u81ea\u52d5\u5316",level:3},{value:"5.2.6 allowPrivilegeEscalation \u3092\u6301\u3064\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u81ea\u52d5\u5316)",id:"526-allowprivilegeescalation-\u3092\u6301\u3064\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u81ea\u52d5\u5316",level:3},{value:"5.2.7 \u30eb\u30fc\u30c8\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u81ea\u52d5\u5316)",id:"527-\u30eb\u30fc\u30c8\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u81ea\u52d5\u5316",level:3},{value:"5.2.8 NET_RAW \u6a29\u9650\u3092\u6301\u3064\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u81ea\u52d5\u5316)",id:"528-net_raw-\u6a29\u9650\u3092\u6301\u3064\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u81ea\u52d5\u5316",level:3},{value:"5.2.9 \u8ffd\u52a0\u306e\u6a29\u9650\u3092\u6301\u3064\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u81ea\u52d5\u5316)",id:"529-\u8ffd\u52a0\u306e\u6a29\u9650\u3092\u6301\u3064\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u81ea\u52d5\u5316",level:3},{value:"5.2.10 \u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u6a29\u9650\u3092\u6301\u3064\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u624b\u52d5)",id:"5210-\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u6a29\u9650\u3092\u6301\u3064\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u624b\u52d5",level:3},{value:"5.2.11 Windows HostProcess \u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u624b\u52d5)",id:"5211-windows-hostprocess-\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u624b\u52d5",level:3},{value:"5.2.12 HostPath \u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f7f\u7528\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u624b\u52d5)",id:"5212-hostpath-\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f7f\u7528\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u624b\u52d5",level:3},{value:"5.2.13 HostPorts \u3092\u4f7f\u7528\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u624b\u52d5)",id:"5213-hostports-\u3092\u4f7f\u7528\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u624b\u52d5",level:3},{value:"5.3 \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u3068 CNI",id:"53-\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u3068-cni",level:2},{value:"5.3.1 \u4f7f\u7528\u4e2d\u306e CNI \u304c\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)",id:"531-\u4f7f\u7528\u4e2d\u306e-cni-\u304c\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",level:3},{value:"5.3.2 \u3059\u3079\u3066\u306e\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)",id:"532-\u3059\u3079\u3066\u306e\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",level:3},{value:"5.4 \u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u7ba1\u7406",id:"54-\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u7ba1\u7406",level:2},{value:"5.4.1 \u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u306e\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3088\u308a\u3082\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u306e\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u63a8\u5968\u3059\u308b (\u624b\u52d5)",id:"541-\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u306e\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3088\u308a\u3082\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u306e\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u63a8\u5968\u3059\u308b-\u624b\u52d5",level:3},{value:"5.4.2 \u5916\u90e8\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u691c\u8a0e\u3059\u308b (\u624b\u52d5)",id:"542-\u5916\u90e8\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u691c\u8a0e\u3059\u308b-\u624b\u52d5",level:3},{value:"5.5 \u62e1\u5f35\u53ef\u80fd\u306a\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb",id:"55-\u62e1\u5f35\u53ef\u80fd\u306a\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb",level:2},{value:"5.5.1 ImagePolicyWebhook \u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3092\u4f7f\u7528\u3057\u3066\u30a4\u30e1\u30fc\u30b8\u306e\u51fa\u6240\u3092\u8a2d\u5b9a\u3059\u308b (\u624b\u52d5)",id:"551-imagepolicywebhook-\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3092\u4f7f\u7528\u3057\u3066\u30a4\u30e1\u30fc\u30b8\u306e\u51fa\u6240\u3092\u8a2d\u5b9a\u3059\u308b-\u624b\u52d5",level:3},{value:"5.7 \u4e00\u822c\u7684\u306a\u30dd\u30ea\u30b7\u30fc",id:"57-\u4e00\u822c\u7684\u306a\u30dd\u30ea\u30b7\u30fc",level:2},{value:"5.7.1 \u30ea\u30bd\u30fc\u30b9\u9593\u306b\u540d\u524d\u7a7a\u9593\u3092\u4f7f\u7528\u3057\u3066\u7ba1\u7406\u5883\u754c\u3092\u4f5c\u6210\u3059\u308b\uff08\u624b\u52d5\uff09",id:"571-\u30ea\u30bd\u30fc\u30b9\u9593\u306b\u540d\u524d\u7a7a\u9593\u3092\u4f7f\u7528\u3057\u3066\u7ba1\u7406\u5883\u754c\u3092\u4f5c\u6210\u3059\u308b\u624b\u52d5",level:3},{value:"5.7.2 Pod\u5b9a\u7fa9\u306b\u304a\u3044\u3066seccomp\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u304cdocker/default\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u624b\u52d5\uff09",id:"572-pod\u5b9a\u7fa9\u306b\u304a\u3044\u3066seccomp\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u304cdockerdefault\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u624b\u52d5",level:3},{value:"5.7.3 Pod\u304a\u3088\u3073\u30b3\u30f3\u30c6\u30ca\u306bSecurityContext\u3092\u9069\u7528\u3059\u308b\uff08\u624b\u52d5\uff09",id:"573-pod\u304a\u3088\u3073\u30b3\u30f3\u30c6\u30ca\u306bsecuritycontext\u3092\u9069\u7528\u3059\u308b\u624b\u52d5",level:3},{value:"5.7.4 \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u540d\u524d\u7a7a\u9593\u306f\u4f7f\u7528\u3057\u306a\u3044\u3053\u3068\uff08\u624b\u52d5\uff09",id:"574-\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u540d\u524d\u7a7a\u9593\u306f\u4f7f\u7528\u3057\u306a\u3044\u3053\u3068\u624b\u52d5",level:3}];function d(e){const r={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components},{Details:s}=r;return s||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.h2,{id:"\u6982\u8981",children:"\u6982\u8981"}),"\n",(0,i.jsxs)(r.p,{children:["\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f",(0,i.jsx)(r.a,{href:"/ja/security/hardening-guide",children:"K3s\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5f37\u5316\u30ac\u30a4\u30c9"}),"\u306e\u88dc\u8db3\u8cc7\u6599\u3067\u3059\u3002\u5f37\u5316\u30ac\u30a4\u30c9\u306fK3s\u306e\u672c\u756a\u74b0\u5883\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u5f37\u5316\u3059\u308b\u305f\u3081\u306e\u5177\u4f53\u7684\u306a\u30ac\u30a4\u30c0\u30f3\u30b9\u3092\u63d0\u4f9b\u3057\u3001\u3053\u306e\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u30ac\u30a4\u30c9\u306fCIS Kubernetes\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u306e\u5404\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u306b\u5bfe\u3057\u3066\u5f37\u5316\u3055\u308c\u305f\u30af\u30e9\u30b9\u30bf\u30fc\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ec\u30d9\u30eb\u3092\u8a55\u4fa1\u3059\u308b\u306e\u306b\u5f79\u7acb\u3061\u307e\u3059\u3002K3s\u306e\u904b\u7528\u8005\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30c1\u30fc\u30e0\u3001\u76e3\u67fb\u4eba\u3001\u610f\u601d\u6c7a\u5b9a\u8005\u304c\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u76ee\u7684\u3068\u3057\u3066\u3044\u307e\u3059\u3002"]}),"\n",(0,i.jsxs)(r.p,{children:["\u3053\u306e\u30ac\u30a4\u30c9\u306fK3s\u306e",(0,i.jsx)(r.strong,{children:"v1.24"}),"\u30ea\u30ea\u30fc\u30b9\u30e9\u30a4\u30f3\u304a\u3088\u3073CIS Kubernetes\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u306e",(0,i.jsx)(r.strong,{children:"v1.24"}),"\u30ea\u30ea\u30fc\u30b9\u306b\u7279\u5316\u3057\u3066\u3044\u307e\u3059\u3002"]}),"\n",(0,i.jsxs)(r.p,{children:["\u5404\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u306e\u8a73\u7d30\u306a\u8aac\u660e\u3084\u30c6\u30b9\u30c8\u5931\u6557\u6642\u306e\u4fee\u6b63\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u3001CIS Kubernetes\u30d9\u30f3\u30c1\u30de\u30fc\u30afv1.6\u306e\u8a72\u5f53\u30bb\u30af\u30b7\u30e7\u30f3\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u306f\u3001\u7121\u6599\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u5f8c\u306b",(0,i.jsx)(r.a,{href:"https://www.cisecurity.org/benchmark/kubernetes",children:"Center for Internet Security (CIS)"}),"\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30c6\u30b9\u30c8\u306e\u65b9\u6cd5\u8ad6",children:"\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30c6\u30b9\u30c8\u306e\u65b9\u6cd5\u8ad6"}),"\n",(0,i.jsx)(r.p,{children:"CIS Kubernetes\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u306e\u5404\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u306f\u3001\u4ed8\u968f\u3059\u308b\u5f37\u5316\u30ac\u30a4\u30c9\u306b\u5f93\u3063\u3066\u8a2d\u5b9a\u3055\u308c\u305fK3s\u30af\u30e9\u30b9\u30bf\u30fc\u306b\u5bfe\u3057\u3066\u8a55\u4fa1\u3055\u308c\u307e\u3057\u305f\u3002"}),"\n",(0,i.jsx)(r.p,{children:"\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u76e3\u67fb\u304c\u5143\u306eCIS\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u3068\u7570\u306a\u308b\u5834\u5408\u3001K3s\u306b\u7279\u5316\u3057\u305f\u76e3\u67fb\u30b3\u30de\u30f3\u30c9\u304c\u30c6\u30b9\u30c8\u7528\u306b\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002"}),"\n",(0,i.jsx)(r.p,{children:"\u5404\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u306e\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\uff1a"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"\u5408\u683c"})," - \u30c6\u30b9\u30c8\u5bfe\u8c61\u306eK3s\u30af\u30e9\u30b9\u30bf\u30fc\u304c\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u306b\u8a18\u8f09\u3055\u308c\u305f\u76e3\u67fb\u306b\u5408\u683c\u3057\u307e\u3057\u305f\u3002"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"\u8a72\u5f53\u306a\u3057"})," - \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u304cK3s\u306e\u8a2d\u8a08\u4e0a\u9069\u7528\u3055\u308c\u306a\u3044\u5834\u5408\u3002\u3053\u306e\u7406\u7531\u306f\u4fee\u6b63\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u8aac\u660e\u3055\u308c\u307e\u3059\u3002"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"\u8b66\u544a"})," - \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u304cCIS\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u3067\u624b\u52d5\u3067\u3042\u308a\u3001\u30af\u30e9\u30b9\u30bf\u30fc\u306e\u4f7f\u7528\u30b1\u30fc\u30b9\u3084\u305d\u306e\u4ed6\u306e\u8981\u56e0\u306b\u4f9d\u5b58\u3059\u308b\u5834\u5408\u3002\u3053\u308c\u3089\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u306fK3s\u304c\u305d\u306e\u5b9f\u88c5\u3092\u59a8\u3052\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u8a55\u4fa1\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u30af\u30e9\u30b9\u30bf\u30fc\u306e\u3055\u3089\u306a\u308b\u8a2d\u5b9a\u3084\u76e3\u67fb\u306f\u884c\u308f\u308c\u3066\u3044\u307e\u305b\u3093\u3002"]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"\u3053\u306e\u30ac\u30a4\u30c9\u306f\u3001K3s\u304cSystemd\u30e6\u30cb\u30c3\u30c8\u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u304c\u7570\u306a\u308b\u5834\u5408\u306f\u3001\u300c\u76e3\u67fb\u300d\u30b3\u30de\u30f3\u30c9\u3092\u30b7\u30ca\u30ea\u30aa\u306b\u5408\u308f\u305b\u3066\u8abf\u6574\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002"}),"\n",(0,i.jsx)(r.admonition,{type:"note",children:(0,i.jsxs)(r.p,{children:["\u3053\u306e\u30ac\u30a4\u30c9\u3067\u306f\u3001",(0,i.jsx)(r.code,{children:"scored"}),"\u30c6\u30b9\u30c8\u3001\u3064\u307e\u308a",(0,i.jsx)(r.code,{children:"\u81ea\u52d5\u5316"}),"\u30c6\u30b9\u30c8\u306e\u307f\u3092\u5bfe\u8c61\u3068\u3057\u3066\u3044\u307e\u3059\u3002"]})}),"\n",(0,i.jsx)(r.h2,{id:"11-\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb",children:"1.1 \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb"}),"\n",(0,i.jsx)(r.h3,{id:"111-api\u30b5\u30fc\u30d0\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c644\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.1.1 API\u30b5\u30fc\u30d0\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c644\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08\u30b7\u30b9\u30c6\u30e0\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u306b\u57fa\u3065\u304f\uff09\u3002\n\u4f8b: chmod 644 /etc/kubernetes/manifests/kube-apiserver.yaml"]}),"\n",(0,i.jsxs)(r.h3,{id:"112-api\u30b5\u30fc\u30d0\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:["1.1.2 API\u30b5\u30fc\u30d0\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot",":root","\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08\u30b7\u30b9\u30c6\u30e0\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u306b\u57fa\u3065\u304f\uff09\u3002\n\u4f8b: chown root",":root"," /etc/kubernetes/manifests/kube-apiserver.yaml"]}),"\n",(0,i.jsx)(r.h3,{id:"113-\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.1.3 \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08\u30b7\u30b9\u30c6\u30e0\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u306b\u57fa\u3065\u304f\uff09\u3002\n\u4f8b: chmod 600 /etc/kubernetes/manifests/kube-controller-manager.yaml"]}),"\n",(0,i.jsxs)(r.h3,{id:"114-\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:["1.1.4 \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot",":root","\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08\u30b7\u30b9\u30c6\u30e0\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u306b\u57fa\u3065\u304f\uff09\u3002\n\u4f8b: chown root",":root"," /etc/kubernetes/manifests/kube-controller-manager.yaml"]}),"\n",(0,i.jsx)(r.h3,{id:"115-\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.1.5 \u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08\u30b7\u30b9\u30c6\u30e0\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u306b\u57fa\u3065\u304f\uff09\u3002\n\u4f8b: chmod 600 /etc/kubernetes/manifests/kube-scheduler.yaml"]}),"\n",(0,i.jsxs)(r.h3,{id:"116-\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:["1.1.6 \u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot",":root","\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08\u30b7\u30b9\u30c6\u30e0\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u306b\u57fa\u3065\u304f\uff09\u3002\n\u4f8b: chown root",":root"," /etc/kubernetes/manifests/kube-scheduler.yaml"]}),"\n",(0,i.jsx)(r.h3,{id:"117-etcd\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.1.7 etcd\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08\u30b7\u30b9\u30c6\u30e0\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u306b\u57fa\u3065\u304f\uff09\u3002\n\u4f8b: chmod 600 /var/lib/rancher/k3s/server/db/etcd/config"]}),"\n",(0,i.jsxs)(r.h3,{id:"118-etcd\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:["1.1.8 etcd\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot",":root","\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08\u30b7\u30b9\u30c6\u30e0\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u306b\u57fa\u3065\u304f\uff09\u3002\n\u4f8b: chown root",":root"," /var/lib/rancher/k3s/server/db/etcd/config"]}),"\n",(0,i.jsx)(r.h3,{id:"119-\u30b3\u30f3\u30c6\u30ca\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.1.9 \u30b3\u30f3\u30c6\u30ca\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08\u30b7\u30b9\u30c6\u30e0\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u306b\u57fa\u3065\u304f\uff09\u3002\n\u4f8b: chmod 600 <path/to/cni/files>"]}),"\n",(0,i.jsxs)(r.h3,{id:"1110-\u30b3\u30f3\u30c6\u30ca\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:["1.1.10 \u30b3\u30f3\u30c6\u30ca\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot",":root","\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08\u30b7\u30b9\u30c6\u30e0\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u306b\u57fa\u3065\u304f\uff09\u3002\n\u4f8b: chown root",":root"," <path/to/cni/files>"]}),"\n",(0,i.jsx)(r.h3,{id:"1111-etcd\u30c7\u30fc\u30bf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6a29\u9650\u304c700\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.1.11 etcd\u30c7\u30fc\u30bf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6a29\u9650\u304c700\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"stat -c %a /var/lib/rancher/k3s/server/db/etcd\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '700' \u304c '700' \u3068\u7b49\u3057\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"700\n"})})]}),"\n",(0,i.jsxs)(r.h3,{id:"1112-etcd\u30c7\u30fc\u30bf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6240\u6709\u8005\u304cetcd\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:["1.1.12 etcd\u30c7\u30fc\u30bf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6240\u6709\u8005\u304cetcd",":etcd","\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\netcd\u30b5\u30fc\u30d0\u30fc\u30ce\u30fc\u30c9\u3067\u3001\u30b3\u30de\u30f3\u30c9 'ps -ef | grep etcd' \u304b\u3089\u5f15\u6570 --data-dir \u3068\u3057\u3066\u6e21\u3055\u308c\u305fetcd\u30c7\u30fc\u30bf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\u4e0a\u8a18\u3067\u898b\u3064\u304b\u3063\u305fetcd\u30c7\u30fc\u30bf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u57fa\u3065\u3044\u3066\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u4f8b: chown etcd",":etcd"," /var/lib/etcd"]}),"\n",(0,i.jsx)(r.h3,{id:"1113-adminconf\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.1.13 admin.conf\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08\u30b7\u30b9\u30c6\u30e0\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u306b\u57fa\u3065\u304f\uff09\u3002\n\u4f8b: chmod 600 /var/lib/rancher/k3s/server/cred/admin.kubeconfig"]}),"\n",(0,i.jsxs)(r.h3,{id:"1114-adminconf\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:["1.1.14 admin.conf\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot",":root","\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"/bin/sh -c 'if test -e /var/lib/rancher/k3s/server/cred/admin.kubeconfig; then stat -c %U:%G /var/lib/rancher/k3s/server/cred/admin.kubeconfig; fi'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," 'root",":root","' \u304c 'root",":root","' \u3068\u7b49\u3057\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"root:root\n"})})]}),"\n",(0,i.jsx)(r.h3,{id:"1115-schedulerconf\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.1.15 scheduler.conf\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"/bin/sh -c 'if test -e /var/lib/rancher/k3s/server/cred/scheduler.kubeconfig; then stat -c permissions=%a /var/lib/rancher/k3s/server/cred/scheduler.kubeconfig; fi'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," permissions \u304c 600 \u306e\u6a29\u9650\u3092\u6301\u3061\u3001600\u4ee5\u4e0a\u306e\u5236\u9650\u304c\u671f\u5f85\u3055\u308c\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"permissions=600\n"})})]}),"\n",(0,i.jsxs)(r.h3,{id:"1116-schedulerconf\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:["1.1.16 scheduler.conf\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot",":root","\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"/bin/sh -c 'if test -e /var/lib/rancher/k3s/server/cred/scheduler.kubeconfig; then stat -c %U:%G /var/lib/rancher/k3s/server/cred/scheduler.kubeconfig; fi'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," 'root",":root","' \u304c\u5b58\u5728\u3059\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"root:root\n"})})]}),"\n",(0,i.jsx)(r.h3,{id:"1117-controller-managerconf\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.1.17 controller-manager.conf\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"/bin/sh -c 'if test -e /var/lib/rancher/k3s/server/cred/controller.kubeconfig; then stat -c permissions=%a /var/lib/rancher/k3s/server/cred/controller.kubeconfig; fi'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," permissions \u304c 600 \u306e\u6a29\u9650\u3092\u6301\u3061\u3001600\u4ee5\u4e0a\u306e\u5236\u9650\u304c\u671f\u5f85\u3055\u308c\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"permissions=600\n"})})]}),"\n",(0,i.jsxs)(r.h3,{id:"1118-controller-managerconf\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:["1.1.18 controller-manager.conf\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot",":root","\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"stat -c %U:%G /var/lib/rancher/k3s/server/tls\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," 'root",":root","' \u304c 'root",":root","' \u3068\u7b49\u3057\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"root:root\n"})})]}),"\n",(0,i.jsxs)(r.h3,{id:"1119-kubernetes-pki\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304a\u3088\u3073\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:["1.1.19 Kubernetes PKI\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304a\u3088\u3073\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304croot",":root","\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"find /var/lib/rancher/k3s/server/tls | xargs stat -c %U:%G\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," 'root",":root","' \u304c\u5b58\u5728\u3059\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"root:root\n"})})]}),"\n",(0,i.jsx)(r.h3,{id:"1120-kubernetes-pki\u8a3c\u660e\u66f8\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.1.20 Kubernetes PKI\u8a3c\u660e\u66f8\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c600\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08\u30b7\u30b9\u30c6\u30e0\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u306b\u57fa\u3065\u304f\uff09\u3002\n\u4f8b: chmod -R 600 /etc/kubernetes/pki/*.crt"]}),"\n",(0,i.jsx)(r.h3,{id:"1121-kubernetes-pki\u30ad\u30fc\u306e\u6a29\u9650\u304c600\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.1.21 Kubernetes PKI\u30ad\u30fc\u306e\u6a29\u9650\u304c600\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08\u30b7\u30b9\u30c6\u30e0\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u306b\u57fa\u3065\u304f\uff09\u3002\n\u4f8b: chmod -R 600 /etc/kubernetes/pki/*.key"]}),"\n",(0,i.jsx)(r.h2,{id:"12-api\u30b5\u30fc\u30d0\u30fc",children:"1.2 API\u30b5\u30fc\u30d0\u30fc"}),"\n",(0,i.jsx)(r.h3,{id:"121---anonymous-auth\u5f15\u6570\u304cfalse\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.1 --anonymous-auth\u5f15\u6570\u304cfalse\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-apiserver' | tail -n1 | grep 'anonymous-auth'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--anonymous-auth' \u304c 'false' \u3068\u7b49\u3057\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'2024\u5e745\u670815\u65e5 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"122---token-auth-file\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.2 --token-auth-file\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u30d1\u30b9"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"/bin/ps -ef | grep containerd | grep -v grep\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--token-auth-file'\u304c\u5b58\u5728\u3057\u306a\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"root        2335    2318  0 18:38 ?        00:00:00 containerd -c /var/lib/rancher/k3s/agent/etc/containerd/config.toml -a /run/k3s/containerd/containerd.sock --state /run/k3s/containerd --root /var/lib/rancher/k3s/agent/containerd\n"})})]}),"\n",(0,i.jsx)(r.h3,{id:"123---denyserviceexternalips\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.3 --DenyServiceExternalIPs\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u30d1\u30b9"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"/bin/ps -ef | grep containerd | grep -v grep\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--enable-admission-plugins'\u304c\u5b58\u5728\u3059\u308b \u307e\u305f\u306f '--enable-admission-plugins'\u304c\u5b58\u5728\u3057\u306a\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"root        2335    2318  0 18:38 ?        00:00:00 containerd -c /var/lib/rancher/k3s/agent/etc/containerd/config.toml -a /run/k3s/containerd/containerd.sock --state /run/k3s/containerd --root /var/lib/rancher/k3s/agent/containerd\n"})})]}),"\n",(0,i.jsx)(r.h3,{id:"124---kubelet-https\u5f15\u6570\u304ctrue\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.4 --kubelet-https\u5f15\u6570\u304ctrue\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u9069\u7528\u5916"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u4e0a\u306eAPI\u30b5\u30fc\u30d0\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb /etc/kubernetes/manifests/kube-apiserver.yaml\u3092\u7de8\u96c6\u3057\u3001--kubelet-https\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u524a\u9664\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"125---kubelet-client-certificate\u3068--kubelet-client-key\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.5 --kubelet-client-certificate\u3068--kubelet-client-key\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-apiserver' | tail -n1 | grep 'kubelet-certificate-authority'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--kubelet-client-certificate'\u304c\u5b58\u5728\u3057\u3001\u304b\u3064'--kubelet-client-key'\u304c\u5b58\u5728\u3059\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'May 15 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"126---kubelet-certificate-authority-\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.6 --kubelet-certificate-authority \u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-apiserver' | tail -n1 | grep 'kubelet-certificate-authority'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--kubelet-certificate-authority' \u304c\u5b58\u5728\u3059\u308b\u3053\u3068"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'May 15 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"127---authorization-mode\u5f15\u6570\u304calwaysallow\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.7 --authorization-mode\u5f15\u6570\u304cAlwaysAllow\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-apiserver' | tail -n1 | grep 'authorization-mode'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--authorization-mode'\u306b'AlwaysAllow'\u304c\u542b\u307e\u308c\u3066\u3044\u306a\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'2024\u5e745\u670815\u65e5 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"128---authorization-mode\u5f15\u6570\u306bnode\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.8 --authorization-mode\u5f15\u6570\u306bNode\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-apiserver' | tail -n1 | grep 'authorization-mode'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--authorization-mode'\u306b'Node'\u304c\u542b\u307e\u308c\u3066\u3044\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'2024\u5e745\u670815\u65e5 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"129---authorization-mode\u5f15\u6570\u306brbac\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.9 --authorization-mode\u5f15\u6570\u306bRBAC\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-apiserver' | tail -n1 | grep 'authorization-mode'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--authorization-mode'\u306b'RBAC'\u304c\u542b\u307e\u308c\u3066\u3044\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'2024\u5e745\u670815\u65e5 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"1210-\u30a4\u30d9\u30f3\u30c8\u30ec\u30fc\u30c8\u5236\u9650\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"1.2.10 \u30a4\u30d9\u30f3\u30c8\u30ec\u30fc\u30c8\u5236\u9650\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," WARN"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\nKubernetes\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u5f93\u3044\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u5e0c\u671b\u306e\u5236\u9650\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u6b21\u306b\u3001API\u30b5\u30fc\u30d0\u30fc\u30dd\u30c3\u30c9\u306e\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb /etc/kubernetes/manifests/kube-apiserver.yaml \u3092\u7de8\u96c6\u3057\u3001\u4ee5\u4e0b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n--enable-admission-plugins=...,EventRateLimit,...\n--admission-control-config-file=<path/to/configuration/file>"]}),"\n",(0,i.jsx)(r.h3,{id:"1211-alwaysadmit\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"1.2.11 AlwaysAdmit\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," PASS"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-apiserver' | tail -n1 | grep 'enable-admission-plugins'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--enable-admission-plugins' \u306b 'AlwaysAdmit' \u304c\u542b\u307e\u308c\u3066\u3044\u306a\u3044\u3001\u307e\u305f\u306f '--enable-admission-plugins' \u304c\u5b58\u5728\u3057\u306a\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'2024\u5e745\u670815\u65e5 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"1212-alwayspullimages\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"1.2.12 AlwaysPullImages\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," WARN"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u306eAPI\u30b5\u30fc\u30d0\u30fc\u30dd\u30c3\u30c9\u306e\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb /etc/kubernetes/manifests/kube-apiserver.yaml \u3092\u7de8\u96c6\u3057\u3001--enable-admission-plugins \u30d1\u30e9\u30e1\u30fc\u30bf\u306b AlwaysPullImages \u3092\u542b\u3081\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n--enable-admission-plugins=...,AlwaysPullImages,..."]}),"\n",(0,i.jsx)(r.h3,{id:"1213-podsecuritypolicy\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408securitycontextdeny\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"1.2.13 PodSecurityPolicy\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u3001SecurityContextDeny\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," PASS"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-apiserver' | tail -n1 | grep 'enable-admission-plugins'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--enable-admission-plugins' \u306b 'SecurityContextDeny' \u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3001\u307e\u305f\u306f '--enable-admission-plugins' \u306b 'PodSecurityPolicy' \u304c\u542b\u307e\u308c\u3066\u3044\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'2024\u5e745\u670815\u65e5 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"### 1.2.14 \u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09\n\n**\u7d50\u679c:** \u5408\u683c\n\n**\u76e3\u67fb:**\n```bash\njournalctl -D /var/log/journal  -u k3s | grep 'Running kube-apiserver' | tail -n1 | grep -v grep\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--disable-admission-plugins' \u304c\u5b58\u5728\u3059\u308b\u304b\u3001\u5b58\u5728\u3057\u306a\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'May 15 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"1215-namespacelifecycle\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.15 NamespaceLifecycle\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-apiserver' | tail -n1 | grep -v grep\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--disable-admission-plugins' \u304c\u5b58\u5728\u3059\u308b\u304b\u3001\u5b58\u5728\u3057\u306a\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'May 15 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"1216-noderestriction\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.16 NodeRestriction\u306e\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-apiserver' | tail -n1 | grep 'enable-admission-plugins'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--enable-admission-plugins' \u306b 'NodeRestriction' \u304c\u542b\u307e\u308c\u3066\u3044\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'May 15 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"1217---secure-port-\u5f15\u6570\u304c-0-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.17 --secure-port \u5f15\u6570\u304c 0 \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-apiserver' | tail -n1 | grep 'secure-port'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--secure-port' \u304c 0 \u3088\u308a\u5927\u304d\u3044\u304b\u3001\u5b58\u5728\u3057\u306a\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'2024\u5e745\u670815\u65e5 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"1218---profiling\u5f15\u6570\u304cfalse\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.18 --profiling\u5f15\u6570\u304cfalse\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-apiserver' | tail -n1 | grep 'profiling'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--profiling'\u304c'false'\u3067\u3042\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'2024\u5e745\u670815\u65e5 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"1219---audit-log-path\u5f15\u6570\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.19 --audit-log-path\u5f15\u6570\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u306eAPI\u30b5\u30fc\u30d0\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb /etc/kubernetes/manifests/kube-apiserver.yaml \u3092\u7de8\u96c6\u3057\u3001--audit-log-path\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u9069\u5207\u306a\u30d1\u30b9\u3068\u30d5\u30a1\u30a4\u30eb\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001--audit-log-path=/var/log/apiserver/audit.log"]}),"\n",(0,i.jsx)(r.h3,{id:"1220---audit-log-maxage\u5f15\u6570\u304c30\u307e\u305f\u306f\u9069\u5207\u306a\u5024\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.20 --audit-log-maxage\u5f15\u6570\u304c30\u307e\u305f\u306f\u9069\u5207\u306a\u5024\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u306eAPI\u30b5\u30fc\u30d0\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb /etc/kubernetes/manifests/kube-apiserver.yaml \u3092\u7de8\u96c6\u3057\u3001--audit-log-maxage\u30d1\u30e9\u30e1\u30fc\u30bf\u309230\u307e\u305f\u306f\u9069\u5207\u306a\u65e5\u6570\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001--audit-log-maxage=30"]}),"\n",(0,i.jsx)(r.h3,{id:"1221---audit-log-maxbackup\u5f15\u6570\u304c10\u307e\u305f\u306f\u9069\u5207\u306a\u5024\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.21 --audit-log-maxbackup\u5f15\u6570\u304c10\u307e\u305f\u306f\u9069\u5207\u306a\u5024\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u306eAPI\u30b5\u30fc\u30d0\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb /etc/kubernetes/manifests/kube-apiserver.yaml \u3092\u7de8\u96c6\u3057\u3001--audit-log-maxbackup\u30d1\u30e9\u30e1\u30fc\u30bf\u309210\u307e\u305f\u306f\u9069\u5207\u306a\u5024\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001--audit-log-maxbackup=10"]}),"\n",(0,i.jsx)(r.h3,{id:"1222---audit-log-maxsize\u5f15\u6570\u304c100\u307e\u305f\u306f\u9069\u5207\u306a\u5024\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.22 --audit-log-maxsize\u5f15\u6570\u304c100\u307e\u305f\u306f\u9069\u5207\u306a\u5024\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u306eAPI\u30b5\u30fc\u30d0\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb /etc/kubernetes/manifests/kube-apiserver.yaml \u3092\u7de8\u96c6\u3057\u3001--audit-log-maxsize\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u9069\u5207\u306a\u30b5\u30a4\u30ba\uff08MB\u5358\u4f4d\uff09\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001100 MB\u306b\u8a2d\u5b9a\u3059\u308b\u5834\u5408\u3001--audit-log-maxsize=100"]}),"\n",(0,i.jsx)(r.h3,{id:"1223---request-timeout\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.23 --request-timeout\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\nAPI\u30b5\u30fc\u30d0\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb /etc/kubernetes/manifests/kube-apiserver.yaml \u3092\u7de8\u96c6\u3057\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u4ee5\u4e0b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u9069\u5207\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001--request-timeout=300s"]}),"\n",(0,i.jsx)(r.h3,{id:"1224---service-account-lookup\u5f15\u6570\u304ctrue\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.24 --service-account-lookup\u5f15\u6570\u304ctrue\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-apiserver' | tail -n1 | grep -v grep\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--service-account-lookup'\u304c\u5b58\u5728\u3057\u306a\u3044\u3001\u307e\u305f\u306f'--service-account-lookup'\u304c'true'\u3067\u3042\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'2024\u5e745\u670815\u65e5 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"1225---service-account-key-file\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.25 --service-account-key-file\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u306eAPI\u30b5\u30fc\u30d0\u30fc\u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb /etc/kubernetes/manifests/kube-apiserver.yaml \u3092\u7de8\u96c6\u3057\u3001--service-account-key-file\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u516c\u958b\u9375\u30d5\u30a1\u30a4\u30eb\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001\n--service-account-key-file=<filename>"]}),"\n",(0,i.jsx)(r.h3,{id:"1226---etcd-certfile\u304a\u3088\u3073--etcd-keyfile\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.26 --etcd-certfile\u304a\u3088\u3073--etcd-keyfile\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal -u k3s | grep -m1 'Running kube-apiserver'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--etcd-certfile'\u304c\u5b58\u5728\u3057\u3001\u304b\u3064'--etcd-keyfile'\u304c\u5b58\u5728\u3059\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'2024\u5e745\u670815\u65e5 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"1227---tls-cert-file\u304a\u3088\u3073--tls-private-key-file\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.27 --tls-cert-file\u304a\u3088\u3073--tls-private-key-file\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal -u k3s | grep -A1 'Running kube-apiserver' | tail -n2\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--tls-cert-file'\u304c\u5b58\u5728\u3057\u3001\u304b\u3064'--tls-private-key-file'\u304c\u5b58\u5728\u3059\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'2024\u5e745\u670815\u65e5 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n2024\u5e745\u670815\u65e5 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-scheduler --authentication-kubeconfig=/var/lib/rancher/k3s/server/cred/scheduler.kubeconfig --authorization-kubeconfig=/var/lib/rancher/k3s/server/cred/scheduler.kubeconfig --bind-address=127.0.0.1 --kubeconfig=/var/lib/rancher/k3s/server/cred/scheduler.kubeconfig --profiling=false --secure-port=10259"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"1228---client-ca-file\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u81ea\u52d5\u5316",children:"1.2.28 --client-ca-file\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u81ea\u52d5\u5316\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-apiserver' | tail -n1 | grep 'client-ca-file'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--client-ca-file' \u304c\u5b58\u5728\u3059\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'May 15 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"1229---etcd-cafile-\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"1.2.29 --etcd-cafile \u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-apiserver' | tail -n1 | grep 'etcd-cafile'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--etcd-cafile' \u304c\u5b58\u5728\u3059\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'May 15 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"1230---encryption-provider-config-\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"1.2.30 --encryption-provider-config \u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-apiserver' | tail -n1 | grep 'encryption-provider-config'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--encryption-provider-config' \u304c\u5b58\u5728\u3059\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'May 15 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"1231-\u6697\u53f7\u5316\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u304c\u9069\u5207\u306b\u69cb\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"1.2.31 \u6697\u53f7\u5316\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u304c\u9069\u5207\u306b\u69cb\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63:"}),"\nKubernetes\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u5f93\u3044\u3001EncryptionConfig\u30d5\u30a1\u30a4\u30eb\u3092\u69cb\u6210\u3057\u307e\u3059\u3002\n\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u3001aescbc\u3001kms\u3001\u307e\u305f\u306fsecretbox\u3092\u6697\u53f7\u5316\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u3068\u3057\u3066\u9078\u629e\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"1232-api\u30b5\u30fc\u30d0\u30fc\u304c\u5f37\u529b\u306a\u6697\u53f7\u5316\u30b9\u30a4\u30fc\u30c8\u306e\u307f\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"1.2.32 API\u30b5\u30fc\u30d0\u30fc\u304c\u5f37\u529b\u306a\u6697\u53f7\u5316\u30b9\u30a4\u30fc\u30c8\u306e\u307f\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-apiserver' | tail -n1 | grep 'tls-cipher-suites'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--tls-cipher-suites' \u306f 'TLS_AES_128_GCM_SHA256,TLS_AES_256_GCM_SHA384,TLS_CHACHA20_POLY1305_SHA256,TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA,TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256,TLS_RSA_WITH_3DES_EDE_CBC_SHA,TLS_RSA_WITH_AES_128_CBC_SHA,TLS_RSA_WITH_AES_128_GCM_SHA256,TLS_RSA_WITH_AES_256_CBC_SHA,TLS_RSA_WITH_AES_256_GCM_SHA384' \u306e\u6709\u52b9\u306a\u8981\u7d20\u3092\u542b\u3093\u3067\u3044\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'May 15 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h2,{id:"13-\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30de\u30cd\u30fc\u30b8\u30e3\u30fc",children:"1.3 \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30de\u30cd\u30fc\u30b8\u30e3\u30fc"}),"\n",(0,i.jsx)(r.h3,{id:"131---terminated-pod-gc-threshold-\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"1.3.1 --terminated-pod-gc-threshold \u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-controller-manager' | tail -n1 | grep 'terminated-pod-gc-threshold'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--terminated-pod-gc-threshold' \u304c\u5b58\u5728\u3059\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'May 15 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-controller-manager --allocate-node-cidrs=true --authentication-kubeconfig=/var/lib/rancher/k3s/server/cred/controller.kubeconfig --authorization-kubeconfig=/var/lib/rancher/k3s/server/cred/controller.kubeconfig --bind-address=127.0.0.1 --cluster-cidr=10.42.0.0/16 --cluster-signing-kube-apiserver-client-cert-file=/var/lib/rancher/k3s/server/tls/client-ca.nochain.crt --cluster-signing-kube-apiserver-client-key-file=/var/lib/rancher/k3s/server/tls/client-ca.key --cluster-signing-kubelet-client-cert-file=/var/lib/rancher/k3s/server/tls/client-ca.nochain.crt --cluster-signing-kubelet-client-key-file=/var/lib/rancher/k3s/server/tls/client-ca.key --cluster-signing-kubelet-serving-cert-file=/var/lib/rancher/k3s/server/tls/server-ca.nochain.crt --cluster-signing-kubelet-serving-key-file=/var/lib/rancher/k3s/server/tls/server-ca.key --cluster-signing-legacy-unknown-cert-file=/var/lib/rancher/k3s/server/tls/server-ca.nochain.crt --cluster-signing-legacy-unknown-key-file=/var/lib/rancher/k3s/server/tls/server-ca.key --configure-cloud-routes=false --controllers=*,tokencleaner,-service,-route,-cloud-node-lifecycle --feature-gates=JobTrackingWithFinalizers=true --kubeconfig=/var/lib/rancher/k3s/server/cred/controller.kubeconfig --profiling=false --root-ca-file=/var/lib/rancher/k3s/server/tls/server-ca.crt --secure-port=10257 --service-account-private-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --terminated-pod-gc-threshold=10 --use-service-account-credentials=true"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"132---profiling-\u5f15\u6570\u304c-false-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"1.3.2 --profiling \u5f15\u6570\u304c false \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-controller-manager' | tail -n1 | grep 'profiling'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--profiling' \u304c 'false' \u306b\u7b49\u3057\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'May 15 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-controller-manager --allocate-node-cidrs=true --authentication-kubeconfig=/var/lib/rancher/k3s/server/cred/controller.kubeconfig --authorization-kubeconfig=/var/lib/rancher/k3s/server/cred/controller.kubeconfig --bind-address=127.0.0.1 --cluster-cidr=10.42.0.0/16 --cluster-signing-kube-apiserver-client-cert-file=/var/lib/rancher/k3s/server/tls/client-ca.nochain.crt --cluster-signing-kube-apiserver-client-key-file=/var/lib/rancher/k3s/server/tls/client-ca.key --cluster-signing-kubelet-client-cert-file=/var/lib/rancher/k3s/server/tls/client-ca.nochain.crt --cluster-signing-kubelet-client-key-file=/var/lib/rancher/k3s/server/tls/client-ca.key --cluster-signing-kubelet-serving-cert-file=/var/lib/rancher/k3s/server/tls/server-ca.nochain.crt --cluster-signing-kubelet-serving-key-file=/var/lib/rancher/k3s/server/tls/server-ca.key --cluster-signing-legacy-unknown-cert-file=/var/lib/rancher/k3s/server/tls/server-ca.nochain.crt --cluster-signing-legacy-unknown-key-file=/var/lib/rancher/k3s/server/tls/server-ca.key --configure-cloud-routes=false --controllers=*,tokencleaner,-service,-route,-cloud-node-lifecycle --feature-gates=JobTrackingWithFinalizers=true --kubeconfig=/var/lib/rancher/k3s/server/cred/controller.kubeconfig --profiling=false --root-ca-file=/var/lib/rancher/k3s/server/tls/server-ca.crt --secure-port=10257 --service-account-private-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --terminated-pod-gc-threshold=10 --use-service-account-credentials=true"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"133---use-service-account-credentials-\u5f15\u6570\u304c-true-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"1.3.3 --use-service-account-credentials \u5f15\u6570\u304c true \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-controller-manager' | tail -n1 | grep 'use-service-account-credentials'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--use-service-account-credentials' \u304c 'false' \u306b\u7b49\u3057\u304f\u306a\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'May 15 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-controller-manager --allocate-node-cidrs=true --authentication-kubeconfig=/var/lib/rancher/k3s/server/cred/controller.kubeconfig --authorization-kubeconfig=/var/lib/rancher/k3s/server/cred/controller.kubeconfig --bind-address=127.0.0.1 --cluster-cidr=10.42.0.0/16 --cluster-signing-kube-apiserver-client-cert-file=/var/lib/rancher/k3s/server/tls/client-ca.nochain.crt --cluster-signing-kube-apiserver-client-key-file=/var/lib/rancher/k3s/server/tls/client-ca.key --cluster-signing-kubelet-client-cert-file=/var/lib/rancher/k3s/server/tls/client-ca.nochain.crt --cluster-signing-kubelet-client-key-file=/var/lib/rancher/k3s/server/tls/client-ca.key --cluster-signing-kubelet-serving-cert-file=/var/lib/rancher/k3s/server/tls/server-ca.nochain.crt --cluster-signing-kubelet-serving-key-file=/var/lib/rancher/k3s/server/tls/server-ca.key --cluster-signing-legacy-unknown-cert-file=/var/lib/rancher/k3s/server/tls/server-ca.nochain.crt --cluster-signing-legacy-unknown-key-file=/var/lib/rancher/k3s/server/tls/server-ca.key --configure-cloud-routes=false --controllers=*,tokencleaner,-service,-route,-cloud-node-lifecycle --feature-gates=JobTrackingWithFinalizers=true --kubeconfig=/var/lib/rancher/k3s/server/cred/controller.kubeconfig --profiling=false --root-ca-file=/var/lib/rancher/k3s/server/tls/server-ca.crt --secure-port=10257 --service-account-private-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --terminated-pod-gc-threshold=10 --use-service-account-credentials=true"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"134---service-account-private-key-file-\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"1.3.4 --service-account-private-key-file \u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-controller-manager' | tail -n1 | grep 'service-account-private-key-file'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--service-account-private-key-file' \u304c\u5b58\u5728\u3059\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'2024\u5e745\u670815\u65e5 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-controller-manager --allocate-node-cidrs=true --authentication-kubeconfig=/var/lib/rancher/k3s/server/cred/controller.kubeconfig --authorization-kubeconfig=/var/lib/rancher/k3s/server/cred/controller.kubeconfig --bind-address=127.0.0.1 --cluster-cidr=10.42.0.0/16 --cluster-signing-kube-apiserver-client-cert-file=/var/lib/rancher/k3s/server/tls/client-ca.nochain.crt --cluster-signing-kube-apiserver-client-key-file=/var/lib/rancher/k3s/server/tls/client-ca.key --cluster-signing-kubelet-client-cert-file=/var/lib/rancher/k3s/server/tls/client-ca.nochain.crt --cluster-signing-kubelet-client-key-file=/var/lib/rancher/k3s/server/tls/client-ca.key --cluster-signing-kubelet-serving-cert-file=/var/lib/rancher/k3s/server/tls/server-ca.nochain.crt --cluster-signing-kubelet-serving-key-file=/var/lib/rancher/k3s/server/tls/server-ca.key --cluster-signing-legacy-unknown-cert-file=/var/lib/rancher/k3s/server/tls/server-ca.nochain.crt --cluster-signing-legacy-unknown-key-file=/var/lib/rancher/k3s/server/tls/server-ca.key --configure-cloud-routes=false --controllers=*,tokencleaner,-service,-route,-cloud-node-lifecycle --feature-gates=JobTrackingWithFinalizers=true --kubeconfig=/var/lib/rancher/k3s/server/cred/controller.kubeconfig --profiling=false --root-ca-file=/var/lib/rancher/k3s/server/tls/server-ca.crt --secure-port=10257 --service-account-private-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --terminated-pod-gc-threshold=10 --use-service-account-credentials=true"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"135---root-ca-file-\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"1.3.5 --root-ca-file \u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-controller-manager' | tail -n1 | grep 'root-ca-file'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--root-ca-file' \u304c\u5b58\u5728\u3059\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'2024\u5e745\u670815\u65e5 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-controller-manager --allocate-node-cidrs=true --authentication-kubeconfig=/var/lib/rancher/k3s/server/cred/controller.kubeconfig --authorization-kubeconfig=/var/lib/rancher/k3s/server/cred/controller.kubeconfig --bind-address=127.0.0.1 --cluster-cidr=10.42.0.0/16 --cluster-signing-kube-apiserver-client-cert-file=/var/lib/rancher/k3s/server/tls/client-ca.nochain.crt --cluster-signing-kube-apiserver-client-key-file=/var/lib/rancher/k3s/server/tls/client-ca.key --cluster-signing-kubelet-client-cert-file=/var/lib/rancher/k3s/server/tls/client-ca.nochain.crt --cluster-signing-kubelet-client-key-file=/var/lib/rancher/k3s/server/tls/client-ca.key --cluster-signing-kubelet-serving-cert-file=/var/lib/rancher/k3s/server/tls/server-ca.nochain.crt --cluster-signing-kubelet-serving-key-file=/var/lib/rancher/k3s/server/tls/server-ca.key --cluster-signing-legacy-unknown-cert-file=/var/lib/rancher/k3s/server/tls/server-ca.nochain.crt --cluster-signing-legacy-unknown-key-file=/var/lib/rancher/k3s/server/tls/server-ca.key --configure-cloud-routes=false --controllers=*,tokencleaner,-service,-route,-cloud-node-lifecycle --feature-gates=JobTrackingWithFinalizers=true --kubeconfig=/var/lib/rancher/k3s/server/cred/controller.kubeconfig --profiling=false --root-ca-file=/var/lib/rancher/k3s/server/tls/server-ca.crt --secure-port=10257 --service-account-private-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --terminated-pod-gc-threshold=10 --use-service-account-credentials=true"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"136-rotatekubeletservercertificate-\u5f15\u6570\u304c-true-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"1.3.6 RotateKubeletServerCertificate \u5f15\u6570\u304c true \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u306e Controller Manager \u30dd\u30c3\u30c9\u4ed5\u69d8\u30d5\u30a1\u30a4\u30eb /etc/kubernetes/manifests/kube-controller-manager.yaml \u3092\u7de8\u96c6\u3057\u3001--feature-gates \u30d1\u30e9\u30e1\u30fc\u30bf\u306b RotateKubeletServerCertificate=true \u3092\u542b\u3081\u307e\u3059\u3002\n--feature-gates=RotateKubeletServerCertificate=true"]}),"\n",(0,i.jsx)(r.h3,{id:"137---bind-address-\u5f15\u6570\u304c-127001-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"1.3.7 --bind-address \u5f15\u6570\u304c 127.0.0.1 \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"/bin/ps -ef | grep containerd | grep -v grep\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--bind-address' \u304c\u5b58\u5728\u3059\u308b OR '--bind-address' \u304c\u5b58\u5728\u3057\u306a\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"root        2335    2318  0 18:38 ?        00:00:00 containerd -c /var/lib/rancher/k3s/agent/etc/containerd/config.toml -a /run/k3s/containerd/containerd.sock --state /run/k3s/containerd --root /var/lib/rancher/k3s/agent/containerd\n"})})]}),"\n",(0,i.jsx)(r.h2,{id:"14-\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u30fc",children:"1.4 \u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u30fc"}),"\n",(0,i.jsx)(r.h3,{id:"141---profiling-\u5f15\u6570\u304c-false-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"1.4.1 --profiling \u5f15\u6570\u304c false \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal -u k3s | grep 'Running kube-scheduler' | tail -n1\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--profiling' \u304c 'false' \u306b\u7b49\u3057\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'2024\u5e745\u670815\u65e5 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-scheduler --authentication-kubeconfig=/var/lib/rancher/k3s/server/cred/scheduler.kubeconfig --authorization-kubeconfig=/var/lib/rancher/k3s/server/cred/scheduler.kubeconfig --bind-address=127.0.0.1 --kubeconfig=/var/lib/rancher/k3s/server/cred/scheduler.kubeconfig --profiling=false --secure-port=10259"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"142---bind-address-\u5f15\u6570\u304c-127001-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"1.4.2 --bind-address \u5f15\u6570\u304c 127.0.0.1 \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal  -u k3s | grep 'Running kube-scheduler' | tail -n1 | grep 'bind-address'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--bind-address' \u304c '127.0.0.1' \u306b\u7b49\u3057\u3044 OR '--bind-address' \u304c\u5b58\u5728\u3057\u306a\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'2024\u5e745\u670815\u65e5 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-scheduler --authentication-kubeconfig=/var/lib/rancher/k3s/server/cred/scheduler.kubeconfig --authorization-kubeconfig=/var/lib/rancher/k3s/server/cred/scheduler.kubeconfig --bind-address=127.0.0.1 --kubeconfig=/var/lib/rancher/k3s/server/cred/scheduler.kubeconfig --profiling=false --secure-port=10259"\n'})})]}),"\n",(0,i.jsx)(r.h2,{id:"2-etcd-\u30ce\u30fc\u30c9\u69cb\u6210",children:"2 Etcd \u30ce\u30fc\u30c9\u69cb\u6210"}),"\n",(0,i.jsx)(r.h3,{id:"21---cert-file-\u304a\u3088\u3073---key-file-\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"2.1 --cert-file \u304a\u3088\u3073 --key-file \u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"grep -A 4 'client-transport-security' /var/lib/rancher/k3s/server/db/etcd/config | grep -E 'cert-file|key-file'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," 'cert-file' \u304c\u5b58\u5728\u3059\u308b AND 'key-file' \u304c\u5b58\u5728\u3059\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"  cert-file: /var/lib/rancher/k3s/server/tls/etcd/server-client.crt\n  key-file: /var/lib/rancher/k3s/server/tls/etcd/server-client.key\n"})})]}),"\n",(0,i.jsx)(r.h3,{id:"22---client-cert-auth-\u5f15\u6570\u304c-true-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"2.2 --client-cert-auth \u5f15\u6570\u304c true \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"grep -A 4 'client-transport-security' /var/lib/rancher/k3s/server/db/etcd/config | grep 'client-cert-auth'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--client-cert-auth' \u304c\u5b58\u5728\u3059\u308b OR 'client-cert-auth' \u304c 'true' \u306b\u7b49\u3057\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"  client-cert-auth: true\n"})})]}),"\n",(0,i.jsx)(r.h3,{id:"23---auto-tls-\u5f15\u6570\u304c-true-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"2.3 --auto-tls \u5f15\u6570\u304c true \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"if grep -q '^auto-tls' /var/lib/rancher/k3s/server/db/etcd/config;then grep '^auto-tls' /var/lib/rancher/k3s/server/db/etcd/config;else echo 'notset';fi\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--auto-tls' \u304c\u5b58\u5728\u3057\u306a\u3044 OR '--auto-tls' \u304c\u5b58\u5728\u3059\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"notset\n"})})]}),"\n",(0,i.jsx)(r.h3,{id:"24---peer-cert-file-\u304a\u3088\u3073---peer-key-file-\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"2.4 --peer-cert-file \u304a\u3088\u3073 --peer-key-file \u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"grep -A 4 'peer-transport-security' /var/lib/rancher/k3s/server/db/etcd/config | grep -E 'cert-file|key-file'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," 'cert-file' \u304c\u5b58\u5728\u3059\u308b AND 'key-file' \u304c\u5b58\u5728\u3059\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"  cert-file: /var/lib/rancher/k3s/server/tls/etcd/peer-server-client.crt\n  key-file: /var/lib/rancher/k3s/server/tls/etcd/peer-server-client.key\n"})})]}),"\n",(0,i.jsx)(r.h3,{id:"25---peer-client-cert-auth-\u5f15\u6570\u304c-true-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"2.5 --peer-client-cert-auth \u5f15\u6570\u304c true \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"grep -A 4 'peer-transport-security' /var/lib/rancher/k3s/server/db/etcd/config | grep 'client-cert-auth'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--client-cert-auth' \u304c\u5b58\u5728\u3059\u308b OR 'client-cert-auth' \u304c 'true' \u306b\u7b49\u3057\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"  client-cert-auth: true\n"})})]}),"\n",(0,i.jsx)(r.h3,{id:"26---peer-auto-tls-\u5f15\u6570\u304c-true-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"2.6 --peer-auto-tls \u5f15\u6570\u304c true \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"if grep -q '^peer-auto-tls' /var/lib/rancher/k3s/server/db/etcd/config;then grep '^peer-auto-tls' /var/lib/rancher/k3s/server/db/etcd/config;else echo 'notset';fi\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--peer-auto-tls' \u304c\u5b58\u5728\u3057\u306a\u3044 OR '--peer-auto-tls' \u304c\u5b58\u5728\u3059\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"notset\n"})})]}),"\n",(0,i.jsx)(r.h3,{id:"27-etcd-\u306b\u5bfe\u3057\u3066\u4e00\u610f\u306e\u8a3c\u660e\u66f8\u8a8d\u8a3c\u5c40\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"2.7 Etcd \u306b\u5bfe\u3057\u3066\u4e00\u610f\u306e\u8a3c\u660e\u66f8\u8a8d\u8a3c\u5c40\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u5408\u683c"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"if grep -q 'trusted-ca-file' /var/lib/rancher/k3s/server/db/etcd/config;then grep 'trusted-ca-file' /var/lib/rancher/k3s/server/db/etcd/config;else echo 'notset';fi\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," 'trusted-ca-file' \u304c\u5b58\u5728\u3059\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"  trusted-ca-file: /var/lib/rancher/k3s/server/tls/etcd/server-ca.crt\n  trusted-ca-file: /var/lib/rancher/k3s/server/tls/etcd/peer-ca.crt\n"})})]}),"\n",(0,i.jsx)(r.h2,{id:"41-\u30ef\u30fc\u30ab\u30fc\u30ce\u30fc\u30c9\u69cb\u6210\u30d5\u30a1\u30a4\u30eb",children:"4.1 \u30ef\u30fc\u30ab\u30fc\u30ce\u30fc\u30c9\u69cb\u6210\u30d5\u30a1\u30a4\u30eb"}),"\n",(0,i.jsx)(r.h3,{id:"411-kubelet-\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c-600-\u307e\u305f\u306f\u305d\u308c\u4ee5\u4e0a\u306b\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"4.1.1 kubelet \u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u304c 600 \u307e\u305f\u306f\u305d\u308c\u4ee5\u4e0a\u306b\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u5404\u30ef\u30fc\u30ab\u30fc\u30ce\u30fc\u30c9\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08\u30b7\u30b9\u30c6\u30e0\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u306b\u57fa\u3065\u304f\uff09\u3002\n\u4f8b: chmod 600 /etc/systemd/system/kubelet.service.d/10-kubeadm.conf"]}),"\n",(0,i.jsxs)(r.h3,{id:"412-kubelet-\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304c-root-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:["4.1.2 kubelet \u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304c root",":root"," \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u5404\u30ef\u30fc\u30ab\u30fc\u30ce\u30fc\u30c9\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08\u30b7\u30b9\u30c6\u30e0\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u306b\u57fa\u3065\u304f\uff09\u3002\n\u4f8b:\nchown root",":root"," /etc/systemd/system/kubelet.service.d/10-kubeadm.conf"]}),"\n",(0,i.jsx)(r.h3,{id:"413-\u30d7\u30ed\u30ad\u30b7-kubeconfig-\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c-600-\u307e\u305f\u306f\u305d\u308c\u3088\u308a\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",children:"4.1.3 \u30d7\u30ed\u30ad\u30b7 kubeconfig \u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u3001\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c 600 \u307e\u305f\u306f\u305d\u308c\u3088\u308a\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," WARN"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u5404\u30ef\u30fc\u30ab\u30fc\u30ce\u30fc\u30c9\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08\u30b7\u30b9\u30c6\u30e0\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u306b\u57fa\u3065\u304f\uff09\u3002\n\u4f8b\u3048\u3070\u3001\nchmod 600 /var/lib/rancher/k3s/agent/kubeproxy.kubeconfig"]}),"\n",(0,i.jsxs)(r.h3,{id:"414-\u30d7\u30ed\u30ad\u30b7-kubeconfig-\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u6240\u6709\u8005\u304c-root-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",children:["4.1.4 \u30d7\u30ed\u30ad\u30b7 kubeconfig \u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u3001\u6240\u6709\u8005\u304c root",":root"," \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," PASS"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"/bin/sh -c 'if test -e /var/lib/rancher/k3s/agent/kubeproxy.kubeconfig; then stat -c %U:%G /var/lib/rancher/k3s/agent/kubeproxy.kubeconfig; fi' \n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," 'root",":root","' \u304c\u5b58\u5728\u3059\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"root:root\n"})})]}),"\n",(0,i.jsx)(r.h3,{id:"415---kubeconfig-kubeletconf-\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c-600-\u307e\u305f\u306f\u305d\u308c\u3088\u308a\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5",children:"4.1.5 --kubeconfig kubelet.conf \u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c 600 \u307e\u305f\u306f\u305d\u308c\u3088\u308a\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," PASS"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"stat -c %a /var/lib/rancher/k3s/agent/kubelet.kubeconfig \n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '600' \u304c '600' \u3068\u7b49\u3057\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"600\n"})})]}),"\n",(0,i.jsxs)(r.h3,{id:"416---kubeconfig-kubeletconf-\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304c-root-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5",children:["4.1.6 --kubeconfig kubelet.conf \u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304c root",":root"," \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5)"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," PASS"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"stat -c %U:%G /var/lib/rancher/k3s/agent/kubelet.kubeconfig\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," 'root",":root","' \u304c 'root",":root","' \u3068\u7b49\u3057\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"root:root\n"})})]}),"\n",(0,i.jsx)(r.h3,{id:"417-\u8a3c\u660e\u66f8\u8a8d\u8a3c\u5c40\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c-600-\u307e\u305f\u306f\u305d\u308c\u3088\u308a\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",children:"4.1.7 \u8a3c\u660e\u66f8\u8a8d\u8a3c\u5c40\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c 600 \u307e\u305f\u306f\u305d\u308c\u3088\u308a\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," WARN"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001--client-ca-file \u306e\u30d5\u30a1\u30a4\u30eb\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\nchmod 600 <filename>"]}),"\n",(0,i.jsxs)(r.h3,{id:"418-\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u8a8d\u8a3c\u5c40\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304c-root-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",children:["4.1.8 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u8a8d\u8a3c\u5c40\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304c root",":root"," \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," PASS"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"stat -c %U:%G /var/lib/rancher/k3s/server/tls/client-ca.crt\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," 'root",":root","' \u304c\u5b58\u5728\u3059\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:"root:root\n"})})]}),"\n",(0,i.jsx)(r.h3,{id:"419-kubelet-configyaml-\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c-600-\u307e\u305f\u306f\u305d\u308c\u3088\u308a\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",children:"4.1.9 kubelet config.yaml \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c 600 \u307e\u305f\u306f\u305d\u308c\u3088\u308a\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08\u76e3\u67fb\u30b9\u30c6\u30c3\u30d7\u3067\u7279\u5b9a\u3055\u308c\u305f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u3092\u4f7f\u7528\uff09\u3002\nchmod 600 /var/lib/kubelet/config.yaml"]}),"\n",(0,i.jsxs)(r.h3,{id:"4110-kubelet-configyaml-\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304c-root-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",children:["4.1.10 kubelet config.yaml \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u6240\u6709\u8005\u304c root",":root"," \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08\u76e3\u67fb\u30b9\u30c6\u30c3\u30d7\u3067\u7279\u5b9a\u3055\u308c\u305f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u3092\u4f7f\u7528\uff09\u3002\nchown root",":root"," /var/lib/kubelet/config.yaml"]}),"\n",(0,i.jsx)(r.h2,{id:"42-kubelet",children:"4.2 Kubelet"}),"\n",(0,i.jsx)(r.h3,{id:"421---anonymous-auth-\u5f15\u6570\u304c-false-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5",children:"4.2.1 --anonymous-auth \u5f15\u6570\u304c false \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," PASS"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'/bin/sh -c \'if test $(journalctl -D /var/log/journal -u k3s | grep "Running kube-apiserver" | wc -l) -gt 0; then journalctl -D /var/log/journal -u k3s | grep "Running kube-apiserver" | tail -n1 | grep "anonymous-auth" | grep -v grep; else echo "--anonymous-auth=false"; fi\' \n'})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--anonymous-auth' \u304c 'false' \u3068\u7b49\u3057\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'May 15 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"422---authorization-mode-\u5f15\u6570\u304c-alwaysallow-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5",children:"4.2.2 --authorization-mode \u5f15\u6570\u304c AlwaysAllow \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," PASS"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'/bin/sh -c \'if test $(journalctl -D /var/log/journal -u k3s | grep "Running kube-apiserver" | wc -l) -gt 0; then journalctl -D /var/log/journal -u k3s | grep "Running kube-apiserver" | tail -n1 | grep "authorization-mode" | grep -v grep; else echo "--authorization-mode=Webhook"; fi\' \n'})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--authorization-mode' \u306b 'AlwaysAllow' \u304c\u542b\u307e\u308c\u3066\u3044\u306a\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'May 15 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"423---client-ca-file-\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5",children:"4.2.3 --client-ca-file \u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," PASS"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'/bin/sh -c \'if test $(journalctl -D /var/log/journal -u k3s | grep "Running kube-apiserver" | wc -l) -gt 0; then journalctl -D /var/log/journal -u k3s | grep "Running kube-apiserver" | tail -n1 | grep "client-ca-file" | grep -v grep; else echo "--client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt"; fi\' \n'})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--client-ca-file' \u304c\u5b58\u5728\u3059\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'May 15 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=\n2024\u5e745\u670815\u65e5 18:38:23 server-0 k3s[2318]: time="2024-05-15T18:38:23Z" level=info msg="Running kube-apiserver --advertise-address=10.10.10.100 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --audit-log-maxage=30 --audit-log-maxbackup=10 --audit-log-maxsize=100 --audit-log-path=/var/lib/rancher/k3s/server/logs/audit.log --audit-policy-file=/var/lib/rancher/k3s/server/audit.yaml --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction,NamespaceLifecycle,ServiceAccount,PodSecurityPolicy --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --encryption-provider-config=/var/lib/rancher/k3s/server/cred/encryption-config.json --etcd-cafile=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt --etcd-certfile=/var/lib/rancher/k3s/server/tls/etcd/client.crt --etcd-keyfile=/var/lib/rancher/k3s/server/tls/etcd/client.key --etcd-servers=https://127.0.0.1:2379 --feature-gates=JobTrackingWithFinalizers=true --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-lookup=true --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"424---read-only-port-\u5f15\u6570\u304c-0-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",children:"4.2.4 --read-only-port \u5f15\u6570\u304c 0 \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," PASS"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal -u k3s | grep 'Running kubelet' | tail -n1 | grep 'read-only-port' \n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--read-only-port' \u304c '0' \u306b\u7b49\u3057\u3044\u3001\u307e\u305f\u306f '--read-only-port' \u304c\u5b58\u5728\u3057\u306a\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'2024\u5e745\u670815\u65e5 18:38:24 server-0 k3s[2318]: time="2024-05-15T18:38:24Z" level=info msg="Running kubelet --address=0.0.0.0 --allowed-unsafe-sysctls=net.ipv4.ip_forward,net.ipv6.conf.all.forwarding --anonymous-auth=false --authentication-token-webhook=true --authorization-mode=Webhook --cgroup-driver=systemd --client-ca-file=/var/lib/rancher/k3s/agent/client-ca.crt --cloud-provider=external --cluster-dns=10.43.0.10 --cluster-domain=cluster.local --container-runtime-endpoint=unix:///run/k3s/containerd/containerd.sock --containerd=/run/k3s/containerd/containerd.sock --event-qps=0 --eviction-hard=imagefs.available<5%,nodefs.available<5% --eviction-minimum-reclaim=imagefs.available=10%,nodefs.available=10% --fail-swap-on=false --healthz-bind-address=127.0.0.1 --hostname-override=server-0 --kubeconfig=/var/lib/rancher/k3s/agent/kubelet.kubeconfig --make-iptables-util-chains=true --node-ip=10.10.10.100 --node-labels= --pod-infra-container-image=rancher/mirrored-pause:3.6 --pod-manifest-path=/var/lib/rancher/k3s/agent/pod-manifests --protect-kernel-defaults=true --read-only-port=0 --resolv-conf=/run/systemd/resolve/resolv.conf --serialize-image-pulls=false --streaming-connection-idle-timeout=5m --tls-cert-file=/var/lib/rancher/k3s/agent/serving-kubelet.crt --tls-private-key-file=/var/lib/rancher/k3s/agent/serving-kubelet.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"425---streaming-connection-idle-timeout-\u5f15\u6570\u304c-0-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",children:"4.2.5 --streaming-connection-idle-timeout \u5f15\u6570\u304c 0 \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," PASS"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal -u k3s | grep 'Running kubelet' | tail -n1 | grep 'streaming-connection-idle-timeout'\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--streaming-connection-idle-timeout' \u304c '0' \u306b\u7b49\u3057\u304f\u306a\u3044\u3001\u307e\u305f\u306f '--streaming-connection-idle-timeout' \u304c\u5b58\u5728\u3057\u306a\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'2024\u5e745\u670815\u65e5 18:38:24 server-0 k3s[2318]: time="2024-05-15T18:38:24Z" level=info msg="Running kubelet --address=0.0.0.0 --allowed-unsafe-sysctls=net.ipv4.ip_forward,net.ipv6.conf.all.forwarding --anonymous-auth=false --authentication-token-webhook=true --authorization-mode=Webhook --cgroup-driver=systemd --client-ca-file=/var/lib/rancher/k3s/agent/client-ca.crt --cloud-provider=external --cluster-dns=10.43.0.10 --cluster-domain=cluster.local --container-runtime-endpoint=unix:///run/k3s/containerd/containerd.sock --containerd=/run/k3s/containerd/containerd.sock --event-qps=0 --eviction-hard=imagefs.available<5%,nodefs.available<5% --eviction-minimum-reclaim=imagefs.available=10%,nodefs.available=10% --fail-swap-on=false --healthz-bind-address=127.0.0.1 --hostname-override=server-0 --kubeconfig=/var/lib/rancher/k3s/agent/kubelet.kubeconfig --make-iptables-util-chains=true --node-ip=10.10.10.100 --node-labels= --pod-infra-container-image=rancher/mirrored-pause:3.6 --pod-manifest-path=/var/lib/rancher/k3s/agent/pod-manifests --protect-kernel-defaults=true --read-only-port=0 --resolv-conf=/run/systemd/resolve/resolv.conf --serialize-image-pulls=false --streaming-connection-idle-timeout=5m --tls-cert-file=/var/lib/rancher/k3s/agent/serving-kubelet.crt --tls-private-key-file=/var/lib/rancher/k3s/agent/serving-kubelet.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"426---protect-kernel-defaults-\u5f15\u6570\u304c-true-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"4.2.6 --protect-kernel-defaults \u5f15\u6570\u304c true \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\nKubelet \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u3066 ",(0,i.jsx)(r.code,{children:"protectKernelDefaults"})," \u3092 ",(0,i.jsx)(r.code,{children:"true"})," \u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u5404\u30ef\u30fc\u30ab\u30fc\u30ce\u30fc\u30c9\u306e kubelet \u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\n/etc/systemd/system/kubelet.service.d/10-kubeadm.conf \u3092\u7de8\u96c6\u3057\u3001KUBELET_SYSTEM_PODS_ARGS \u5909\u6570\u306b\u4ee5\u4e0b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n--protect-kernel-defaults=true\n\u30b7\u30b9\u30c6\u30e0\u306b\u57fa\u3065\u3044\u3066\u3001kubelet \u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070:\nsystemctl daemon-reload\nsystemctl restart kubelet.service"]}),"\n",(0,i.jsx)(r.h3,{id:"427---make-iptables-util-chains-\u5f15\u6570\u304c-true-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u81ea\u52d5\u5316",children:"4.2.7 --make-iptables-util-chains \u5f15\u6570\u304c true \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\nKubelet \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u3066 ",(0,i.jsx)(r.code,{children:"makeIPTablesUtilChains"})," \u3092 ",(0,i.jsx)(r.code,{children:"true"})," \u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u5404\u30ef\u30fc\u30ab\u30fc\u30ce\u30fc\u30c9\u306e kubelet \u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\n/etc/systemd/system/kubelet.service.d/10-kubeadm.conf \u3092\u7de8\u96c6\u3057\u3001\nKUBELET_SYSTEM_PODS_ARGS \u5909\u6570\u304b\u3089 --make-iptables-util-chains \u5f15\u6570\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\u30b7\u30b9\u30c6\u30e0\u306b\u57fa\u3065\u3044\u3066\u3001kubelet \u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070:\nsystemctl daemon-reload\nsystemctl restart kubelet.service"]}),"\n",(0,i.jsx)(r.h3,{id:"428---hostname-override-\u5f15\u6570\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",children:"4.2.8 --hostname-override \u5f15\u6570\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8a72\u5f53\u306a\u3057"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u5404\u30ef\u30fc\u30ab\u30fc\u30ce\u30fc\u30c9\u306e kubelet \u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb /etc/systemd/system/kubelet.service.d/10-kubeadm.conf \u3092\u7de8\u96c6\u3057\u3001\nKUBELET_SYSTEM_PODS_ARGS \u5909\u6570\u304b\u3089 --hostname-override \u5f15\u6570\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\u30b7\u30b9\u30c6\u30e0\u306b\u57fa\u3065\u3044\u3066\u3001kubelet \u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070:\nsystemctl daemon-reload\nsystemctl restart kubelet.service"]}),"\n",(0,i.jsx)(r.h3,{id:"429-eventrecordqps-\u5f15\u6570\u304c\u9069\u5207\u306a\u30a4\u30d9\u30f3\u30c8\u30ad\u30e3\u30d7\u30c1\u30e3\u3092\u78ba\u4fdd\u3059\u308b\u30ec\u30d9\u30eb\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",children:"4.2.9 eventRecordQPS \u5f15\u6570\u304c\u9069\u5207\u306a\u30a4\u30d9\u30f3\u30c8\u30ad\u30e3\u30d7\u30c1\u30e3\u3092\u78ba\u4fdd\u3059\u308b\u30ec\u30d9\u30eb\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," WARN"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\nKubelet \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u3066 ",(0,i.jsx)(r.code,{children:"eventRecordQPS"})," \u3092\u9069\u5207\u306a\u30ec\u30d9\u30eb\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u5404\u30ef\u30fc\u30ab\u30fc\u30ce\u30fc\u30c9\u306e kubelet \u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\n/etc/systemd/system/kubelet.service.d/10-kubeadm.conf \u3092\u7de8\u96c6\u3057\u3001\nKUBELET_SYSTEM_PODS_ARGS \u5909\u6570\u306b\u4ee5\u4e0b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30b7\u30b9\u30c6\u30e0\u306b\u57fa\u3065\u3044\u3066\u3001kubelet \u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070:\nsystemctl daemon-reload\nsystemctl restart kubelet.service"]}),"\n",(0,i.jsx)(r.h3,{id:"4210---tls-cert-file-\u304a\u3088\u3073---tls-private-key-file-\u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",children:"4.2.10 --tls-cert-file \u304a\u3088\u3073 --tls-private-key-file \u5f15\u6570\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," PASS"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u76e3\u67fb:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"journalctl -D /var/log/journal -u k3s | grep 'Running kubelet' | tail -n1\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--tls-cert-file' \u304c\u5b58\u5728\u3057\u3001\u304b\u3064 '--tls-private-key-file' \u304c\u5b58\u5728\u3059\u308b"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'2024\u5e745\u670815\u65e5 18:38:24 server-0 k3s[2318]: time="2024-05-15T18:38:24Z" level=info msg="Running kubelet --address=0.0.0.0 --allowed-unsafe-sysctls=net.ipv4.ip_forward,net.ipv6.conf.all.forwarding --anonymous-auth=false --authentication-token-webhook=true --authorization-mode=Webhook --cgroup-driver=systemd --client-ca-file=/var/lib/rancher/k3s/agent/client-ca.crt --cloud-provider=external --cluster-dns=10.43.0.10 --cluster-domain=cluster.local --container-runtime-endpoint=unix:///run/k3s/containerd/containerd.sock --containerd=/run/k3s/containerd/containerd.sock --event-qps=0 --eviction-hard=imagefs.available<5%,nodefs.available<5% --eviction-minimum-reclaim=imagefs.available=10%,nodefs.available=10% --fail-swap-on=false --healthz-bind-address=127.0.0.1 --hostname-override=server-0 --kubeconfig=/var/lib/rancher/k3s/agent/kubelet.kubeconfig --make-iptables-util-chains=true --node-ip=10.10.10.100 --node-labels= --pod-infra-container-image=rancher/mirrored-pause:3.6 --pod-manifest-path=/var/lib/rancher/k3s/agent/pod-manifests --protect-kernel-defaults=true --read-only-port=0 --resolv-conf=/run/systemd/resolve/resolv.conf --serialize-image-pulls=false --streaming-connection-idle-timeout=5m --tls-cert-file=/var/lib/rancher/k3s/agent/serving-kubelet.crt --tls-private-key-file=/var/lib/rancher/k3s/agent/serving-kubelet.key"\n'})})]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"</details>\n\n### 4.2.11 --rotate-certificates \u5f15\u6570\u304c false \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u81ea\u52d5\u5316)\n\n**\u7d50\u679c:** \u5408\u683c\n\n**\u76e3\u67fb:**\n```bash\njournalctl -D /var/log/journal -u k3s | grep 'Running kubelet' | tail -n1\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c:"})," '--rotate-certificates' \u304c\u5b58\u5728\u3059\u308b\u3001\u307e\u305f\u306f '--rotate-certificates' \u304c\u5b58\u5728\u3057\u306a\u3044"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"\u8fd4\u3055\u308c\u305f\u5024:"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-console",children:'May 15 18:38:24 server-0 k3s[2318]: time="2024-05-15T18:38:24Z" level=info msg="Running kubelet --address=0.0.0.0 --allowed-unsafe-sysctls=net.ipv4.ip_forward,net.ipv6.conf.all.forwarding --anonymous-auth=false --authentication-token-webhook=true --authorization-mode=Webhook --cgroup-driver=systemd --client-ca-file=/var/lib/rancher/k3s/agent/client-ca.crt --cloud-provider=external --cluster-dns=10.43.0.10 --cluster-domain=cluster.local --container-runtime-endpoint=unix:///run/k3s/containerd/containerd.sock --containerd=/run/k3s/containerd/containerd.sock --event-qps=0 --eviction-hard=imagefs.available<5%,nodefs.available<5% --eviction-minimum-reclaim=imagefs.available=10%,nodefs.available=10% --fail-swap-on=false --healthz-bind-address=127.0.0.1 --hostname-override=server-0 --kubeconfig=/var/lib/rancher/k3s/agent/kubelet.kubeconfig --make-iptables-util-chains=true --node-ip=10.10.10.100 --node-labels= --pod-infra-container-image=rancher/mirrored-pause:3.6 --pod-manifest-path=/var/lib/rancher/k3s/agent/pod-manifests --protect-kernel-defaults=true --read-only-port=0 --resolv-conf=/run/systemd/resolve/resolv.conf --serialize-image-pulls=false --streaming-connection-idle-timeout=5m --tls-cert-file=/var/lib/rancher/k3s/agent/serving-kubelet.crt --tls-private-key-file=/var/lib/rancher/k3s/agent/serving-kubelet.key"\n'})})]}),"\n",(0,i.jsx)(r.h3,{id:"4212-rotatekubeletservercertificate-\u5f15\u6570\u304c-true-\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",children:"4.2.12 RotateKubeletServerCertificate \u5f15\u6570\u304c true \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u5404\u30ef\u30fc\u30ab\u30fc\u30ce\u30fc\u30c9\u306e kubelet \u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb /etc/systemd/system/kubelet.service.d/10-kubeadm.conf \u3092\u7de8\u96c6\u3057\u3001KUBELET_CERTIFICATE_ARGS \u5909\u6570\u306b\u4ee5\u4e0b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n--feature-gates=RotateKubeletServerCertificate=true\n\u30b7\u30b9\u30c6\u30e0\u306b\u57fa\u3065\u3044\u3066\u3001kubelet \u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\u4f8b:\nsystemctl daemon-reload\nsystemctl restart kubelet.service"]}),"\n",(0,i.jsx)(r.h3,{id:"4213-kubelet-\u304c\u5f37\u529b\u306a\u6697\u53f7\u5316\u30b9\u30a4\u30fc\u30c8\u306e\u307f\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",children:"4.2.13 Kubelet \u304c\u5f37\u529b\u306a\u6697\u53f7\u5316\u30b9\u30a4\u30fc\u30c8\u306e\u307f\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\nKubelet \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u3066 ",(0,i.jsx)(r.code,{children:"TLSCipherSuites"})," \u3092\u4ee5\u4e0b\u306e\u5024\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nTLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_RSA_WITH_AES_256_GCM_SHA384,TLS_RSA_WITH_AES_128_GCM_SHA256\n\u307e\u305f\u306f\u3053\u308c\u3089\u306e\u5024\u306e\u30b5\u30d6\u30bb\u30c3\u30c8\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u5b9f\u884c\u53ef\u80fd\u306a\u5f15\u6570\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u5404\u30ef\u30fc\u30ab\u30fc\u30ce\u30fc\u30c9\u306e kubelet \u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb /etc/systemd/system/kubelet.service.d/10-kubeadm.conf \u3092\u7de8\u96c6\u3057\u3001--tls-cipher-suites \u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u307e\u305f\u306f\u3053\u308c\u3089\u306e\u5024\u306e\u30b5\u30d6\u30bb\u30c3\u30c8\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n--tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_RSA_WITH_AES_256_GCM_SHA384,TLS_RSA_WITH_AES_128_GCM_SHA256\n\u30b7\u30b9\u30c6\u30e0\u306b\u57fa\u3065\u3044\u3066\u3001kubelet \u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\u4f8b:\nsystemctl daemon-reload\nsystemctl restart kubelet.service"]}),"\n",(0,i.jsx)(r.h2,{id:"51-rbac-\u3068\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8",children:"5.1 RBAC \u3068\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8"}),"\n",(0,i.jsx)(r.h3,{id:"511-cluster-admin-\u30ed\u30fc\u30eb\u304c\u5fc5\u8981\u306a\u5834\u5408\u306b\u306e\u307f\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",children:"5.1.1 cluster-admin \u30ed\u30fc\u30eb\u304c\u5fc5\u8981\u306a\u5834\u5408\u306b\u306e\u307f\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\ncluster-admin \u30ed\u30fc\u30eb\u3078\u306e\u3059\u3079\u3066\u306e clusterrolebinding \u3092\u7279\u5b9a\u3057\u307e\u3059\u3002\u305d\u308c\u3089\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3001\u307e\u305f\u3053\u306e\u30ed\u30fc\u30eb\u304c\u5fc5\u8981\u304b\u3069\u3046\u304b\u3001\u307e\u305f\u306f\u3088\u308a\u5c11\u306a\u3044\u7279\u6a29\u306e\u30ed\u30fc\u30eb\u3092\u4f7f\u7528\u3067\u304d\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\u53ef\u80fd\u306a\u5834\u5408\u306f\u3001\u307e\u305a\u30e6\u30fc\u30b6\u30fc\u3092\u4f4e\u7279\u6a29\u306e\u30ed\u30fc\u30eb\u306b\u30d0\u30a4\u30f3\u30c9\u3057\u3001\u305d\u306e\u5f8c cluster-admin \u30ed\u30fc\u30eb\u3078\u306e clusterrolebinding \u3092\u524a\u9664\u3057\u307e\u3059:\nkubectl delete clusterrolebinding [name]"]}),"\n",(0,i.jsx)(r.h3,{id:"512-\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u624b\u52d5",children:"5.1.2 \u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u53ef\u80fd\u306a\u5834\u5408\u306f\u3001\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3078\u306e get\u3001list\u3001\u304a\u3088\u3073 watch \u30a2\u30af\u30bb\u30b9\u3092\u524a\u9664\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"513-\u30ed\u30fc\u30eb\u304a\u3088\u3073\u30af\u30e9\u30b9\u30bf\u30fc\u30ed\u30fc\u30eb\u3067\u306e\u30ef\u30a4\u30eb\u30c9\u30ab\u30fc\u30c9\u306e\u4f7f\u7528\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u624b\u52d5",children:"5.1.3 \u30ed\u30fc\u30eb\u304a\u3088\u3073\u30af\u30e9\u30b9\u30bf\u30fc\u30ed\u30fc\u30eb\u3067\u306e\u30ef\u30a4\u30eb\u30c9\u30ab\u30fc\u30c9\u306e\u4f7f\u7528\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u53ef\u80fd\u306a\u5834\u5408\u306f\u3001clusterroles \u304a\u3088\u3073 roles \u3067\u306e\u30ef\u30a4\u30eb\u30c9\u30ab\u30fc\u30c9\u306e\u4f7f\u7528\u3092\u7279\u5b9a\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u307e\u305f\u306f\u30a2\u30af\u30b7\u30e7\u30f3\u306b\u7f6e\u304d\u63db\u3048\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"514-\u30dd\u30c3\u30c9\u306e\u4f5c\u6210\u30a2\u30af\u30bb\u30b9\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u624b\u52d5",children:"5.1.4 \u30dd\u30c3\u30c9\u306e\u4f5c\u6210\u30a2\u30af\u30bb\u30b9\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u53ef\u80fd\u306a\u5834\u5408\u306f\u3001\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u30dd\u30c3\u30c9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3078\u306e\u4f5c\u6210\u30a2\u30af\u30bb\u30b9\u3092\u524a\u9664\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"515-\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u7a4d\u6975\u7684\u306b\u4f7f\u7528\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",children:"5.1.5 \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u7a4d\u6975\u7684\u306b\u4f7f\u7528\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\nKubernetes \u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u304c Kubernetes API \u30b5\u30fc\u30d0\u30fc\u3078\u306e\u7279\u5b9a\u306e\u30a2\u30af\u30bb\u30b9\u3092\u5fc5\u8981\u3068\u3059\u308b\u5834\u5408\u306f\u3001\u660e\u793a\u7684\u306a\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u5404\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u3001\u4ee5\u4e0b\u306e\u5024\u3092\u542b\u3081\u307e\u3059:\nautomountServiceAccountToken: false"]}),"\n",(0,i.jsx)(r.h3,{id:"516-\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u30c8\u30fc\u30af\u30f3\u304c\u5fc5\u8981\u306a\u5834\u5408\u306b\u306e\u307f\u30de\u30a6\u30f3\u30c8\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",children:"5.1.6 \u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u30c8\u30fc\u30af\u30f3\u304c\u5fc5\u8981\u306a\u5834\u5408\u306b\u306e\u307f\u30de\u30a6\u30f3\u30c8\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u30c8\u30fc\u30af\u30f3\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044\u30dd\u30c3\u30c9\u304a\u3088\u3073\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u5b9a\u7fa9\u3092\u5909\u66f4\u3057\u3066\u7121\u52b9\u306b\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsxs)(r.h3,{id:"517-system-\u30b0\u30eb\u30fc\u30d7\u306e\u4f7f\u7528\u3092\u907f\u3051\u308b-\u624b\u52d5",children:["5.1.7 system",":masters"," \u30b0\u30eb\u30fc\u30d7\u306e\u4f7f\u7528\u3092\u907f\u3051\u308b (\u624b\u52d5)"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u3059\u3079\u3066\u306e\u30e6\u30fc\u30b6\u30fc\u304b\u3089 system",":masters"," \u30b0\u30eb\u30fc\u30d7\u3092\u524a\u9664\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"518-kubernetes-\u30af\u30e9\u30b9\u30bf\u30fc\u3067\u306e-bindimpersonate\u304a\u3088\u3073-escalate-\u6a29\u9650\u306e\u4f7f\u7528\u3092\u5236\u9650\u3059\u308b-\u624b\u52d5",children:"5.1.8 Kubernetes \u30af\u30e9\u30b9\u30bf\u30fc\u3067\u306e Bind\u3001Impersonate\u3001\u304a\u3088\u3073 Escalate \u6a29\u9650\u306e\u4f7f\u7528\u3092\u5236\u9650\u3059\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u53ef\u80fd\u306a\u5834\u5408\u306f\u3001\u30b5\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089 impersonate\u3001bind\u3001\u304a\u3088\u3073 escalate \u6a29\u9650\u3092\u524a\u9664\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h2,{id:"52-\u30dd\u30c3\u30c9\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u57fa\u6e96",children:"5.2 \u30dd\u30c3\u30c9\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u57fa\u6e96"}),"\n",(0,i.jsx)(r.h3,{id:"521-\u30af\u30e9\u30b9\u30bf\u30fc\u306b\u5c11\u306a\u304f\u3068\u30821\u3064\u306e\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30dd\u30ea\u30b7\u30fc\u5236\u5fa1\u30e1\u30ab\u30cb\u30ba\u30e0\u304c\u5b58\u5728\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",children:"5.2.1 \u30af\u30e9\u30b9\u30bf\u30fc\u306b\u5c11\u306a\u304f\u3068\u30821\u3064\u306e\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30dd\u30ea\u30b7\u30fc\u5236\u5fa1\u30e1\u30ab\u30cb\u30ba\u30e0\u304c\u5b58\u5728\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\nPod Security Admission \u307e\u305f\u306f\u5916\u90e8\u30dd\u30ea\u30b7\u30fc\u5236\u5fa1\u30b7\u30b9\u30c6\u30e0\u304c\u3001\u30e6\u30fc\u30b6\u30fc\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u3092\u542b\u3080\u3059\u3079\u3066\u306e\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306b\u5bfe\u3057\u3066\u5b58\u5728\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"522-\u7279\u6a29\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u624b\u52d5",children:"5.2.2 \u7279\u6a29\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30e6\u30fc\u30b6\u30fc\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u3092\u542b\u3080\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u5404\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306b\u30dd\u30ea\u30b7\u30fc\u3092\u8ffd\u52a0\u3057\u3001\u7279\u6a29\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u5236\u9650\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"523-\u30db\u30b9\u30c8\u30d7\u30ed\u30bb\u30b9id\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u3092\u5171\u6709\u3057\u3088\u3046\u3068\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u81ea\u52d5\u5316",children:"5.2.3 \u30db\u30b9\u30c8\u30d7\u30ed\u30bb\u30b9ID\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u3092\u5171\u6709\u3057\u3088\u3046\u3068\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30e6\u30fc\u30b6\u30fc\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u3092\u542b\u3080\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u5404\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306b\u30dd\u30ea\u30b7\u30fc\u3092\u8ffd\u52a0\u3057\u3001",(0,i.jsx)(r.code,{children:"hostPID"})," \u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u5236\u9650\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"524-\u30db\u30b9\u30c8ipc\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u3092\u5171\u6709\u3057\u3088\u3046\u3068\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u81ea\u52d5\u5316",children:"5.2.4 \u30db\u30b9\u30c8IPC\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u3092\u5171\u6709\u3057\u3088\u3046\u3068\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30e6\u30fc\u30b6\u30fc\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u3092\u542b\u3080\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u5404\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306b\u30dd\u30ea\u30b7\u30fc\u3092\u8ffd\u52a0\u3057\u3001",(0,i.jsx)(r.code,{children:"hostIPC"})," \u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u5236\u9650\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"525-\u30db\u30b9\u30c8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u3092\u5171\u6709\u3057\u3088\u3046\u3068\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u81ea\u52d5\u5316",children:"5.2.5 \u30db\u30b9\u30c8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u3092\u5171\u6709\u3057\u3088\u3046\u3068\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30e6\u30fc\u30b6\u30fc\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u3092\u542b\u3080\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u5404\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306b\u30dd\u30ea\u30b7\u30fc\u3092\u8ffd\u52a0\u3057\u3001",(0,i.jsx)(r.code,{children:"hostNetwork"})," \u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u5236\u9650\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"526-allowprivilegeescalation-\u3092\u6301\u3064\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u81ea\u52d5\u5316",children:"5.2.6 allowPrivilegeEscalation \u3092\u6301\u3064\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30e6\u30fc\u30b6\u30fc\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u3092\u542b\u3080\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u5404\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306b\u30dd\u30ea\u30b7\u30fc\u3092\u8ffd\u52a0\u3057\u3001",(0,i.jsx)(r.code,{children:".spec.allowPrivilegeEscalation"})," \u304c ",(0,i.jsx)(r.code,{children:"true"})," \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u5236\u9650\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"527-\u30eb\u30fc\u30c8\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u81ea\u52d5\u5316",children:"5.2.7 \u30eb\u30fc\u30c8\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u5404\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306b\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3057\u3001",(0,i.jsx)(r.code,{children:"MustRunAsNonRoot"})," \u307e\u305f\u306f UID \u306e\u7bc4\u56f2\u306b 0 \u3092\u542b\u307e\u306a\u3044 ",(0,i.jsx)(r.code,{children:"MustRunAs"})," \u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"528-net_raw-\u6a29\u9650\u3092\u6301\u3064\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u81ea\u52d5\u5316",children:"5.2.8 NET_RAW \u6a29\u9650\u3092\u6301\u3064\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30e6\u30fc\u30b6\u30fc\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u3092\u542b\u3080\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u5404\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306b\u30dd\u30ea\u30b7\u30fc\u3092\u8ffd\u52a0\u3057\u3001",(0,i.jsx)(r.code,{children:"NET_RAW"})," \u6a29\u9650\u3092\u6301\u3064\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u5236\u9650\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"529-\u8ffd\u52a0\u306e\u6a29\u9650\u3092\u6301\u3064\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u81ea\u52d5\u5316",children:"5.2.9 \u8ffd\u52a0\u306e\u6a29\u9650\u3092\u6301\u3064\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u81ea\u52d5\u5316)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n",(0,i.jsx)(r.code,{children:"allowedCapabilities"})," \u304c\u7a7a\u306e\u914d\u5217\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u9650\u308a\u3001\u30af\u30e9\u30b9\u30bf\u30fc\u306e\u30dd\u30ea\u30b7\u30fc\u306b ",(0,i.jsx)(r.code,{children:"allowedCapabilities"})," \u304c\u5b58\u5728\u3057\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"5210-\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u6a29\u9650\u3092\u6301\u3064\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u624b\u52d5",children:"5.2.10 \u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u6a29\u9650\u3092\u6301\u3064\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30af\u30e9\u30b9\u30bf\u30fc\u4e0a\u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u6a29\u9650\u306e\u4f7f\u7528\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306b Linux \u6a29\u9650\u3092\u5fc5\u8981\u3068\u3057\u306a\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u3059\u3079\u3066\u306e\u6a29\u9650\u3092\u524a\u9664\u3057\u306a\u3044\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u7981\u6b62\u3059\u308b PSP \u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3092\u691c\u8a0e\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"5211-windows-hostprocess-\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u624b\u52d5",children:"5.2.11 Windows HostProcess \u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30e6\u30fc\u30b6\u30fc\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u3092\u542b\u3080\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u5404\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306b\u30dd\u30ea\u30b7\u30fc\u3092\u8ffd\u52a0\u3057\u3001",(0,i.jsx)(r.code,{children:".securityContext.windowsOptions.hostProcess"})," \u304c ",(0,i.jsx)(r.code,{children:"true"})," \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u5236\u9650\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"5212-hostpath-\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f7f\u7528\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u624b\u52d5",children:"5.2.12 HostPath \u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f7f\u7528\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30e6\u30fc\u30b6\u30fc\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u3092\u542b\u3080\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u5404\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306b\u30dd\u30ea\u30b7\u30fc\u3092\u8ffd\u52a0\u3057\u3001",(0,i.jsx)(r.code,{children:"hostPath"})," \u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u6301\u3064\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u5236\u9650\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"5213-hostports-\u3092\u4f7f\u7528\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b-\u624b\u52d5",children:"5.2.13 HostPorts \u3092\u4f7f\u7528\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u6700\u5c0f\u9650\u306b\u6291\u3048\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30e6\u30fc\u30b6\u30fc\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u3092\u542b\u3080\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u5404\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306b\u30dd\u30ea\u30b7\u30fc\u3092\u8ffd\u52a0\u3057\u3001",(0,i.jsx)(r.code,{children:"hostPort"})," \u30bb\u30af\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u53d7\u3051\u5165\u308c\u3092\u5236\u9650\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h2,{id:"53-\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u3068-cni",children:"5.3 \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u3068 CNI"}),"\n",(0,i.jsx)(r.h3,{id:"531-\u4f7f\u7528\u4e2d\u306e-cni-\u304c\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",children:"5.3.1 \u4f7f\u7528\u4e2d\u306e CNI \u304c\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u4f7f\u7528\u4e2d\u306e CNI \u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u3001\u5225\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3059\u308b\u304b\u3001Kubernetes \u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u5236\u9650\u3059\u308b\u305f\u3081\u306e\u4ee3\u66ff\u30e1\u30ab\u30cb\u30ba\u30e0\u3092\u898b\u3064\u3051\u308b\u3053\u3068\u3092\u691c\u8a0e\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"532-\u3059\u3079\u3066\u306e\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b-\u624b\u52d5",children:"5.3.2 \u3059\u3079\u3066\u306e\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u5f93\u3044\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066 NetworkPolicy \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h2,{id:"54-\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u7ba1\u7406",children:"5.4 \u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u7ba1\u7406"}),"\n",(0,i.jsx)(r.h3,{id:"541-\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u306e\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3088\u308a\u3082\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u306e\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u63a8\u5968\u3059\u308b-\u624b\u52d5",children:"5.4.1 \u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u306e\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3088\u308a\u3082\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u306e\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u63a8\u5968\u3059\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u53ef\u80fd\u3067\u3042\u308c\u3070\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\u3092\u518d\u8a18\u8ff0\u3057\u3001\u74b0\u5883\u5909\u6570\u3067\u306f\u306a\u304f\u30de\u30a6\u30f3\u30c8\u3055\u308c\u305f\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u8aad\u307f\u53d6\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"542-\u5916\u90e8\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u691c\u8a0e\u3059\u308b-\u624b\u52d5",children:"5.4.2 \u5916\u90e8\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u691c\u8a0e\u3059\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30af\u30e9\u30a6\u30c9\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u3084\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u306e\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u7ba1\u7406\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u304c\u63d0\u4f9b\u3059\u308b\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u7ba1\u7406\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u53c2\u7167\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h2,{id:"55-\u62e1\u5f35\u53ef\u80fd\u306a\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb",children:"5.5 \u62e1\u5f35\u53ef\u80fd\u306a\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb"}),"\n",(0,i.jsx)(r.h3,{id:"551-imagepolicywebhook-\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3092\u4f7f\u7528\u3057\u3066\u30a4\u30e1\u30fc\u30b8\u306e\u51fa\u6240\u3092\u8a2d\u5b9a\u3059\u308b-\u624b\u52d5",children:"5.5.1 ImagePolicyWebhook \u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3092\u4f7f\u7528\u3057\u3066\u30a4\u30e1\u30fc\u30b8\u306e\u51fa\u6240\u3092\u8a2d\u5b9a\u3059\u308b (\u624b\u52d5)"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," \u8b66\u544a"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\nKubernetes \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u5f93\u3044\u3001\u30a4\u30e1\u30fc\u30b8\u306e\u51fa\u6240\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(r.h2,{id:"57-\u4e00\u822c\u7684\u306a\u30dd\u30ea\u30b7\u30fc",children:"5.7 \u4e00\u822c\u7684\u306a\u30dd\u30ea\u30b7\u30fc"}),"\n",(0,i.jsx)(r.h3,{id:"571-\u30ea\u30bd\u30fc\u30b9\u9593\u306b\u540d\u524d\u7a7a\u9593\u3092\u4f7f\u7528\u3057\u3066\u7ba1\u7406\u5883\u754c\u3092\u4f5c\u6210\u3059\u308b\u624b\u52d5",children:"5.7.1 \u30ea\u30bd\u30fc\u30b9\u9593\u306b\u540d\u524d\u7a7a\u9593\u3092\u4f7f\u7528\u3057\u3066\u7ba1\u7406\u5883\u754c\u3092\u4f5c\u6210\u3059\u308b\uff08\u624b\u52d5\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," WARN"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u5f93\u3044\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u5185\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066\u540d\u524d\u7a7a\u9593\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"572-pod\u5b9a\u7fa9\u306b\u304a\u3044\u3066seccomp\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u304cdockerdefault\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u624b\u52d5",children:"5.7.2 Pod\u5b9a\u7fa9\u306b\u304a\u3044\u3066seccomp\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u304cdocker/default\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\uff08\u624b\u52d5\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," WARN"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\n",(0,i.jsx)(r.code,{children:"securityContext"}),"\u3092\u4f7f\u7528\u3057\u3066\u3001Pod\u5b9a\u7fa9\u306bdocker/default seccomp\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3092\u6709\u52b9\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u4ee5\u4e0b\u306f\u305d\u306e\u4f8b\u3067\u3059\uff1a\nsecurityContext:\nseccompProfile:\ntype: RuntimeDefault"]}),"\n",(0,i.jsx)(r.h3,{id:"573-pod\u304a\u3088\u3073\u30b3\u30f3\u30c6\u30ca\u306bsecuritycontext\u3092\u9069\u7528\u3059\u308b\u624b\u52d5",children:"5.7.3 Pod\u304a\u3088\u3073\u30b3\u30f3\u30c6\u30ca\u306bSecurityContext\u3092\u9069\u7528\u3059\u308b\uff08\u624b\u52d5\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," WARN"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\nKubernetes\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u5f93\u3044\u3001Pod\u306bSecurityContext\u3092\u9069\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u63a8\u5968\u3055\u308c\u308bSecurityContext\u306e\u30ea\u30b9\u30c8\u306b\u3064\u3044\u3066\u306f\u3001CIS Security Benchmark for Docker Containers\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,i.jsx)(r.h3,{id:"574-\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u540d\u524d\u7a7a\u9593\u306f\u4f7f\u7528\u3057\u306a\u3044\u3053\u3068\u624b\u52d5",children:"5.7.4 \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u540d\u524d\u7a7a\u9593\u306f\u4f7f\u7528\u3057\u306a\u3044\u3053\u3068\uff08\u624b\u52d5\uff09"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u7d50\u679c:"})," WARN"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"\u4fee\u6b63\u65b9\u6cd5:"}),"\nKubernetes\u30ea\u30bd\u30fc\u30b9\u306e\u9069\u5207\u306a\u5206\u96e2\u3092\u53ef\u80fd\u306b\u3059\u308b\u305f\u3081\u306b\u540d\u524d\u7a7a\u9593\u3092\u4f5c\u6210\u3057\u3001\u3059\u3079\u3066\u306e\u65b0\u3057\u3044\u30ea\u30bd\u30fc\u30b9\u304c\u7279\u5b9a\u306e\u540d\u524d\u7a7a\u9593\u306b\u4f5c\u6210\u3055\u308c\u308b\u3088\u3046\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]})]})}function u(e={}){const{wrapper:r}={...(0,l.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,r,s)=>{s.d(r,{R:()=>t,x:()=>c});var n=s(6540);const i={},l=n.createContext(i);function t(e){const r=n.useContext(l);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),n.createElement(l.Provider,{value:r},e.children)}}}]);