"use strict";(self.webpackChunkk_3_s_docs=self.webpackChunkk_3_s_docs||[]).push([[9649],{5028:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"advanced","title":"\u9ad8\u5ea6\u306a\u30aa\u30d7\u30b7\u30e7\u30f3 / \u8a2d\u5b9a","description":"\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u306b\u306f\u3001K3s\u3092\u5b9f\u884c\u304a\u3088\u3073\u7ba1\u7406\u3059\u308b\u3055\u307e\u3056\u307e\u306a\u65b9\u6cd5\u3084\u3001K3s\u306e\u4f7f\u7528\u306b\u5411\u3051\u3066\u30db\u30b9\u30c8OS\u3092\u6e96\u5099\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u624b\u9806\u306b\u3064\u3044\u3066\u306e\u9ad8\u5ea6\u306a\u60c5\u5831\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002","source":"@site/i18n/ja/docusaurus-plugin-content-docs/current/advanced.md","sourceDirName":".","slug":"/advanced","permalink":"/ja/advanced","draft":false,"unlisted":false,"editUrl":"https://github.com/k3s-io/docs/edit/main/docs/advanced.md","tags":[],"version":"current","lastUpdatedAt":1746469184000,"frontMatter":{"title":"\u9ad8\u5ea6\u306a\u30aa\u30d7\u30b7\u30e7\u30f3 / \u8a2d\u5b9a"},"sidebar":"mySidebar","previous":{"title":"Helm","permalink":"/ja/helm"},"next":{"title":"\u74b0\u5883\u5909\u6570","permalink":"/ja/reference/env-variables"}}');var c=s(4848),i=s(8453);const l={title:"\u9ad8\u5ea6\u306a\u30aa\u30d7\u30b7\u30e7\u30f3 / \u8a2d\u5b9a"},d=void 0,t={},a=[{value:"\u8a3c\u660e\u66f8\u7ba1\u7406",id:"\u8a3c\u660e\u66f8\u7ba1\u7406",level:2},{value:"\u8a3c\u660e\u66f8\u8a8d\u8a3c\u5c40 (CA) \u8a3c\u660e\u66f8",id:"\u8a3c\u660e\u66f8\u8a8d\u8a3c\u5c40-ca-\u8a3c\u660e\u66f8",level:3},{value:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304a\u3088\u3073\u30b5\u30fc\u30d0\u30fc\u8a3c\u660e\u66f8",id:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304a\u3088\u3073\u30b5\u30fc\u30d0\u30fc\u8a3c\u660e\u66f8",level:3},{value:"\u30c8\u30fc\u30af\u30f3\u7ba1\u7406",id:"\u30c8\u30fc\u30af\u30f3\u7ba1\u7406",level:2},{value:"HTTP\u30d7\u30ed\u30ad\u30b7\u306e\u8a2d\u5b9a",id:"http\u30d7\u30ed\u30ad\u30b7\u306e\u8a2d\u5b9a",level:2},{value:"Docker\u3092\u30b3\u30f3\u30c6\u30ca\u30e9\u30f3\u30bf\u30a4\u30e0\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b",id:"docker\u3092\u30b3\u30f3\u30c6\u30ca\u30e9\u30f3\u30bf\u30a4\u30e0\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b",level:2},{value:"etcdctl\u306e\u4f7f\u7528",id:"etcdctl\u306e\u4f7f\u7528",level:2},{value:"containerd\u306e\u8a2d\u5b9a",id:"containerd\u306e\u8a2d\u5b9a",level:2},{value:"\u30d9\u30fc\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8",id:"\u30d9\u30fc\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8",level:3},{value:"NVIDIA\u30b3\u30f3\u30c6\u30ca\u30e9\u30f3\u30bf\u30a4\u30e0\u306e\u30b5\u30dd\u30fc\u30c8",id:"nvidia\u30b3\u30f3\u30c6\u30ca\u30e9\u30f3\u30bf\u30a4\u30e0\u306e\u30b5\u30dd\u30fc\u30c8",level:2},{value:"\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u30ec\u30b9\u30b5\u30fc\u30d0\u30fc\u306e\u5b9f\u884c (\u5b9f\u9a13\u7684\u6a5f\u80fd)",id:"\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u30ec\u30b9\u30b5\u30fc\u30d0\u30fc\u306e\u5b9f\u884c-\u5b9f\u9a13\u7684\u6a5f\u80fd",level:2},{value:"\u30eb\u30fc\u30c8\u30ec\u30b9\u30b5\u30fc\u30d0\u30fc\u306e\u5b9f\u884c (\u5b9f\u9a13\u7684\u6a5f\u80fd)",id:"\u30eb\u30fc\u30c8\u30ec\u30b9\u30b5\u30fc\u30d0\u30fc\u306e\u5b9f\u884c-\u5b9f\u9a13\u7684\u6a5f\u80fd",level:2},{value:"\u30eb\u30fc\u30c8\u30ec\u30b9\u30e2\u30fc\u30c9\u306e\u65e2\u77e5\u306e\u554f\u984c",id:"\u30eb\u30fc\u30c8\u30ec\u30b9\u30e2\u30fc\u30c9\u306e\u65e2\u77e5\u306e\u554f\u984c",level:3},{value:"\u30eb\u30fc\u30c8\u30ec\u30b9\u30b5\u30fc\u30d0\u30fc\u306e\u958b\u59cb",id:"\u30eb\u30fc\u30c8\u30ec\u30b9\u30b5\u30fc\u30d0\u30fc\u306e\u958b\u59cb",level:3},{value:"\u9ad8\u5ea6\u306a\u30eb\u30fc\u30c8\u30ec\u30b9\u8a2d\u5b9a",id:"\u9ad8\u5ea6\u306a\u30eb\u30fc\u30c8\u30ec\u30b9\u8a2d\u5b9a",level:3},{value:"\u30eb\u30fc\u30c8\u30ec\u30b9\u306e\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0",id:"\u30eb\u30fc\u30c8\u30ec\u30b9\u306e\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0",level:3},{value:"\u30ce\u30fc\u30c9\u30e9\u30d9\u30eb\u3068\u30c6\u30a4\u30f3\u30c8",id:"\u30ce\u30fc\u30c9\u30e9\u30d9\u30eb\u3068\u30c6\u30a4\u30f3\u30c8",level:2},{value:"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u30b5\u30fc\u30d3\u30b9\u3092\u958b\u59cb\u3059\u308b",id:"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u30b5\u30fc\u30d3\u30b9\u3092\u958b\u59cb\u3059\u308b",level:2},{value:"Docker \u3067 K3s \u3092\u5b9f\u884c\u3059\u308b",id:"docker-\u3067-k3s-\u3092\u5b9f\u884c\u3059\u308b",level:2},{value:"SELinux \u30b5\u30dd\u30fc\u30c8",id:"selinux-\u30b5\u30dd\u30fc\u30c8",level:2},{value:"SELinux\u306e\u5f37\u5236\u30e2\u30fc\u30c9\u3092\u6709\u52b9\u306b\u3059\u308b",id:"selinux\u306e\u5f37\u5236\u30e2\u30fc\u30c9\u3092\u6709\u52b9\u306b\u3059\u308b",level:3},{value:"eStargz\u306e\u30ec\u30a4\u30b8\u30fc\u30d7\u30eb\u3092\u6709\u52b9\u306b\u3059\u308b\uff08\u5b9f\u9a13\u7684\u6a5f\u80fd\uff09",id:"estargz\u306e\u30ec\u30a4\u30b8\u30fc\u30d7\u30eb\u3092\u6709\u52b9\u306b\u3059\u308b\u5b9f\u9a13\u7684\u6a5f\u80fd",level:2},{value:"\u30ec\u30a4\u30b8\u30fc\u30d7\u30eb\u3068eStargz\u3068\u306f\uff1f",id:"\u30ec\u30a4\u30b8\u30fc\u30d7\u30eb\u3068estargz\u3068\u306f",level:3},{value:"eStargz\u306e\u30ec\u30a4\u30b8\u30fc\u30d7\u30eb\u306e\u305f\u3081\u306ek3s\u306e\u8a2d\u5b9a",id:"estargz\u306e\u30ec\u30a4\u30b8\u30fc\u30d7\u30eb\u306e\u305f\u3081\u306ek3s\u306e\u8a2d\u5b9a",level:3},{value:"\u8ffd\u52a0\u306e\u30ed\u30b0\u30bd\u30fc\u30b9",id:"\u8ffd\u52a0\u306e\u30ed\u30b0\u30bd\u30fc\u30b9",level:2},{value:"\u8ffd\u52a0\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u30ed\u30ae\u30f3\u30b0",id:"\u8ffd\u52a0\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u30ed\u30ae\u30f3\u30b0",level:2}];function o(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components},{TabItem:s,Tabs:r}=n;return s||x("TabItem",!0),r||x("Tabs",!0),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.p,{children:"\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u306b\u306f\u3001K3s\u3092\u5b9f\u884c\u304a\u3088\u3073\u7ba1\u7406\u3059\u308b\u3055\u307e\u3056\u307e\u306a\u65b9\u6cd5\u3084\u3001K3s\u306e\u4f7f\u7528\u306b\u5411\u3051\u3066\u30db\u30b9\u30c8OS\u3092\u6e96\u5099\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u624b\u9806\u306b\u3064\u3044\u3066\u306e\u9ad8\u5ea6\u306a\u60c5\u5831\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002"}),"\n",(0,c.jsx)(n.h2,{id:"\u8a3c\u660e\u66f8\u7ba1\u7406",children:"\u8a3c\u660e\u66f8\u7ba1\u7406"}),"\n",(0,c.jsx)(n.h3,{id:"\u8a3c\u660e\u66f8\u8a8d\u8a3c\u5c40-ca-\u8a3c\u660e\u66f8",children:"\u8a3c\u660e\u66f8\u8a8d\u8a3c\u5c40 (CA) \u8a3c\u660e\u66f8"}),"\n",(0,c.jsx)(n.p,{children:"K3s\u306f\u3001\u6700\u521d\u306e\u30b5\u30fc\u30d0\u30fc\u30ce\u30fc\u30c9\u306e\u8d77\u52d5\u6642\u306b\u81ea\u5df1\u7f72\u540d\u306e\u8a3c\u660e\u66f8\u8a8d\u8a3c\u5c40 (CA) \u8a3c\u660e\u66f8\u3092\u751f\u6210\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306eCA\u8a3c\u660e\u66f8\u306f10\u5e74\u9593\u6709\u52b9\u3067\u3042\u308a\u3001\u81ea\u52d5\u7684\u306b\u66f4\u65b0\u3055\u308c\u307e\u305b\u3093\u3002"}),"\n",(0,c.jsxs)(n.p,{children:["\u30ab\u30b9\u30bf\u30e0CA\u8a3c\u660e\u66f8\u306e\u4f7f\u7528\u3084\u81ea\u5df1\u7f72\u540dCA\u8a3c\u660e\u66f8\u306e\u66f4\u65b0\u306b\u3064\u3044\u3066\u306e\u60c5\u5831\u306f\u3001",(0,c.jsxs)(n.a,{href:"/ja/cli/certificate#certificate-authority-ca-certificates",children:[(0,c.jsx)(n.code,{children:"k3s certificate rotate-ca"})," \u30b3\u30de\u30f3\u30c9\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"]}),"\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,c.jsx)(n.h3,{id:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304a\u3088\u3073\u30b5\u30fc\u30d0\u30fc\u8a3c\u660e\u66f8",children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304a\u3088\u3073\u30b5\u30fc\u30d0\u30fc\u8a3c\u660e\u66f8"}),"\n",(0,c.jsx)(n.p,{children:"K3s\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304a\u3088\u3073\u30b5\u30fc\u30d0\u30fc\u8a3c\u660e\u66f8\u306f\u3001\u767a\u884c\u65e5\u304b\u3089365\u65e5\u9593\u6709\u52b9\u3067\u3059\u3002\u671f\u9650\u304c\u5207\u308c\u3066\u3044\u308b\u304b\u3001\u671f\u9650\u304c\u5207\u308c\u308b\u307e\u306790\u65e5\u4ee5\u5185\u306e\u8a3c\u660e\u66f8\u306f\u3001K3s\u304c\u8d77\u52d5\u3059\u308b\u305f\u3073\u306b\u81ea\u52d5\u7684\u306b\u66f4\u65b0\u3055\u308c\u307e\u3059\u3002"}),"\n",(0,c.jsxs)(n.p,{children:["\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304a\u3088\u3073\u30b5\u30fc\u30d0\u30fc\u8a3c\u660e\u66f8\u3092\u624b\u52d5\u3067\u56de\u8ee2\u3055\u305b\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u3001",(0,c.jsxs)(n.a,{href:"/ja/cli/certificate#client-and-server-certificates",children:[(0,c.jsx)(n.code,{children:"k3s certificate rotate"})," \u30b3\u30de\u30f3\u30c9\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"]}),"\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,c.jsx)(n.h2,{id:"\u30c8\u30fc\u30af\u30f3\u7ba1\u7406",children:"\u30c8\u30fc\u30af\u30f3\u7ba1\u7406"}),"\n",(0,c.jsxs)(n.p,{children:["\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001K3s\u306f\u30b5\u30fc\u30d0\u30fc\u3068\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u4e21\u65b9\u306b\u5bfe\u3057\u3066\u5358\u4e00\u306e\u9759\u7684\u30c8\u30fc\u30af\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u3053\u306e\u30c8\u30fc\u30af\u30f3\u306f\u30af\u30e9\u30b9\u30bf\u30fc\u304c\u4f5c\u6210\u3055\u308c\u305f\u5f8c\u306b\u5909\u66f4\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\n\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u53c2\u52a0\u306b\u306e\u307f\u4f7f\u7528\u3067\u304d\u308b2\u756a\u76ee\u306e\u9759\u7684\u30c8\u30fc\u30af\u30f3\u3092\u6709\u52b9\u306b\u3059\u308b\u304b\u3001\u81ea\u52d5\u7684\u306b\u671f\u9650\u5207\u308c\u306b\u306a\u308b\u4e00\u6642\u7684\u306a ",(0,c.jsx)(n.code,{children:"kubeadm"})," \u30b9\u30bf\u30a4\u30eb\u306e\u53c2\u52a0\u30c8\u30fc\u30af\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001",(0,c.jsxs)(n.a,{href:"/ja/cli/token",children:[(0,c.jsx)(n.code,{children:"k3s token"})," \u30b3\u30de\u30f3\u30c9\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"]}),"\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,c.jsx)(n.h2,{id:"http\u30d7\u30ed\u30ad\u30b7\u306e\u8a2d\u5b9a",children:"HTTP\u30d7\u30ed\u30ad\u30b7\u306e\u8a2d\u5b9a"}),"\n",(0,c.jsx)(n.p,{children:"K3s\u3092HTTP\u30d7\u30ed\u30ad\u30b7\u3092\u4ecb\u3057\u3066\u306e\u307f\u5916\u90e8\u63a5\u7d9a\u304c\u53ef\u80fd\u306a\u74b0\u5883\u3067\u5b9f\u884c\u3057\u3066\u3044\u308b\u5834\u5408\u3001K3s\u306esystemd\u30b5\u30fc\u30d3\u30b9\u3067\u30d7\u30ed\u30ad\u30b7\u8a2d\u5b9a\u3092\u69cb\u6210\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30d7\u30ed\u30ad\u30b7\u8a2d\u5b9a\u306fK3s\u3067\u4f7f\u7528\u3055\u308c\u3001\u57cb\u3081\u8fbc\u307e\u308c\u305fcontainerd\u304a\u3088\u3073kubelet\u306b\u6e21\u3055\u308c\u307e\u3059\u3002"}),"\n",(0,c.jsxs)(n.p,{children:["K3s\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3001\u73fe\u5728\u306e\u30b7\u30a7\u30eb\u306b\u5b58\u5728\u3059\u308b\u5834\u5408\u3001",(0,c.jsx)(n.code,{children:"HTTP_PROXY"}),"\u3001",(0,c.jsx)(n.code,{children:"HTTPS_PROXY"}),"\u3001",(0,c.jsx)(n.code,{children:"NO_PROXY"}),"\u3001\u304a\u3088\u3073 ",(0,c.jsx)(n.code,{children:"CONTAINERD_HTTP_PROXY"}),"\u3001",(0,c.jsx)(n.code,{children:"CONTAINERD_HTTPS_PROXY"}),"\u3001",(0,c.jsx)(n.code,{children:"CONTAINERD_NO_PROXY"})," \u5909\u6570\u3092\u81ea\u52d5\u7684\u306b\u53d6\u5f97\u3057\u3001\u901a\u5e38\u306f\u6b21\u306e\u74b0\u5883\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u8fbc\u307f\u307e\u3059\uff1a"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"/etc/systemd/system/k3s.service.env"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"/etc/systemd/system/k3s-agent.service.env"})}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"\u3082\u3061\u308d\u3093\u3001\u3053\u308c\u3089\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u3066\u30d7\u30ed\u30ad\u30b7\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002"}),"\n",(0,c.jsxs)(n.p,{children:["K3s\u306f\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u90e8\u306ePod\u304a\u3088\u3073\u30b5\u30fc\u30d3\u30b9IP\u7bc4\u56f2\u3068\u30af\u30e9\u30b9\u30bf\u30fcDNS\u30c9\u30e1\u30a4\u30f3\u3092 ",(0,c.jsx)(n.code,{children:"NO_PROXY"})," \u30a8\u30f3\u30c8\u30ea\u306e\u30ea\u30b9\u30c8\u306b\u81ea\u52d5\u7684\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002Kubernetes\u30ce\u30fc\u30c9\u81ea\u4f53\u304c\u4f7f\u7528\u3059\u308bIP\u30a2\u30c9\u30ec\u30b9\u7bc4\u56f2\uff08\u3064\u307e\u308a\u3001\u30ce\u30fc\u30c9\u306e\u30d1\u30d6\u30ea\u30c3\u30af\u304a\u3088\u3073\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8IP\uff09\u304c ",(0,c.jsx)(n.code,{children:"NO_PROXY"})," \u30ea\u30b9\u30c8\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u304b\u3001\u30ce\u30fc\u30c9\u304c\u30d7\u30ed\u30ad\u30b7\u3092\u4ecb\u3057\u3066\u5230\u9054\u53ef\u80fd\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"HTTP_PROXY=http://your-proxy.example.com:8888\nHTTPS_PROXY=http://your-proxy.example.com:8888\nNO_PROXY=127.0.0.0/8,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16\n"})}),"\n",(0,c.jsxs)(n.p,{children:["containerd\u306e\u30d7\u30ed\u30ad\u30b7\u8a2d\u5b9a\u3092K3s\u304a\u3088\u3073Kubelet\u306b\u5f71\u97ff\u3092\u4e0e\u3048\u305a\u306b\u69cb\u6210\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u5909\u6570\u306b ",(0,c.jsx)(n.code,{children:"CONTAINERD_"})," \u3092\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u3068\u3057\u3066\u4ed8\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\uff1a"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"CONTAINERD_HTTP_PROXY=http://your-proxy.example.com:8888\nCONTAINERD_HTTPS_PROXY=http://your-proxy.example.com:8888\nCONTAINERD_NO_PROXY=127.0.0.0/8,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16\n"})}),"\n",(0,c.jsx)(n.h2,{id:"docker\u3092\u30b3\u30f3\u30c6\u30ca\u30e9\u30f3\u30bf\u30a4\u30e0\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b",children:"Docker\u3092\u30b3\u30f3\u30c6\u30ca\u30e9\u30f3\u30bf\u30a4\u30e0\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b"}),"\n",(0,c.jsxs)(n.p,{children:["K3s\u306b\u306f\u696d\u754c\u6a19\u6e96\u306e\u30b3\u30f3\u30c6\u30ca\u30e9\u30f3\u30bf\u30a4\u30e0\u3067\u3042\u308b",(0,c.jsx)(n.a,{href:"https://containerd.io/",children:"containerd"}),"\u304c\u542b\u307e\u308c\u3066\u304a\u308a\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\nKubernetes 1.24\u4ee5\u964d\u3001Kubelet\u306b\u306fdockershim\u304c\u542b\u307e\u308c\u3066\u304a\u3089\u305a\u3001Kubelet\u304cdockerd\u3068\u901a\u4fe1\u3059\u308b\u305f\u3081\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u3042\u308a\u307e\u305b\u3093\u3002\nK3s 1.24\u4ee5\u964d\u306b\u306f",(0,c.jsx)(n.a,{href:"https://github.com/Mirantis/cri-dockerd",children:"cri-dockerd"}),"\u304c\u542b\u307e\u308c\u3066\u304a\u308a\u3001Docker\u30b3\u30f3\u30c6\u30ca\u30e9\u30f3\u30bf\u30a4\u30e0\u3092\u5f15\u304d\u7d9a\u304d\u4f7f\u7528\u3057\u306a\u304c\u3089\u3001\u4ee5\u524d\u306e\u30ea\u30ea\u30fc\u30b9\u304b\u3089\u30b7\u30fc\u30e0\u30ec\u30b9\u306b\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3067\u304d\u307e\u3059\u3002"]}),"\n",(0,c.jsx)(n.p,{children:"Docker\u3092containerd\u306e\u4ee3\u308f\u308a\u306b\u4f7f\u7528\u3059\u308b\u306b\u306f\uff1a"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["K3s\u30ce\u30fc\u30c9\u306bDocker\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002Rancher\u306e",(0,c.jsx)(n.a,{href:"https://github.com/rancher/install-docker",children:"Docker\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b9\u30af\u30ea\u30d7\u30c8"}),"\u306e1\u3064\u3092\u4f7f\u7528\u3057\u3066Docker\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\uff1a"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"curl https://releases.rancher.com/install-docker/20.10.sh | sh\n"})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"--docker"})," \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u3066K3s\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\uff1a"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"curl -sfL https://get.k3s.io | sh -s - --docker\n"})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"\u30af\u30e9\u30b9\u30bf\u30fc\u304c\u5229\u7528\u53ef\u80fd\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\uff1a"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"$ sudo k3s kubectl get pods --all-namespaces\nNAMESPACE     NAME                                     READY   STATUS      RESTARTS   AGE\nkube-system   local-path-provisioner-6d59f47c7-lncxn   1/1     Running     0          51s\nkube-system   metrics-server-7566d596c8-9tnck          1/1     Running     0          51s\nkube-system   helm-install-traefik-mbkn9               0/1     Completed   1          51s\nkube-system   coredns-8655855d6-rtbnb                  1/1     Running     0          51s\nkube-system   svclb-traefik-jbmvl                      2/2     Running     0          43s\nkube-system   traefik-758cd5fc85-2wz97                 1/1     Running     0          43s\n"})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Docker\u30b3\u30f3\u30c6\u30ca\u304c\u5b9f\u884c\u4e2d\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\uff1a"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'$ sudo docker ps\nCONTAINER ID        IMAGE                     COMMAND                  CREATED              STATUS              PORTS               NAMES\n3e4d34729602        897ce3c5fc8f              "entry"                  About a minute ago   Up About a minute                       k8s_lb-port-443_svclb-traefik-jbmvl_kube-system_d46f10c6-073f-4c7e-8d7a-8e7ac18f9cb0_0\nbffdc9d7a65f        rancher/klipper-lb        "entry"                  About a minute ago   Up About a minute                       k8s_lb-port-80_svclb-traefik-jbmvl_kube-system_d46f10c6-073f-4c7e-8d7a-8e7ac18f9cb0_0\n436b85c5e38d        rancher/library-traefik   "/traefik --configfi\u2026"   About a minute ago   Up About a minute                       k8s_traefik_traefik-758cd5fc85-2wz97_kube-system_07abe831-ffd6-4206-bfa1-7c9ca4fb39e7_0\nde8fded06188        rancher/pause:3.1         "/pause"                 About a minute ago   Up About a minute                       k8s_POD_svclb-traefik-jbmvl_kube-system_d46f10c6-073f-4c7e-8d7a-8e7ac18f9cb0_0\n7c6a30aeeb2f        rancher/pause:3.1         "/pause"                 About a minute ago   Up About a minute                       k8s_POD_traefik-758cd5fc85-2wz97_kube-system_07abe831-ffd6-4206-bfa1-7c9ca4fb39e7_0\nae6c58cab4a7        9d12f9848b99              "local-path-provisio\u2026"   About a minute ago   Up About a minute                       k8s_local-path-provisioner_local-path-provisioner-6d59f47c7-lncxn_kube-system_2dbd22bf-6ad9-4bea-a73d-620c90a6c1c1_0\nbe1450e1a11e        9dd718864ce6              "/metrics-server"        About a minute ago   Up About a minute                       k8s_metrics-server_metrics-server-7566d596c8-9tnck_kube-system_031e74b5-e9ef-47ef-a88d-fbf3f726cbc6_0\n4454d14e4d3f        c4d3d16fe508              "/coredns -conf /etc\u2026"   About a minute ago   Up About a minute                       k8s_coredns_coredns-8655855d6-rtbnb_kube-system_d05725df-4fb1-410a-8e82-2b1c8278a6a1_0\nc3675b87f96c        rancher/pause:3.1         "/pause"                 About a minute ago   Up About a minute                       k8s_POD_coredns-8655855d6-rtbnb_kube-system_d05725df-4fb1-410a-8e82-2b1c8278a6a1_0\n4b1fddbe6ca6        rancher/pause:3.1         "/pause"                 About a minute ago   Up About a minute                       k8s_POD_local-path-provisioner-6d59f47c7-lncxn_kube-system_2dbd22bf-6ad9-4bea-a73d-620c90a6c1c1_0\n64d3517d4a95        rancher/pause:3.1         "/pause"\n'})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"etcdctl\u306e\u4f7f\u7528",children:"etcdctl\u306e\u4f7f\u7528"}),"\n",(0,c.jsx)(n.p,{children:"etcdctl\u306f\u3001etcd\u30b5\u30fc\u30d0\u30fc\u3068\u5bfe\u8a71\u3059\u308b\u305f\u3081\u306eCLI\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002K3s\u306b\u306fetcdctl\u306f\u30d0\u30f3\u30c9\u30eb\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"}),"\n",(0,c.jsxs)(n.p,{children:["K3s\u306e\u57cb\u3081\u8fbc\u307fetcd\u3068\u5bfe\u8a71\u3059\u308b\u305f\u3081\u306betcdctl\u3092\u4f7f\u7528\u3057\u305f\u3044\u5834\u5408\u306f\u3001",(0,c.jsx)(n.a,{href:"https://etcd.io/docs/latest/install/",children:"\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"}),"\u3092\u4f7f\u7528\u3057\u3066etcdctl\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'ETCD_VERSION="v3.5.5"\nETCD_URL="https://github.com/etcd-io/etcd/releases/download/${ETCD_VERSION}/etcd-${ETCD_VERSION}-linux-amd64.tar.gz"\ncurl -sL ${ETCD_URL} | sudo tar -zxv --strip-components=1 -C /usr/local/bin\n'})}),"\n",(0,c.jsx)(n.p,{children:"\u6b21\u306b\u3001K3s\u7ba1\u7406\u306e\u8a3c\u660e\u66f8\u3068\u30ad\u30fc\u3092\u8a8d\u8a3c\u306b\u4f7f\u7528\u3059\u308b\u3088\u3046\u306betcdctl\u3092\u69cb\u6210\u3057\u3066\u4f7f\u7528\u3067\u304d\u307e\u3059\uff1a"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"sudo etcdctl version \\\n  --cacert=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt \\\n  --cert=/var/lib/rancher/k3s/server/tls/etcd/client.crt \\\n  --key=/var/lib/rancher/k3s/server/tls/etcd/client.key\n"})}),"\n",(0,c.jsx)(n.h2,{id:"containerd\u306e\u8a2d\u5b9a",children:"containerd\u306e\u8a2d\u5b9a"}),"\n",(0,c.jsxs)(n.p,{children:["K3s\u306f\u3001containerd\u306econfig.toml\u3092 ",(0,c.jsx)(n.code,{children:"/var/lib/rancher/k3s/agent/etc/containerd/config.toml"})," \u306b\u751f\u6210\u3057\u307e\u3059\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u9ad8\u5ea6\u306a\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3092\u884c\u3046\u306b\u306f\u3001\u540c\u3058\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b ",(0,c.jsx)(n.code,{children:"config.toml.tmpl"})," \u3068\u3044\u3046\u5225\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3001\u305d\u308c\u304c\u4ee3\u308f\u308a\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"config.toml.tmpl"})," \u306fGo\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u6271\u308f\u308c\u3001",(0,c.jsx)(n.code,{children:"config.Node"})," \u69cb\u9020\u4f53\u304c\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u6e21\u3055\u308c\u307e\u3059\u3002\u3053\u306e\u69cb\u9020\u4f53\u3092\u4f7f\u7528\u3057\u3066\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u3001",(0,c.jsx)(n.a,{href:"https://github.com/k3s-io/k3s/blob/master/pkg/agent/templates",children:"\u3053\u306e\u30d5\u30a9\u30eb\u30c0"}),"\u306eLinux\u304a\u3088\u3073Windows\u306e\u4f8b\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nconfig.Node golang\u69cb\u9020\u4f53\u306f",(0,c.jsx)(n.a,{href:"https://github.com/k3s-io/k3s/blob/master/pkg/daemons/config/types.go#L37",children:"\u3053\u3061\u3089"}),"\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002"]}),"\n",(0,c.jsx)(n.h3,{id:"\u30d9\u30fc\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8",children:"\u30d9\u30fc\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8"}),"\n",(0,c.jsx)(n.admonition,{title:"\u30d0\u30fc\u30b8\u30e7\u30f3\u30b2\u30fc\u30c8",type:"info",children:(0,c.jsx)(n.p,{children:"2023\u5e749\u6708\u306e\u30ea\u30ea\u30fc\u30b9\u304b\u3089\u5229\u7528\u53ef\u80fd\uff1av1.24.17+k3s1\u3001v1.25.13+k3s1\u3001v1.26.8+k3s1\u3001v1.27.5+k3s1\u3001v1.28.1+k3s1"})}),"\n",(0,c.jsx)(n.p,{children:"K3s\u306e\u30d9\u30fc\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u62e1\u5f35\u3057\u3066\u3001K3s\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u5b8c\u5168\u306a\u6a19\u6e96\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30b3\u30d4\u30fc\uff06\u30da\u30fc\u30b9\u30c8\u3059\u308b\u4ee3\u308f\u308a\u306b\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u65e2\u5b58\u306e\u8a2d\u5b9a\u306b\u57fa\u3065\u3044\u3066\u69cb\u7bc9\u3057\u3001\u6700\u5f8c\u306b\u3044\u304f\u3064\u304b\u306e\u884c\u3092\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u306b\u4fbf\u5229\u3067\u3059\u3002"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-toml",children:'#/var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl\n\n{{ template "base" . }}\n\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes."custom"]\n  runtime_type = "io.containerd.runc.v2"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes."custom".options]\n  BinaryName = "/usr/bin/custom-container-runtime"\n\n'})}),"\n",(0,c.jsx)(n.h2,{id:"nvidia\u30b3\u30f3\u30c6\u30ca\u30e9\u30f3\u30bf\u30a4\u30e0\u306e\u30b5\u30dd\u30fc\u30c8",children:"NVIDIA\u30b3\u30f3\u30c6\u30ca\u30e9\u30f3\u30bf\u30a4\u30e0\u306e\u30b5\u30dd\u30fc\u30c8"}),"\n",(0,c.jsx)(n.p,{children:"K3s\u306f\u3001\u8d77\u52d5\u6642\u306bNVIDIA\u30b3\u30f3\u30c6\u30ca\u30e9\u30f3\u30bf\u30a4\u30e0\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u3001\u81ea\u52d5\u7684\u306b\u691c\u51fa\u3057\u3066\u69cb\u6210\u3057\u307e\u3059\u3002"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["\u30ce\u30fc\u30c9\u306bnvidia-container\u30d1\u30c3\u30b1\u30fc\u30b8\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u624b\u9806\u306f\u4ee5\u4e0b\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\uff1a\n",(0,c.jsx)(n.a,{href:"https://nvidia.github.io/libnvidia-container/",children:"https://nvidia.github.io/libnvidia-container/"})]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["nvidia\u30b3\u30f3\u30c6\u30ca\u30e9\u30f3\u30bf\u30a4\u30e0\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070\uff1a\n",(0,c.jsx)(n.code,{children:"apt install -y nvidia-container-runtime cuda-drivers-fabricmanager-515 nvidia-headless-515-server"})]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["K3s\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u304b\u3001\u65e2\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u518d\u8d77\u52d5\u3057\u307e\u3059\uff1a\n",(0,c.jsx)(n.code,{children:"curl -ksL get.k3s.io | sh -"})]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"K3s\u304cnvidia\u30b3\u30f3\u30c6\u30ca\u30e9\u30f3\u30bf\u30a4\u30e0\u3092\u691c\u51fa\u3057\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\uff1a"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"grep nvidia /var/lib/rancher/k3s/agent/etc/containerd/config.toml"})}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["\u3053\u308c\u306b\u3088\u308a\u3001\u898b\u3064\u304b\u3063\u305f\u30e9\u30f3\u30bf\u30a4\u30e0\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u306b\u5fdc\u3058\u3066\u3001",(0,c.jsx)(n.code,{children:"nvidia"})," \u304a\u3088\u3073/\u307e\u305f\u306f ",(0,c.jsx)(n.code,{children:"nvidia-experimental"})," \u30e9\u30f3\u30bf\u30a4\u30e0\u304c\u81ea\u52d5\u7684\u306b containerd \u306e\u8a2d\u5b9a\u306b\u8ffd\u52a0\u3055\u308c\u307e\u3059\u3002\n\u30af\u30e9\u30b9\u30bf\u30fc\u306b RuntimeClass \u5b9a\u7fa9\u3092\u8ffd\u52a0\u3057\u3001Pod \u30b9\u30da\u30c3\u30af\u3067 ",(0,c.jsx)(n.code,{children:"runtimeClassName: nvidia"})," \u3092\u8a2d\u5b9a\u3057\u3066\u9069\u5207\u306a\u30e9\u30f3\u30bf\u30a4\u30e0\u3092\u660e\u793a\u7684\u306b\u8981\u6c42\u3059\u308b Pod \u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:'apiVersion: node.k8s.io/v1\nkind: RuntimeClass\nmetadata:\n  name: nvidia\nhandler: nvidia\n---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: nbody-gpu-benchmark\n  namespace: default\nspec:\n  restartPolicy: OnFailure\n  runtimeClassName: nvidia\n  containers:\n  - name: cuda-container\n    image: nvcr.io/nvidia/k8s/cuda-sample:nbody\n    args: ["nbody", "-gpu", "-benchmark"]\n    resources:\n      limits:\n        nvidia.com/gpu: 1\n    env:\n    - name: NVIDIA_VISIBLE_DEVICES\n      value: all\n    - name: NVIDIA_DRIVER_CAPABILITIES\n      value: all\n'})}),"\n",(0,c.jsxs)(n.p,{children:["NVIDIA Container Runtime \u306f ",(0,c.jsx)(n.a,{href:"https://github.com/NVIDIA/k8s-device-plugin/",children:"NVIDIA Device Plugin"})," \u3068\u983b\u7e41\u306b\u4f7f\u7528\u3055\u308c\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306b pod \u30b9\u30da\u30c3\u30af\u306b ",(0,c.jsx)(n.code,{children:"runtimeClassName: nvidia"})," \u3092\u542b\u3081\u308b\u3088\u3046\u306b\u5909\u66f4\u3055\u308c\u308b\u3053\u3068\u304c\u591a\u3044\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,c.jsx)(n.h2,{id:"\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u30ec\u30b9\u30b5\u30fc\u30d0\u30fc\u306e\u5b9f\u884c-\u5b9f\u9a13\u7684\u6a5f\u80fd",children:"\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u30ec\u30b9\u30b5\u30fc\u30d0\u30fc\u306e\u5b9f\u884c (\u5b9f\u9a13\u7684\u6a5f\u80fd)"}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"\u8b66\u544a:"})," \u3053\u306e\u6a5f\u80fd\u306f\u5b9f\u9a13\u7684\u3067\u3059\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"--disable-agent"})," \u30d5\u30e9\u30b0\u3092\u4f7f\u7528\u3057\u3066\u958b\u59cb\u3059\u308b\u3068\u3001\u30b5\u30fc\u30d0\u30fc\u306f kubelet\u3001\u30b3\u30f3\u30c6\u30ca\u30e9\u30f3\u30bf\u30a4\u30e0\u3001\u307e\u305f\u306f CNI \u3092\u5b9f\u884c\u3057\u307e\u305b\u3093\u3002\u30af\u30e9\u30b9\u30bf\u30fc\u306b Node \u30ea\u30bd\u30fc\u30b9\u3092\u767b\u9332\u305b\u305a\u3001",(0,c.jsx)(n.code,{children:"kubectl get nodes"})," \u306e\u51fa\u529b\u306b\u306f\u8868\u793a\u3055\u308c\u307e\u305b\u3093\u3002\nkubelet \u3092\u30db\u30b9\u30c8\u3057\u306a\u3044\u305f\u3081\u3001Pod \u3092\u5b9f\u884c\u3057\u305f\u308a\u3001\u30af\u30e9\u30b9\u30bf\u30fc\u306e\u30ce\u30fc\u30c9\u3092\u5217\u6319\u3059\u308b\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\uff08\u57cb\u3081\u8fbc\u307f\u306e etcd \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3084\u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3092\u542b\u3080\uff09\u306b\u3088\u3063\u3066\u7ba1\u7406\u3055\u308c\u305f\u308a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002"]}),"\n",(0,c.jsx)(n.p,{children:"\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u30ec\u30b9\u30b5\u30fc\u30d0\u30fc\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u306f\u3001\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3084\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u304b\u3089\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30ce\u30fc\u30c9\u3092\u767a\u898b\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u5834\u5408\u306b\u6709\u5229\u3067\u3059\u304c\u3001\u30af\u30e9\u30b9\u30bf\u30fc\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u306e\u30b5\u30dd\u30fc\u30c8\u304c\u306a\u3044\u305f\u3081\u7ba1\u7406\u306e\u8ca0\u62c5\u304c\u5897\u52a0\u3057\u307e\u3059\u3002"}),"\n",(0,c.jsxs)(n.p,{children:["\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u30ec\u30b9\u30b5\u30fc\u30d0\u30fc\u306e apiserver \u306f\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u30a2\u30c9\u30df\u30c3\u30b7\u30e7\u30f3\u30a6\u30a7\u30d6\u30d5\u30c3\u30af\u3084\u96c6\u7d04 API \u30b5\u30fc\u30d3\u30b9\u3078\u306e\u5916\u5411\u304d\u63a5\u7d9a\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\u3053\u308c\u3092\u89e3\u6c7a\u3059\u308b\u306b\u306f\u3001",(0,c.jsx)(n.code,{children:"--egress-selector-mode"})," \u30b5\u30fc\u30d0\u30fc\u30d5\u30e9\u30b0\u3092 ",(0,c.jsx)(n.code,{children:"pod"})," \u307e\u305f\u306f ",(0,c.jsx)(n.code,{children:"cluster"})," \u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u65e2\u5b58\u306e\u30af\u30e9\u30b9\u30bf\u30fc\u3067\u3053\u306e\u30d5\u30e9\u30b0\u3092\u5909\u66f4\u3059\u308b\u5834\u5408\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u6709\u52b9\u306b\u306a\u308b\u305f\u3081\u306b\u306f\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u3059\u3079\u3066\u306e\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002"]}),"\n",(0,c.jsx)(n.h2,{id:"\u30eb\u30fc\u30c8\u30ec\u30b9\u30b5\u30fc\u30d0\u30fc\u306e\u5b9f\u884c-\u5b9f\u9a13\u7684\u6a5f\u80fd",children:"\u30eb\u30fc\u30c8\u30ec\u30b9\u30b5\u30fc\u30d0\u30fc\u306e\u5b9f\u884c (\u5b9f\u9a13\u7684\u6a5f\u80fd)"}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"\u8b66\u544a:"})," \u3053\u306e\u6a5f\u80fd\u306f\u5b9f\u9a13\u7684\u3067\u3059\u3002"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"\u30eb\u30fc\u30c8\u30ec\u30b9\u30e2\u30fc\u30c9\u3067\u306f\u3001K3s \u30b5\u30fc\u30d0\u30fc\u3092\u7279\u6a29\u306e\u306a\u3044\u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u5b9f\u884c\u3067\u304d\u308b\u305f\u3081\u3001\u30db\u30b9\u30c8\u306e\u5b9f\u969b\u306e root \u3092\u6f5c\u5728\u7684\u306a\u30b3\u30f3\u30c6\u30ca\u30d6\u30ec\u30fc\u30af\u30a2\u30a6\u30c8\u653b\u6483\u304b\u3089\u4fdd\u8b77\u3067\u304d\u307e\u3059\u3002"}),"\n",(0,c.jsxs)(n.p,{children:["\u30eb\u30fc\u30c8\u30ec\u30b9 Kubernetes \u306b\u3064\u3044\u3066\u8a73\u3057\u304f\u306f ",(0,c.jsx)(n.a,{href:"https://rootlesscontaine.rs/",children:"https://rootlesscontaine.rs/"})," \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,c.jsx)(n.h3,{id:"\u30eb\u30fc\u30c8\u30ec\u30b9\u30e2\u30fc\u30c9\u306e\u65e2\u77e5\u306e\u554f\u984c",children:"\u30eb\u30fc\u30c8\u30ec\u30b9\u30e2\u30fc\u30c9\u306e\u65e2\u77e5\u306e\u554f\u984c"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u30dd\u30fc\u30c8"})}),"\n",(0,c.jsx)(n.p,{children:"\u30eb\u30fc\u30c8\u30ec\u30b9\u3067\u5b9f\u884c\u3059\u308b\u3068\u3001\u65b0\u3057\u3044\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u540d\u524d\u7a7a\u9593\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u306f\u3001K3s \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u30db\u30b9\u30c8\u304b\u3089\u304b\u306a\u308a\u5206\u96e2\u3055\u308c\u305f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u5b9f\u884c\u3055\u308c\u308b\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002\n\u30db\u30b9\u30c8\u304b\u3089 K3s \u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u30b5\u30fc\u30d3\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u552f\u4e00\u306e\u65b9\u6cd5\u306f\u3001K3s \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u540d\u524d\u7a7a\u9593\u3078\u306e\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u3059\u3002\n\u30eb\u30fc\u30c8\u30ec\u30b9 K3s \u306b\u306f\u30016443 \u304a\u3088\u3073 1024 \u672a\u6e80\u306e\u30b5\u30fc\u30d3\u30b9\u30dd\u30fc\u30c8\u3092\u30db\u30b9\u30c8\u306b\u30aa\u30d5\u30bb\u30c3\u30c8 10000 \u3067\u81ea\u52d5\u7684\u306b\u30d0\u30a4\u30f3\u30c9\u3059\u308b\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002"}),"\n",(0,c.jsx)(n.p,{children:"\u4f8b\u3048\u3070\u3001\u30dd\u30fc\u30c8 80 \u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30db\u30b9\u30c8\u4e0a\u3067 10080 \u306b\u306a\u308a\u307e\u3059\u304c\u30018080 \u306f\u30aa\u30d5\u30bb\u30c3\u30c8\u306a\u3057\u3067 8080 \u306b\u306a\u308a\u307e\u3059\u3002\u73fe\u5728\u3001\u81ea\u52d5\u7684\u306b\u30d0\u30a4\u30f3\u30c9\u3055\u308c\u308b\u306e\u306f LoadBalancer \u30b5\u30fc\u30d3\u30b9\u306e\u307f\u3067\u3059\u3002"}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Cgroups"})}),"\n",(0,c.jsx)(n.p,{children:"Cgroup v1 \u304a\u3088\u3073\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9 v1/v2 \u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u7d14\u7c8b\u306a Cgroup v2 \u306e\u307f\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u30eb\u30fc\u30c8\u30ec\u30b9\u3067\u5b9f\u884c\u4e2d\u306b K3s \u304c cgroups \u306e\u6b20\u5982\u306b\u3088\u308a\u8d77\u52d5\u306b\u5931\u6557\u3059\u308b\u5834\u5408\u3001\u30ce\u30fc\u30c9\u304c\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u30e2\u30fc\u30c9\u306b\u306a\u3063\u3066\u304a\u308a\u3001\u300c\u6b20\u843d\u3057\u3066\u3044\u308b\u300dcgroups \u304c v1 \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306b\u307e\u3060\u30d0\u30a4\u30f3\u30c9\u3055\u308c\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002"}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u30de\u30eb\u30c1\u30ce\u30fc\u30c9/\u30de\u30eb\u30c1\u30d7\u30ed\u30bb\u30b9\u30af\u30e9\u30b9\u30bf\u30fc"})}),"\n",(0,c.jsxs)(n.p,{children:["\u30de\u30eb\u30c1\u30ce\u30fc\u30c9\u306e\u30eb\u30fc\u30c8\u30ec\u30b9\u30af\u30e9\u30b9\u30bf\u30fc\u3084\u540c\u3058\u30ce\u30fc\u30c9\u4e0a\u3067\u306e\u8907\u6570\u306e\u30eb\u30fc\u30c8\u30ec\u30b9 k3s \u30d7\u30ed\u30bb\u30b9\u306f\u73fe\u5728\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f ",(0,c.jsx)(n.a,{href:"https://github.com/k3s-io/k3s/issues/6488#issuecomment-1314998091",children:"#6488"})," \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"\u30eb\u30fc\u30c8\u30ec\u30b9\u30b5\u30fc\u30d0\u30fc\u306e\u958b\u59cb",children:"\u30eb\u30fc\u30c8\u30ec\u30b9\u30b5\u30fc\u30d0\u30fc\u306e\u958b\u59cb"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["cgroup v2 \u30c7\u30ea\u30b2\u30fc\u30b7\u30e7\u30f3\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002\u8a73\u7d30\u306f ",(0,c.jsx)(n.a,{href:"https://rootlesscontaine.rs/getting-started/common/cgroup2/",children:"https://rootlesscontaine.rs/getting-started/common/cgroup2/"})," \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3053\u306e\u30b9\u30c6\u30c3\u30d7\u306f\u5fc5\u9808\u3067\u3059\u3002\u9069\u5207\u306a cgroups \u304c\u30c7\u30ea\u30b2\u30fc\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u3068\u3001\u30eb\u30fc\u30c8\u30ec\u30b9 kubelet \u306f\u8d77\u52d5\u306b\u5931\u6557\u3057\u307e\u3059\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.a,{href:"https://github.com/k3s-io/k3s/blob/master/k3s-rootless.service",children:(0,c.jsx)(n.code,{children:"https://github.com/k3s-io/k3s/blob/<VERSION>/k3s-rootless.service"})})," \u304b\u3089 ",(0,c.jsx)(n.code,{children:"k3s-rootless.service"})," \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n",(0,c.jsx)(n.code,{children:"k3s-rootless.service"})," \u3068 ",(0,c.jsx)(n.code,{children:"k3s"})," \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u540c\u3058\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"k3s-rootless.service"})," \u3092 ",(0,c.jsx)(n.code,{children:"~/.config/systemd/user/k3s-rootless.service"})," \u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u306e\u30b5\u30fc\u30d3\u30b9 (",(0,c.jsx)(n.code,{children:"/etc/systemd/..."}),") \u3068\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\n",(0,c.jsx)(n.code,{children:"k3s"})," \u30d0\u30a4\u30ca\u30ea\u306e\u30d1\u30b9\u306b\u5fdc\u3058\u3066\u3001\u30d5\u30a1\u30a4\u30eb\u306e ",(0,c.jsx)(n.code,{children:"ExecStart=/usr/local/bin/k3s ..."})," \u884c\u3092\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"systemctl --user daemon-reload"})," \u3092\u5b9f\u884c\u3057\u307e\u3059\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"systemctl --user enable --now k3s-rootless"})," \u3092\u5b9f\u884c\u3057\u307e\u3059\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"KUBECONFIG=~/.kube/k3s.yaml kubectl get pods -A"})," \u3092\u5b9f\u884c\u3057\u3001Pod \u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"\u6ce8\u610f:"})," \u30bf\u30fc\u30df\u30ca\u30eb\u3067 ",(0,c.jsx)(n.code,{children:"k3s server --rootless"})," \u3092\u5b9f\u884c\u3057\u3088\u3046\u3068\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002\u30bf\u30fc\u30df\u30ca\u30eb\u30bb\u30c3\u30b7\u30e7\u30f3\u3067\u306f cgroup v2 \u30c7\u30ea\u30b2\u30fc\u30b7\u30e7\u30f3\u304c\u8a31\u53ef\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\n\u3069\u3046\u3057\u3066\u3082\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u8a66\u3059\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u306f\u3001",(0,c.jsx)(n.code,{children:"systemd-run --user -p Delegate=yes --tty k3s server --rootless"})," \u3092\u4f7f\u7528\u3057\u3066 systemd \u30b9\u30b3\u30fc\u30d7\u3067\u30e9\u30c3\u30d7\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"\u9ad8\u5ea6\u306a\u30eb\u30fc\u30c8\u30ec\u30b9\u8a2d\u5b9a",children:"\u9ad8\u5ea6\u306a\u30eb\u30fc\u30c8\u30ec\u30b9\u8a2d\u5b9a"}),"\n",(0,c.jsxs)(n.p,{children:["\u30eb\u30fc\u30c8\u30ec\u30b9 K3s \u306f\u3001\u30db\u30b9\u30c8\u3068\u30e6\u30fc\u30b6\u30fc\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u540d\u524d\u7a7a\u9593\u9593\u306e\u901a\u4fe1\u306b ",(0,c.jsx)(n.a,{href:"https://github.com/rootless-containers/rootlesskit",children:"rootlesskit"})," \u3068 ",(0,c.jsx)(n.a,{href:"https://github.com/rootless-containers/slirp4netns",children:"slirp4netns"})," \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\nrootlesskit \u3068 slirp4netns \u306b\u3088\u3063\u3066\u4f7f\u7528\u3055\u308c\u308b\u4e00\u90e8\u306e\u8a2d\u5b9a\u306f\u74b0\u5883\u5909\u6570\u3067\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u3089\u3092\u8a2d\u5b9a\u3059\u308b\u6700\u826f\u306e\u65b9\u6cd5\u306f\u3001k3s-rootless systemd \u30e6\u30cb\u30c3\u30c8\u306e ",(0,c.jsx)(n.code,{children:"Environment"})," \u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u3059\u3002"]}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"\u5909\u6570\u540d"}),(0,c.jsx)(n.th,{children:"\u30c7\u30d5\u30a9\u30eb\u30c8\u5024"}),(0,c.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"K3S_ROOTLESS_MTU"})}),(0,c.jsx)(n.td,{children:"1500"}),(0,c.jsx)(n.td,{children:"slirp4netns \u4eee\u60f3\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e MTU \u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"K3S_ROOTLESS_CIDR"})}),(0,c.jsx)(n.td,{children:"10.41.0.0/16"}),(0,c.jsx)(n.td,{children:"slirp4netns \u4eee\u60f3\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067\u4f7f\u7528\u3055\u308c\u308b CIDR \u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"K3S_ROOTLESS_ENABLE_IPV6"})}),(0,c.jsx)(n.td,{children:"\u81ea\u52d5\u691c\u51fa"}),(0,c.jsx)(n.td,{children:"slirp4netns \u306e IPv6 \u30b5\u30dd\u30fc\u30c8\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u3001K3s \u304c\u30c7\u30e5\u30a2\u30eb\u30b9\u30bf\u30c3\u30af\u64cd\u4f5c\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306b\u81ea\u52d5\u7684\u306b\u6709\u52b9\u306b\u306a\u308a\u307e\u3059\u3002"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"K3S_ROOTLESS_PORT_DRIVER"})}),(0,c.jsx)(n.td,{children:"builtin"}),(0,c.jsxs)(n.td,{children:["\u30eb\u30fc\u30c8\u30ec\u30b9\u30dd\u30fc\u30c8\u30c9\u30e9\u30a4\u30d0\u30fc\u3092\u9078\u629e\u3057\u307e\u3059\u3002",(0,c.jsx)(n.code,{children:"builtin"})," \u307e\u305f\u306f ",(0,c.jsx)(n.code,{children:"slirp4netns"})," \u306e\u3044\u305a\u308c\u304b\u3067\u3059\u3002builtin \u306f\u9ad8\u901f\u3067\u3059\u304c\u3001\u53d7\u4fe1\u30d1\u30b1\u30c3\u30c8\u306e\u5143\u306e\u9001\u4fe1\u5143\u30a2\u30c9\u30ec\u30b9\u3092\u507d\u88c5\u3057\u307e\u3059\u3002"]})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"K3S_ROOTLESS_DISABLE_HOST_LOOPBACK"})}),(0,c.jsx)(n.td,{children:"true"}),(0,c.jsx)(n.td,{children:"\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u4ecb\u3057\u3066\u30db\u30b9\u30c8\u306e\u30eb\u30fc\u30d7\u30d0\u30c3\u30af\u30a2\u30c9\u30ec\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u6709\u52b9\u306b\u3059\u308b\u304b\u3069\u3046\u304b\u3092\u5236\u5fa1\u3057\u307e\u3059\u3002\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u306e\u7406\u7531\u304b\u3089\u3001\u3053\u308c\u3092\u5909\u66f4\u3057\u306a\u3044\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002"})]})]})]}),"\n",(0,c.jsx)(n.h3,{id:"\u30eb\u30fc\u30c8\u30ec\u30b9\u306e\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0",children:"\u30eb\u30fc\u30c8\u30ec\u30b9\u306e\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"systemctl --user status k3s-rootless"})," \u3092\u5b9f\u884c\u3057\u3066\u30c7\u30fc\u30e2\u30f3\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"journalctl --user -f -u k3s-rootless"})," \u3092\u5b9f\u884c\u3057\u3066\u30c7\u30fc\u30e2\u30f3\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002"]}),"\n",(0,c.jsxs)(n.li,{children:["\u8a73\u7d30\u306f ",(0,c.jsx)(n.a,{href:"https://rootlesscontaine.rs/",children:"https://rootlesscontaine.rs/"})," \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"\u30ce\u30fc\u30c9\u30e9\u30d9\u30eb\u3068\u30c6\u30a4\u30f3\u30c8",children:"\u30ce\u30fc\u30c9\u30e9\u30d9\u30eb\u3068\u30c6\u30a4\u30f3\u30c8"}),"\n",(0,c.jsxs)(n.p,{children:["K3s \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306f\u3001kubelet \u306b\u30e9\u30d9\u30eb\u3068\u30c6\u30a4\u30f3\u30c8\u3092\u8ffd\u52a0\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3 ",(0,c.jsx)(n.code,{children:"--node-label"})," \u304a\u3088\u3073 ",(0,c.jsx)(n.code,{children:"--node-taint"})," \u3067\u69cb\u6210\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f ",(0,c.jsx)(n.a,{href:"/ja/cli/agent#node-labels-and-taints-for-agents",children:"\u767b\u9332\u6642"})," \u306b\u306e\u307f\u30e9\u30d9\u30eb\u304a\u3088\u3073/\u307e\u305f\u306f\u30c6\u30a4\u30f3\u30c8\u3092\u8ffd\u52a0\u3059\u308b\u305f\u3081\u3001\u30ce\u30fc\u30c9\u304c\u30af\u30e9\u30b9\u30bf\u30fc\u306b\u6700\u521d\u306b\u53c2\u52a0\u3059\u308b\u969b\u306b\u306e\u307f\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u73fe\u5728\u306e\u3059\u3079\u3066\u306e Kubernetes \u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306f\u3001",(0,c.jsx)(n.code,{children:"kubernetes.io"})," \u304a\u3088\u3073 ",(0,c.jsx)(n.code,{children:"k8s.io"})," \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u3092\u6301\u3064\u307b\u3068\u3093\u3069\u306e\u30e9\u30d9\u30eb\u3067\u30ce\u30fc\u30c9\u306e\u767b\u9332\u304c\u5236\u9650\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u7279\u306b ",(0,c.jsx)(n.code,{children:"kubernetes.io/role"})," \u30e9\u30d9\u30eb\u304c\u542b\u307e\u308c\u307e\u3059\u3002\u8a31\u53ef\u3055\u308c\u3066\u3044\u306a\u3044\u30e9\u30d9\u30eb\u3067\u30ce\u30fc\u30c9\u3092\u8d77\u52d5\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001K3s \u306f\u8d77\u52d5\u306b\u5931\u6557\u3057\u307e\u3059\u3002Kubernetes \u306e\u8457\u8005\u306b\u3088\u308b\u3068:"]}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:"\u30ce\u30fc\u30c9\u306f\u81ea\u5206\u81ea\u8eab\u306e\u5f79\u5272\u30e9\u30d9\u30eb\u3092\u4e3b\u5f35\u3059\u308b\u3053\u3068\u306f\u8a31\u53ef\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u30ce\u30fc\u30c9\u306e\u5f79\u5272\u306f\u901a\u5e38\u3001\u7279\u6a29\u307e\u305f\u306f\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30bf\u30a4\u30d7\u306e\u30ce\u30fc\u30c9\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u3001\u30ce\u30fc\u30c9\u304c\u81ea\u5206\u81ea\u8eab\u3092\u305d\u306e\u30d7\u30fc\u30eb\u306b\u30e9\u30d9\u30eb\u4ed8\u3051\u3059\u308b\u3053\u3068\u3092\u8a31\u53ef\u3059\u308b\u3068\u3001\u4fb5\u5bb3\u3055\u308c\u305f\u30ce\u30fc\u30c9\u304c\u9ad8\u3044\u7279\u6a29\u306e\u8cc7\u683c\u60c5\u5831\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\uff08\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ec\u30fc\u30f3\u30c7\u30fc\u30e2\u30f3\u30bb\u30c3\u30c8\u306a\u3069\uff09\u3092\u7c21\u5358\u306b\u5f15\u304d\u4ed8\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002"}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f ",(0,c.jsx)(n.a,{href:"https://github.com/kubernetes/enhancements/blob/master/keps/sig-auth/279-limit-node-access/README.md",children:"SIG-Auth KEP 279"})," \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u30ce\u30fc\u30c9\u306e\u767b\u9332\u5f8c\u306b\u30ce\u30fc\u30c9\u30e9\u30d9\u30eb\u3068\u30c6\u30a4\u30f3\u30c8\u3092\u5909\u66f4\u3057\u305f\u308a\u3001\u4e88\u7d04\u6e08\u307f\u30e9\u30d9\u30eb\u3092\u8ffd\u52a0\u3057\u305f\u308a\u3059\u308b\u5834\u5408\u306f\u3001",(0,c.jsx)(n.code,{children:"kubectl"})," \u3092\u4f7f\u7528\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u30c6\u30a4\u30f3\u30c8\u306e\u8ffd\u52a0\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u516c\u5f0f\u306e Kubernetes \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002",(0,c.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/",children:"\u30c6\u30a4\u30f3\u30c8"})," \u304a\u3088\u3073 ",(0,c.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/configure-pod-container/assign-pods-nodes/#add-a-label-to-a-node",children:"\u30ce\u30fc\u30c9\u30e9\u30d9\u30eb"})," \u306e\u8a73\u7d30\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,c.jsx)(n.h2,{id:"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u30b5\u30fc\u30d3\u30b9\u3092\u958b\u59cb\u3059\u308b",children:"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u30b5\u30fc\u30d3\u30b9\u3092\u958b\u59cb\u3059\u308b"}),"\n",(0,c.jsx)(n.p,{children:"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3001OS \u304c systemd \u307e\u305f\u306f openrc \u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u304b\u3092\u81ea\u52d5\u691c\u51fa\u3057\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30d7\u30ed\u30bb\u30b9\u306e\u4e00\u74b0\u3068\u3057\u3066\u30b5\u30fc\u30d3\u30b9\u3092\u6709\u52b9\u5316\u304a\u3088\u3073\u958b\u59cb\u3057\u307e\u3059\u3002"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["openrc \u3067\u5b9f\u884c\u3059\u308b\u5834\u5408\u3001\u30ed\u30b0\u306f ",(0,c.jsx)(n.code,{children:"/var/log/k3s.log"})," \u306b\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002"]}),"\n",(0,c.jsxs)(n.li,{children:["systemd \u3067\u5b9f\u884c\u3059\u308b\u5834\u5408\u3001\u30ed\u30b0\u306f ",(0,c.jsx)(n.code,{children:"/var/log/syslog"})," \u306b\u4f5c\u6210\u3055\u308c\u3001",(0,c.jsx)(n.code,{children:"journalctl -u k3s"}),"\uff08\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u5834\u5408\u306f ",(0,c.jsx)(n.code,{children:"journalctl -u k3s-agent"}),"\uff09\u3092\u4f7f\u7528\u3057\u3066\u8868\u793a\u3055\u308c\u307e\u3059\u3002"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u81ea\u52d5\u8d77\u52d5\u304a\u3088\u3073\u30b5\u30fc\u30d3\u30b9\u306e\u6709\u52b9\u5316\u3092\u7121\u52b9\u306b\u3059\u308b\u4f8b:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"curl -sfL https://get.k3s.io | INSTALL_K3S_SKIP_START=true INSTALL_K3S_SKIP_ENABLE=true sh -\n"})}),"\n",(0,c.jsx)(n.h2,{id:"docker-\u3067-k3s-\u3092\u5b9f\u884c\u3059\u308b",children:"Docker \u3067 K3s \u3092\u5b9f\u884c\u3059\u308b"}),"\n",(0,c.jsx)(n.p,{children:"Docker \u3067 K3s \u3092\u5b9f\u884c\u3059\u308b\u65b9\u6cd5\u306f\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059:"}),"\n",(0,c.jsxs)(r,{children:[(0,c.jsxs)(s,{value:"K3d",default:!0,children:[(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.a,{href:"https://github.com/k3d-io/k3d",children:"k3d"})," \u306f\u3001Docker \u3067\u30de\u30eb\u30c1\u30ce\u30fc\u30c9 K3s \u30af\u30e9\u30b9\u30bf\u30fc\u3092\u7c21\u5358\u306b\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u8a2d\u8a08\u3055\u308c\u305f\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u3067\u3059\u3002"]}),(0,c.jsx)(n.p,{children:"k3d \u3092\u4f7f\u7528\u3059\u308b\u3068\u3001\u30ed\u30fc\u30ab\u30eb\u3067\u306e Kubernetes \u958b\u767a\u306e\u305f\u3081\u306b\u3001Docker \u3067\u30b7\u30f3\u30b0\u30eb\u30ce\u30fc\u30c9\u304a\u3088\u3073\u30de\u30eb\u30c1\u30ce\u30fc\u30c9\u306e k3s \u30af\u30e9\u30b9\u30bf\u30fc\u3092\u975e\u5e38\u306b\u7c21\u5358\u306b\u4f5c\u6210\u3067\u304d\u307e\u3059\u3002"}),(0,c.jsxs)(n.p,{children:["\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u3084 k3d \u306e\u4f7f\u7528\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u3001",(0,c.jsx)(n.a,{href:"https://k3d.io/#installation",children:"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"})," \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]})]}),(0,c.jsxs)(s,{value:"Docker",children:[(0,c.jsxs)(n.p,{children:["Docker \u3092\u4f7f\u7528\u3059\u308b\u306b\u306f\u3001K3s \u30b5\u30fc\u30d0\u30fc\u304a\u3088\u3073\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e ",(0,c.jsx)(n.code,{children:"rancher/k3s"})," \u30a4\u30e1\u30fc\u30b8\u3082\u5229\u7528\u53ef\u80fd\u3067\u3059\u3002\n",(0,c.jsx)(n.code,{children:"docker run"})," \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066:"]}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"sudo docker run \\\n  --privileged \\\n  --name k3s-server-1 \\\n  --hostname k3s-server-1 \\\n  -p 6443:6443 \\\n  -d rancher/k3s:v1.24.10-k3s1 \\\n  server\n"})}),(0,c.jsx)(n.admonition,{type:"note",children:(0,c.jsxs)(n.p,{children:["\u6709\u52b9\u306a K3s \u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30bf\u30b0\u3068\u3057\u3066\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002",(0,c.jsx)(n.code,{children:"latest"})," \u30bf\u30b0\u306f\u7dad\u6301\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\nDocker \u30a4\u30e1\u30fc\u30b8\u3067\u306f\u30bf\u30b0\u306b ",(0,c.jsx)(n.code,{children:"+"})," \u8a18\u53f7\u3092\u4f7f\u7528\u3067\u304d\u306a\u3044\u305f\u3081\u3001\u4ee3\u308f\u308a\u306b ",(0,c.jsx)(n.code,{children:"-"})," \u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]})}),(0,c.jsx)(n.p,{children:"K3s \u304c\u8d77\u52d5\u3057\u3066\u5b9f\u884c\u3055\u308c\u308b\u3068\u3001\u7ba1\u7406\u7528 kubeconfig \u3092 Docker \u30b3\u30f3\u30c6\u30ca\u304b\u3089\u30b3\u30d4\u30fc\u3057\u3066\u4f7f\u7528\u3067\u304d\u307e\u3059:"}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"sudo docker cp k3s-server-1:/etc/rancher/k3s/k3s.yaml ~/.kube/config\n"})})]})]}),"\n",(0,c.jsx)(n.h2,{id:"selinux-\u30b5\u30dd\u30fc\u30c8",children:"SELinux \u30b5\u30dd\u30fc\u30c8"}),"\n",(0,c.jsx)(n.admonition,{title:"\u30d0\u30fc\u30b8\u30e7\u30f3\u30b2\u30fc\u30c8",type:"info",children:(0,c.jsx)(n.p,{children:"v1.19.4+k3s1 \u304b\u3089\u5229\u7528\u53ef\u80fd"})}),"\n",(0,c.jsx)(n.p,{children:"SELinux \u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u30b7\u30b9\u30c6\u30e0\uff08CentOS \u306a\u3069\uff09\u306b K3s \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5834\u5408\u3001\u9069\u5207\u306a SELinux \u30dd\u30ea\u30b7\u30fc\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002"}),"\n",(0,c.jsxs)(r,{children:[(0,c.jsx)(s,{value:"Automatic Installation",default:!0,children:(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.a,{href:"/ja/installation/configuration#configuration-with-install-script",children:"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b9\u30af\u30ea\u30d7\u30c8"}),"\u306f\u3001\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u884c\u308f\u306a\u3044\u9650\u308a\u3001\u4e92\u63db\u6027\u306e\u3042\u308b\u30b7\u30b9\u30c6\u30e0\u3067\u3042\u308c\u3070Rancher RPM\u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089SELinux RPM\u3092\u81ea\u52d5\u7684\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u81ea\u52d5\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u30b9\u30ad\u30c3\u30d7\u3059\u308b\u306b\u306f\u3001",(0,c.jsx)(n.code,{children:"INSTALL_K3S_SKIP_SELINUX_RPM=true"}),"\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002"]})}),(0,c.jsxs)(s,{value:"Manual Installation",default:!0,children:[(0,c.jsx)(n.p,{children:"\u5fc5\u8981\u306a\u30dd\u30ea\u30b7\u30fc\u306f\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059:"}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"yum install -y container-selinux selinux-policy-base\nyum install -y https://rpm.rancher.io/k3s/latest/common/centos/7/noarch/k3s-selinux-1.4-1.el7.noarch.rpm\n"})}),(0,c.jsxs)(n.p,{children:["\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u5931\u6557\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u8b66\u544a\u3092\u30ed\u30b0\u306b\u8a18\u9332\u3059\u308b\u3088\u3046\u306b\u5f37\u5236\u3059\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3057\u307e\u3059: ",(0,c.jsx)(n.code,{children:"INSTALL_K3S_SELINUX_WARN=true"}),"\u3002"]})]})]}),"\n",(0,c.jsx)(n.h3,{id:"selinux\u306e\u5f37\u5236\u30e2\u30fc\u30c9\u3092\u6709\u52b9\u306b\u3059\u308b",children:"SELinux\u306e\u5f37\u5236\u30e2\u30fc\u30c9\u3092\u6709\u52b9\u306b\u3059\u308b"}),"\n",(0,c.jsxs)(n.p,{children:["SELinux\u3092\u6d3b\u7528\u3059\u308b\u306b\u306f\u3001K3s\u30b5\u30fc\u30d0\u30fc\u304a\u3088\u3073\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u8d77\u52d5\u3059\u308b\u969b\u306b",(0,c.jsx)(n.code,{children:"--selinux"}),"\u30d5\u30e9\u30b0\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306fK3s\u306e",(0,c.jsx)(n.a,{href:"/ja/installation/configuration#configuration-file",children:"\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb"}),"\u306b\u3082\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"selinux: true\n"})}),"\n",(0,c.jsxs)(n.p,{children:["SELinux\u306e\u4e0b\u3067\u30ab\u30b9\u30bf\u30e0\u306e",(0,c.jsx)(n.code,{children:"--data-dir"}),"\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u306b\u306f\u3001\u304a\u305d\u3089\u304f\u72ec\u81ea\u306e\u30ab\u30b9\u30bf\u30e0\u30dd\u30ea\u30b7\u30fc\u3092\u66f8\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u30ac\u30a4\u30c0\u30f3\u30b9\u306b\u3064\u3044\u3066\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u30e9\u30f3\u30bf\u30a4\u30e0\u306eSELinux\u30dd\u30ea\u30b7\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u542b\u3080",(0,c.jsx)(n.a,{href:"https://github.com/containers/container-selinux",children:"containers/container-selinux"}),"\u30ea\u30dd\u30b8\u30c8\u30ea\u304a\u3088\u3073K3s\u306eSELinux\u30dd\u30ea\u30b7\u30fc\u3092\u542b\u3080",(0,c.jsx)(n.a,{href:"https://github.com/k3s-io/k3s-selinux",children:"k3s-io/k3s-selinux"}),"\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,c.jsx)(n.h2,{id:"estargz\u306e\u30ec\u30a4\u30b8\u30fc\u30d7\u30eb\u3092\u6709\u52b9\u306b\u3059\u308b\u5b9f\u9a13\u7684\u6a5f\u80fd",children:"eStargz\u306e\u30ec\u30a4\u30b8\u30fc\u30d7\u30eb\u3092\u6709\u52b9\u306b\u3059\u308b\uff08\u5b9f\u9a13\u7684\u6a5f\u80fd\uff09"}),"\n",(0,c.jsx)(n.h3,{id:"\u30ec\u30a4\u30b8\u30fc\u30d7\u30eb\u3068estargz\u3068\u306f",children:"\u30ec\u30a4\u30b8\u30fc\u30d7\u30eb\u3068eStargz\u3068\u306f\uff1f"}),"\n",(0,c.jsxs)(n.p,{children:["\u30a4\u30e1\u30fc\u30b8\u306e\u30d7\u30eb\u306f\u30b3\u30f3\u30c6\u30ca\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306e\u4e2d\u3067\u6642\u9593\u306e\u304b\u304b\u308b\u30b9\u30c6\u30c3\u30d7\u306e\u4e00\u3064\u3068\u3057\u3066\u77e5\u3089\u308c\u3066\u3044\u307e\u3059\u3002\n",(0,c.jsx)(n.a,{href:"https://www.usenix.org/conference/fast16/technical-sessions/presentation/harter",children:"Harter, et al."}),"\u306b\u3088\u308b\u3068\u3001"]}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:"\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30d7\u30eb\u306f\u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\u6642\u9593\u306e76%\u3092\u5360\u3081\u308b\u304c\u3001\u305d\u306e\u30c7\u30fc\u30bf\u306e\u3046\u3061\u8aad\u307f\u53d6\u3089\u308c\u308b\u306e\u306f\u308f\u305a\u304b6.4%\u3067\u3042\u308b"}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["\u3053\u306e\u554f\u984c\u306b\u5bfe\u51e6\u3059\u308b\u305f\u3081\u306b\u3001k3s\u306f\u30a4\u30e1\u30fc\u30b8\u30b3\u30f3\u30c6\u30f3\u30c4\u306e",(0,c.jsx)(n.em,{children:"\u30ec\u30a4\u30b8\u30fc\u30d7\u30eb"}),"\u3092\u5b9f\u9a13\u7684\u306b\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u308c\u306b\u3088\u308a\u3001k3s\u306f\u30a4\u30e1\u30fc\u30b8\u5168\u4f53\u304c\u30d7\u30eb\u3055\u308c\u308b\u524d\u306b\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u4ee3\u308f\u308a\u306b\u3001\u5fc5\u8981\u306a\u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u30c1\u30e3\u30f3\u30af\uff08\u4f8b\uff1a\u500b\u3005\u306e\u30d5\u30a1\u30a4\u30eb\uff09\u304c\u30aa\u30f3\u30c7\u30de\u30f3\u30c9\u3067\u53d6\u5f97\u3055\u308c\u307e\u3059\u3002\n\u7279\u306b\u5927\u304d\u306a\u30a4\u30e1\u30fc\u30b8\u306e\u5834\u5408\u3001\u3053\u306e\u6280\u8853\u306f\u30b3\u30f3\u30c6\u30ca\u306e\u8d77\u52d5\u9045\u5ef6\u3092\u77ed\u7e2e\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u30ec\u30a4\u30b8\u30fc\u30d7\u30eb\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f\u3001\u30bf\u30fc\u30b2\u30c3\u30c8\u30a4\u30e1\u30fc\u30b8\u3092",(0,c.jsx)(n.a,{href:"https://github.com/containerd/stargz-snapshotter/blob/main/docs/stargz-estargz.md",children:(0,c.jsx)(n.em,{children:"eStargz"})}),"\u3068\u3057\u3066\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u3053\u308c\u306fOCI\u306e\u4ee3\u66ff\u3067\u3059\u304c\u3001100% OCI\u4e92\u63db\u306e\u30a4\u30e1\u30fc\u30b8\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u3001\u30ec\u30a4\u30b8\u30fc\u30d7\u30eb\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002\n\u4e92\u63db\u6027\u304c\u3042\u308b\u305f\u3081\u3001eStargz\u306f\u6a19\u6e96\u306e\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\uff08\u4f8b\uff1aghcr.io\uff09\u306b\u30d7\u30c3\u30b7\u30e5\u3067\u304d\u3001eStargz\u975e\u5bfe\u5fdc\u306e\u30e9\u30f3\u30bf\u30a4\u30e0\u3067\u3082",(0,c.jsx)(n.em,{children:"\u5b9f\u884c\u53ef\u80fd"}),"\u3067\u3059\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["eStargz\u306f",(0,c.jsx)(n.a,{href:"https://github.com/google/crfs",children:"Google CRFS\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u3088\u3063\u3066\u63d0\u6848\u3055\u308c\u305fstargz\u30d5\u30a9\u30fc\u30de\u30c3\u30c8"}),"\u306b\u57fa\u3065\u3044\u3066\u958b\u767a\u3055\u308c\u307e\u3057\u305f\u304c\u3001\u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u691c\u8a3c\u3084\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u6700\u9069\u5316\u306a\u3069\u306e\u5b9f\u7528\u7684\u306a\u6a5f\u80fd\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u30ec\u30a4\u30b8\u30fc\u30d7\u30eb\u3068eStargz\u306e\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001",(0,c.jsx)(n.a,{href:"https://github.com/containerd/stargz-snapshotter",children:"Stargz Snapshotter\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea"}),"\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,c.jsx)(n.h3,{id:"estargz\u306e\u30ec\u30a4\u30b8\u30fc\u30d7\u30eb\u306e\u305f\u3081\u306ek3s\u306e\u8a2d\u5b9a",children:"eStargz\u306e\u30ec\u30a4\u30b8\u30fc\u30d7\u30eb\u306e\u305f\u3081\u306ek3s\u306e\u8a2d\u5b9a"}),"\n",(0,c.jsxs)(n.p,{children:["\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001k3s\u30b5\u30fc\u30d0\u30fc\u304a\u3088\u3073\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306b",(0,c.jsx)(n.code,{children:"--snapshotter=stargz"}),"\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u5fc5\u8981\u3067\u3059\u3002"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"k3s server --snapshotter=stargz\n"})}),"\n",(0,c.jsxs)(n.p,{children:["\u3053\u306e\u8a2d\u5b9a\u306b\u3088\u308a\u3001eStargz\u5f62\u5f0f\u306e\u30a4\u30e1\u30fc\u30b8\u306e\u30ec\u30a4\u30b8\u30fc\u30d7\u30eb\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u4f8b\u306ePod\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306f\u3001eStargz\u5f62\u5f0f\u306e",(0,c.jsx)(n.code,{children:"node:13.13.0"}),"\u30a4\u30e1\u30fc\u30b8\uff08",(0,c.jsx)(n.code,{children:"ghcr.io/stargz-containers/node:13.13.0-esgz"}),"\uff09\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\nstargz\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30bf\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u5834\u5408\u3001K3s\u306f\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306e\u30ec\u30a4\u30b8\u30fc\u30d7\u30eb\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: nodejs\nspec:\n  containers:\n  - name: nodejs-estargz\n    image: ghcr.io/stargz-containers/node:13.13.0-esgz\n    command: [\"node\"]\n    args:\n    - -e\n    - var http = require('http');\n      http.createServer(function(req, res) {\n        res.writeHead(200);\n        res.end('Hello World!\\n');\n      }).listen(80);\n    ports:\n    - containerPort: 80\n"})}),"\n",(0,c.jsx)(n.h2,{id:"\u8ffd\u52a0\u306e\u30ed\u30b0\u30bd\u30fc\u30b9",children:"\u8ffd\u52a0\u306e\u30ed\u30b0\u30bd\u30fc\u30b9"}),"\n",(0,c.jsxs)(n.p,{children:["K3s\u7528\u306e",(0,c.jsx)(n.a,{href:"https://rancher.com/docs/rancher/v2.6/en/logging/helm-chart-options/",children:"Rancher\u30ed\u30ae\u30f3\u30b0"}),"\u306f\u3001Rancher\u3092\u4f7f\u7528\u305b\u305a\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u624b\u9806\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"helm repo add rancher-charts https://charts.rancher.io\nhelm repo update\nhelm install --create-namespace -n cattle-logging-system rancher-logging-crd rancher-charts/rancher-logging-crd\nhelm install --create-namespace -n cattle-logging-system rancher-logging --set additionalLoggingSources.k3s.enabled=true rancher-charts/rancher-logging\n"})}),"\n",(0,c.jsx)(n.h2,{id:"\u8ffd\u52a0\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u30ed\u30ae\u30f3\u30b0",children:"\u8ffd\u52a0\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u30ed\u30ae\u30f3\u30b0"}),"\n",(0,c.jsx)(n.p,{children:"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u306b\u3088\u3063\u3066\u30c9\u30ed\u30c3\u30d7\u3055\u308c\u305f\u30d1\u30b1\u30c3\u30c8\u3092\u30ed\u30b0\u306b\u8a18\u9332\u3067\u304d\u307e\u3059\u3002\u30d1\u30b1\u30c3\u30c8\u306fiptables\u306eNFLOG\u30a2\u30af\u30b7\u30e7\u30f3\u306b\u9001\u4fe1\u3055\u308c\u3001\u30d1\u30b1\u30c3\u30c8\u306e\u8a73\u7d30\uff08\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u3092\u542b\u3080\uff09\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002"}),"\n",(0,c.jsxs)(n.p,{children:["\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u304c\u591a\u3044\u5834\u5408\u3001\u30ed\u30b0\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u6570\u304c\u975e\u5e38\u306b\u591a\u304f\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u30dd\u30ea\u30b7\u30fc\u3054\u3068\u306b\u30ed\u30b0\u306e\u30ec\u30fc\u30c8\u3092\u5236\u5fa1\u3059\u308b\u306b\u306f\u3001\u5bfe\u8c61\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u306b\u4ee5\u4e0b\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3057\u3066\u3001",(0,c.jsx)(n.code,{children:"limit"}),"\u304a\u3088\u3073",(0,c.jsx)(n.code,{children:"limit-burst"}),"\u306eiptables\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a2d\u5b9a\u3057\u307e\u3059:"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"kube-router.io/netpol-nflog-limit=<LIMIT-VALUE>"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"kube-router.io/netpol-nflog-limit-burst=<LIMIT-BURST-VALUE>"})}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f",(0,c.jsx)(n.code,{children:"limit=10/minute"}),"\u304a\u3088\u3073",(0,c.jsx)(n.code,{children:"limit-burst=10"}),"\u3067\u3059\u3002\u3053\u308c\u3089\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u5f62\u5f0f\u304a\u3088\u3073\u53ef\u80fd\u306a\u5024\u306b\u3064\u3044\u3066\u306f\u3001",(0,c.jsx)(n.a,{href:"https://www.netfilter.org/documentation/HOWTO/packet-filtering-HOWTO-7.html#:~:text=restrict%20the%20rate%20of%20matches",children:"iptables\u30de\u30cb\u30e5\u30a2\u30eb"}),"\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["NFLOG\u30d1\u30b1\u30c3\u30c8\u3092\u30ed\u30b0\u30a8\u30f3\u30c8\u30ea\u306b\u5909\u63db\u3059\u308b\u306b\u306f\u3001ulogd2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001",(0,c.jsx)(n.code,{children:"[log1]"}),"\u3092",(0,c.jsx)(n.code,{children:"group=100"}),"\u3067\u8aad\u307f\u53d6\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u305d\u306e\u5f8c\u3001ulogd2\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3057\u3066\u65b0\u3057\u3044\u8a2d\u5b9a\u3092\u53cd\u6620\u3055\u305b\u307e\u3059\u3002\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u30eb\u30fc\u30eb\u306b\u3088\u3063\u3066\u30d1\u30b1\u30c3\u30c8\u304c\u30d6\u30ed\u30c3\u30af\u3055\u308c\u308b\u3068\u3001",(0,c.jsx)(n.code,{children:"/var/log/ulog/syslogemu.log"}),"\u306b\u30ed\u30b0\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002"]}),"\n",(0,c.jsx)(n.p,{children:"NFLOG\u30cd\u30c3\u30c8\u30ea\u30f3\u30af\u30bd\u30b1\u30c3\u30c8\u306b\u9001\u4fe1\u3055\u308c\u305f\u30d1\u30b1\u30c3\u30c8\u306f\u3001tcpdump\u3084tshark\u306a\u3069\u306e\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30c4\u30fc\u30eb\u3092\u4f7f\u7528\u3057\u3066\u8aad\u307f\u53d6\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"tcpdump -ni nflog:100\n"})}),"\n",(0,c.jsx)(n.p,{children:"tcpdump\u306f\u3088\u308a\u624b\u8efd\u306b\u5229\u7528\u3067\u304d\u307e\u3059\u304c\u3001\u30d1\u30b1\u30c3\u30c8\u3092\u30d6\u30ed\u30c3\u30af\u3057\u305f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u306e\u540d\u524d\u306f\u8868\u793a\u3055\u308c\u307e\u305b\u3093\u3002\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u540d\u3092\u542b\u3080\u5b8c\u5168\u306aNFLOG\u30d1\u30b1\u30c3\u30c8\u30d8\u30c3\u30c0\u30fc\u3092\u8868\u793a\u3059\u308b\u306b\u306f\u3001wireshark\u306etshark\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002"})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(o,{...e})}):o(e)}function x(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var r=s(6540);const c={},i=r.createContext(c);function l(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:l(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);