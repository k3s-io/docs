"use strict";(self.webpackChunkk_3_s_docs=self.webpackChunkk_3_s_docs||[]).push([[2175],{9804:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>a,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"cluster-access","title":"Cluster Access","description":"The admin kubeconfig file stored at /etc/rancher/k3s/k3s.yaml can be used to provide access to the Kubernetes cluster.","source":"@site/docs/cluster-access.md","sourceDirName":".","slug":"/cluster-access","permalink":"/cluster-access","draft":false,"unlisted":false,"editUrl":"https://github.com/k3s-io/docs/edit/main/docs/cluster-access.md","tags":[],"version":"current","lastUpdatedAt":1759342677000,"frontMatter":{"title":"Cluster Access"},"sidebar":"mySidebar","previous":{"title":"Architecture","permalink":"/architecture"},"next":{"title":"Volumes and Storage","permalink":"/storage"}}');var c=s(4848),r=s(8453);const o={title:"Cluster Access"},i=void 0,a={},l=[{value:"Accessing the Cluster from Outside with kubectl",id:"accessing-the-cluster-from-outside-with-kubectl",level:3}];function d(e){const t={admonition:"admonition",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(t.p,{children:["The admin kubeconfig file stored at ",(0,c.jsx)(t.code,{children:"/etc/rancher/k3s/k3s.yaml"})," can be used to provide access to the Kubernetes cluster.\nThis file grants access as the ",(0,c.jsx)(t.code,{children:"system:admin"})," user and ",(0,c.jsx)(t.code,{children:"system:masters"})," group, which are hardcoded by Kubernetes to have unrestricted access to all resources within the cluster."]}),"\n",(0,c.jsxs)(t.p,{children:["The ",(0,c.jsx)(t.code,{children:"kubectl"})," command that comes with K3s has been configured to load configuration from this path by default.\nIf you have installed upstream Kubernetes command line tools such as kubectl or helm you will need to configure them with the correct kubeconfig path.\nThis can be done by either exporting the ",(0,c.jsx)(t.code,{children:"KUBECONFIG"})," environment variable or by invoking the ",(0,c.jsx)(t.code,{children:"--kubeconfig"})," command line flag.\nRefer to the examples below for details."]}),"\n",(0,c.jsxs)(t.ul,{children:["\n",(0,c.jsxs)(t.li,{children:["Export the KUBECONFIG environment variable:","\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-bash",children:"export KUBECONFIG=/etc/rancher/k3s/k3s.yaml\nkubectl get pods --all-namespaces\nhelm ls --all-namespaces\n"})}),"\n"]}),"\n",(0,c.jsxs)(t.li,{children:["Specify the location of the kubeconfig file in the command:","\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-bash",children:"kubectl --kubeconfig /etc/rancher/k3s/k3s.yaml get pods --all-namespaces\nhelm --kubeconfig /etc/rancher/k3s/k3s.yaml ls --all-namespaces\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(t.h3,{id:"accessing-the-cluster-from-outside-with-kubectl",children:"Accessing the Cluster from Outside with kubectl"}),"\n",(0,c.jsxs)(t.p,{children:["Copy ",(0,c.jsx)(t.code,{children:"/etc/rancher/k3s/k3s.yaml"})," on your machine located outside the cluster as ",(0,c.jsx)(t.code,{children:"~/.kube/config"}),".\nThen replace the value of the ",(0,c.jsx)(t.code,{children:"server"})," field with the IP or name of your K3s server.\n",(0,c.jsx)(t.code,{children:"kubectl"})," can now manage your K3s cluster."]}),"\n",(0,c.jsx)(t.admonition,{type:"info",children:(0,c.jsx)(t.p,{children:"K3s will automatically update the certificates within the admin kubeconfig every time it starts.\nIf you make a copy of this file, you will need to manually update those copies to ensure that the inline certificates do not expire."})})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,c.jsx)(t,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>i});var n=s(6540);const c={},r=n.createContext(c);function o(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:o(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);