<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-installation/packaged-components" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Managing Packaged Components | K3s</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.k3s.io/zh/installation/packaged-components"><meta data-rh="true" property="og:locale" content="zh"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" property="og:locale:alternate" content="ja"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Managing Packaged Components | K3s"><meta data-rh="true" name="description" content="Auto-Deploying Manifests (AddOns)"><meta data-rh="true" property="og:description" content="Auto-Deploying Manifests (AddOns)"><link data-rh="true" rel="icon" href="/zh/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.k3s.io/zh/installation/packaged-components"><link data-rh="true" rel="alternate" href="https://docs.k3s.io/installation/packaged-components" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.k3s.io/zh/installation/packaged-components" hreflang="zh"><link data-rh="true" rel="alternate" href="https://docs.k3s.io/ja/installation/packaged-components" hreflang="ja"><link data-rh="true" rel="alternate" href="https://docs.k3s.io/installation/packaged-components" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"安装","item":"https://docs.k3s.io/zh/installation/"},{"@type":"ListItem","position":2,"name":"Managing Packaged Components","item":"https://docs.k3s.io/zh/installation/packaged-components"}]}</script><link rel="alternate" type="application/rss+xml" href="/zh/blog/rss.xml" title="K3s RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh/blog/atom.xml" title="K3s Atom Feed"><link rel="stylesheet" href="/zh/assets/css/styles.a3400111.css">
<script src="/zh/assets/js/runtime~main.bab27af8.js" defer="defer"></script>
<script src="/zh/assets/js/main.d2e9a5c3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/zh/img/k3s-logo-light.svg"><link rel="preload" as="image" href="/zh/img/k3s-logo-dark.svg"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh/"><div class="navbar__logo"><img src="/zh/img/k3s-logo-light.svg" alt="logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/zh/img/k3s-logo-dark.svg" alt="logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/installation/packaged-components" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/zh/installation/packaged-components" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh">简体中文</a></li><li><a href="/ja/installation/packaged-components" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li></ul></div><a class="navbar__item navbar__link navbar__icon navbar__blog" href="/zh/blog">Blog</a><a href="https://github.com/k3s-io/k3s/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__icon navbar__github">GitHub</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/">K3s - 轻量级 Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/quick-start">快速入门指南</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/zh/installation">安装</a><button aria-label="折叠侧边栏分类 &#x27;安装&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/installation/requirements">Requirements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/installation/configuration">Configuration Options</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/installation/private-registry">Private Registry Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/installation/registry-mirror">Embedded Registry Mirror</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/installation/airgap">Air-Gap Install</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/installation/server-roles">Managing Server Roles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh/installation/packaged-components">Managing Packaged Components</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/installation/uninstall">Uninstalling K3s</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/zh/datastore">集群数据存储</a><button aria-label="展开侧边栏分类 &#x27;集群数据存储&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/zh/upgrades">升级</a><button aria-label="展开侧边栏分类 &#x27;升级&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/zh/security">安全</a><button aria-label="展开侧边栏分类 &#x27;安全&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/zh/cli">CLI 工具</a><button aria-label="展开侧边栏分类 &#x27;CLI 工具&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/architecture">架构</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/cluster-access">集群访问</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/storage">卷和存储</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/import-images">Import Images</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/zh/networking">Networking</a><button aria-label="展开侧边栏分类 &#x27;Networking&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/helm">Helm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/advanced">高级选项和配置</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/zh/reference/env-variables">参考</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/zh/release-notes/v1.33.X">Release Notes</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/related-projects">Related Projects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/known-issues">已知问题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/faq">常见问题</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/zh/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/zh/installation"><span>安装</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Managing Packaged Components</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Managing Packaged Components</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="auto-deploying-manifests-addons">Auto-Deploying Manifests (AddOns)<a href="#auto-deploying-manifests-addons" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2>
<p>On server nodes, any file found in <code>/var/lib/rancher/k3s/server/manifests</code> will automatically be deployed to Kubernetes in a manner similar to <code>kubectl apply</code>, both on startup and when the file is changed on disk. Deleting files out of this directory will not delete the corresponding resources from the cluster.</p>
<p>Manifests are tracked as <code>AddOn</code> custom resources in the <code>kube-system</code> namespace. Any errors or warnings encountered when applying the manifest file may seen by using <code>kubectl describe</code> on the corresponding <code>AddOn</code>, or by using <code>kubectl get event -n kube-system</code> to view all events for that namespace, including those from the deploy controller.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="packaged-components">Packaged Components<a href="#packaged-components" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<p>K3s comes with a number of packaged components that are deployed as AddOns via the manifests directory: <code>coredns</code>, <code>traefik</code>, <code>local-storage</code>, and <code>metrics-server</code>. The embedded <code>servicelb</code> LoadBalancer controller does not have a manifest file, but can be disabled as if it were an <code>AddOn</code> for historical reasons.</p>
<p>Manifests for packaged components are managed by K3s, and should not be altered. The files are re-written to disk whenever K3s is started, in order to ensure their integrity.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="user-addons">User AddOns<a href="#user-addons" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<p>You may place additional files in the manifests directory for deployment as an <code>AddOn</code>. Each file may contain multiple Kubernetes resources, delmited by the <code>---</code> YAML document separator. For more information on organizing resources in manifests, see the <a href="https://kubernetes.io/docs/concepts/cluster-administration/manage-deployment/" target="_blank" rel="noopener noreferrer">Managing Resources</a> section of the Kubernetes documentation.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="file-naming-requirements">File Naming Requirements<a href="#file-naming-requirements" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<p>The <code>AddOn</code> name for each file in the manifest directory is derived from the file basename.
Ensure that all files within the manifests directory (or within any subdirectories) have names that are unique, and adhere to Kubernetes <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/names/" target="_blank" rel="noopener noreferrer">object naming restrictions</a>.
Care should also be taken not to conflict with names in use by the default K3s packaged components, even if those components are disabled.</p>
<p>Here is en example of an error that would be reported if the file name contains underscores:</p>
<blockquote>
<p><code>Failed to process config: failed to process /var/lib/rancher/k3s/server/manifests/example_manifest.yaml:    Addon.k3s.cattle.io &quot;example_manifest&quot; is invalid: metadata.name: Invalid value: &quot;example_manifest&quot;:     a lowercase RFC 1123 subdomain must consist of lower case alphanumeric characters, &#x27;-&#x27; or &#x27;.&#x27;, and must start and end with an alphanumeric character    (e.g. &#x27;example.com&#x27;, regex used for validation is &#x27;[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*&#x27;)</code></p>
</blockquote>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>危险</div><div class="admonitionContent_BuS1"><p>If you have multiple server nodes, and place additional AddOn manifests on more than one server, it is your responsibility to ensure that files stay in sync across those nodes. K3s does not sync AddOn content between nodes, and cannot guarantee correct behavior if different servers attempt to deploy conflicting manifests.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="disabling-manifests">Disabling Manifests<a href="#disabling-manifests" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2>
<p>There are two ways to disable deployment of specific content from the manifests directory.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-the---disable-flag">Using the <code>--disable</code> flag<a href="#using-the---disable-flag" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<p>The AddOns for packaged components listed above, in addition to AddOns for any additional manifests placed in the <code>manifests</code> directory, can be disabled with the <code>--disable</code> flag. Disabled AddOns are actively uninstalled from the cluster, and the source files deleted from the <code>manifests</code> directory.</p>
<p>For example, to disable traefik from being installed on a new cluster, or to uninstall it and remove the manifest from an existing cluster, you can start K3s with <code>--disable=traefik</code>. Multiple items can be disabled by separating their names with commas, or by repeating the flag.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-skip-files">Using .skip files<a href="#using-skip-files" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<p>For any file under <code>/var/lib/rancher/k3s/server/manifests</code>, you can create a <code>.skip</code> file which will cause K3s to ignore the corresponding manifest. The contents of the <code>.skip</code> file do not matter, only its existence is checked. Note that creating a <code>.skip</code> file after an AddOn has already been created will not remove or otherwise modify it or the resources it created; the file is simply treated as if it did not exist.</p>
<p>For example, creating an empty <code>traefik.yaml.skip</code> file in the manifests directory before K3s is started the first time, will cause K3s to skip deploying <code>traefik.yaml</code>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">ls</span><span class="token plain"> /var/lib/rancher/k3s/server/manifests</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ccm.yaml      local-storage.yaml  rolebindings.yaml  traefik.yaml.skip</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">coredns.yaml  traefik.yaml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl get pods </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-A</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAMESPACE     NAME                                     READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kube-system   local-path-provisioner-64ffb68fd-xx98j   </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          74s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kube-system   metrics-server-5489f84d5d-7zwkt          </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          74s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kube-system   coredns-85cb69466-vcq7j                  </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          74s</span><br></span></code></pre></div></div>
<p>If Traefik had already been deployed prior to creating the <code>traefik.skip</code> file, Traefik would stay as-is, and would not be affected by future updates when K3s is upgraded.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="helm-addons">Helm AddOns<a href="#helm-addons" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2>
<p>For information about managing Helm charts via auto-deploying manifests, refer to the section about <a href="/zh/helm">Helm.</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/k3s-io/docs/edit/main/docs/installation/packaged-components.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">最后<!-- -->于 <b><time datetime="2025-07-30T21:10:37.000Z" itemprop="dateModified">2025年7月30日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh/installation/server-roles"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Managing Server Roles</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh/installation/uninstall"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Uninstalling K3s</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#auto-deploying-manifests-addons" class="table-of-contents__link toc-highlight">Auto-Deploying Manifests (AddOns)</a><ul><li><a href="#packaged-components" class="table-of-contents__link toc-highlight">Packaged Components</a></li><li><a href="#user-addons" class="table-of-contents__link toc-highlight">User AddOns</a></li></ul></li><li><a href="#disabling-manifests" class="table-of-contents__link toc-highlight">Disabling Manifests</a><ul><li><a href="#using-the---disable-flag" class="table-of-contents__link toc-highlight">Using the <code>--disable</code> flag</a></li><li><a href="#using-skip-files" class="table-of-contents__link toc-highlight">Using .skip files</a></li></ul></li><li><a href="#helm-addons" class="table-of-contents__link toc-highlight">Helm AddOns</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 K3s Project Authors. All rights reserved. <br>The Linux Foundation has registered trademarks
      and uses trademarks. For a list of trademarks of The Linux Foundation, 
      please see our <a href="https://www.linuxfoundation.org/trademark-usage"> Trademark Usage</a> page.</div></div></div></footer></div>
</body>
</html>